/*! For license information please see main.369fa0c1.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},75:(e,t,n)=>{"use strict";n.d(t,{B:()=>i,t:()=>s});var r=console;function s(){return r}function i(e){r=e}},153:(e,t,n)=>{"use strict";var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},168:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(null,arguments)}n.d(t,{A:()=>r})},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function y(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=x.prototype=new y;b.constructor=x,p(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,N=Object.prototype.hasOwnProperty,j={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)N.call(t,s)&&!S.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:j.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+C(l,0):i,w(a)?(s="",null!=e&&(s=e.replace(E,"$&/")+"/"),T(a,t,s,"",function(e){return e})):null!=a&&(k(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(E,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+C(o=e[c],c);l+=T(o,t,s,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,s,u=i+C(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],s=0;return T(e,r,"","",function(e){return t.call(n,e,s++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:j};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=s,t.Profiler=a,t.PureComponent=x,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=p({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=j.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N.call(t,c)&&!S.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!p)if(null!==r(c))p=!0,D(N);else{var t=r(u);null!==t&&P(w,t.startTime-e)}}function N(e,n){p=!1,g&&(g=!1,y(k),k=-1),m=!0;var i=f;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&s(c),b(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&P(w,d.startTime-n),l=!1}return l}finally{h=null,f=i,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,S=!1,_=null,k=-1,E=5,C=-1;function T(){return!(t.unstable_now()-C<E)}function I(){if(null!==_){var e=t.unstable_now();C=e;var n=!0;try{n=_(!0,e)}finally{n?j():(S=!1,_=null)}}else S=!1}if("function"===typeof x)j=function(){x(I)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=I,j=function(){R.postMessage(null)}}else j=function(){v(I,0)};function D(e){_=e,S||(S=!0,j())}function P(e,n){k=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,D(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(y(k),k=-1):g=!0,P(w,i-a))):(e.sortIndex=o,n(c,e),p||m||(p=!0,D(N))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},244:(e,t,n)=>{"use strict";n.d(t,{m:()=>a});var r=n(540),s=n(422),i=n(870),a=new(function(e){function t(){var t;return(t=e.call(this)||this).setup=function(e){var t;if(!i.S$&&(null==(t=window)?void 0:t.addEventListener)){var n=function(){return e()};return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),function(){window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}},t}(0,r.A)(t,e);var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)},n.setEventListener=function(e){var t,n=this;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e(function(e){"boolean"===typeof e?n.setFocused(e):n.onFocus()})},n.setFocused=function(e){this.focused=e,e&&this.onFocus()},n.onFocus=function(){this.listeners.forEach(function(e){e()})},n.isFocused=function(){return"boolean"===typeof this.focused?this.focused:"undefined"===typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)},t}(s.Q))},298:()=>{},317:(e,t,n)=>{"use strict";n.d(t,{t:()=>a});var r=n(540),s=n(422),i=n(870),a=new(function(e){function t(){var t;return(t=e.call(this)||this).setup=function(e){var t;if(!i.S$&&(null==(t=window)?void 0:t.addEventListener)){var n=function(){return e()};return window.addEventListener("online",n,!1),window.addEventListener("offline",n,!1),function(){window.removeEventListener("online",n),window.removeEventListener("offline",n)}}},t}(0,r.A)(t,e);var n=t.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)},n.setEventListener=function(e){var t,n=this;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e(function(e){"boolean"===typeof e?n.setOnline(e):n.onOnline()})},n.setOnline=function(e){this.online=e,e&&this.onOnline()},n.onOnline=function(){this.listeners.forEach(function(e){e()})},n.isOnline=function(){return"boolean"===typeof this.online?this.online:"undefined"===typeof navigator||"undefined"===typeof navigator.onLine||navigator.onLine},t}(s.Q))},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},422:(e,t,n)=>{"use strict";n.d(t,{Q:()=>r});var r=function(){function e(){this.listeners=[]}var t=e.prototype;return t.subscribe=function(e){var t=this,n=e||function(){};return this.listeners.push(n),this.onSubscribe(),function(){t.listeners=t.listeners.filter(function(e){return e!==n}),t.onUnsubscribe()}},t.hasListeners=function(){return this.listeners.length>0},t.onSubscribe=function(){},t.onUnsubscribe=function(){},e}()},490:(e,t,n)=>{"use strict";n.d(t,{QueryClientProvider:()=>h,useMutation:()=>b,useQuery:()=>A,useQueryClient:()=>d});var r=n(991),s=n(950).unstable_batchedUpdates;r.j.setBatchNotifyFunction(s);var i=n(75),a=console;(0,i.B)(a);var o=n(43),l=o.createContext(void 0),c=o.createContext(!1);function u(e){return e&&"undefined"!==typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=l),window.ReactQueryClientContext):l}var d=function(){var e=o.useContext(u(o.useContext(c)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},h=function(e){var t=e.client,n=e.contextSharing,r=void 0!==n&&n,s=e.children;o.useEffect(function(){return t.mount(),function(){t.unmount()}},[t]);var i=u(r);return o.createElement(c.Provider,{value:r},o.createElement(i.Provider,{value:t},s))},f=n(168),m=n(870),p=n(540),g=n(964),v=n(422),y=function(e){function t(t,n){var r;return(r=e.call(this)||this).client=t,r.setOptions(n),r.bindMethods(),r.updateResult(),r}(0,p.A)(t,e);var n=t.prototype;return n.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},n.setOptions=function(e){this.options=this.client.defaultMutationOptions(e)},n.onUnsubscribe=function(){var e;this.listeners.length||(null==(e=this.currentMutation)||e.removeObserver(this))},n.onMutationUpdate=function(e){this.updateResult();var t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)},n.getCurrentResult=function(){return this.currentResult},n.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},n.mutate=function(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,(0,f.A)({},this.options,{variables:"undefined"!==typeof e?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},n.updateResult=function(){var e=this.currentMutation?this.currentMutation.state:(0,g.$)(),t=(0,f.A)({},e,{isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset});this.currentResult=t},n.notify=function(e){var t=this;r.j.batch(function(){t.mutateOptions&&(e.onSuccess?(null==t.mutateOptions.onSuccess||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):e.onError&&(null==t.mutateOptions.onError||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),e.listeners&&t.listeners.forEach(function(e){e(t.currentResult)})})},t}(v.Q);function x(e,t,n){return"function"===typeof t?t.apply(void 0,n):"boolean"===typeof t?t:!!e}function b(e,t,n){var s=o.useRef(!1),i=o.useState(0)[1],a=(0,m.GR)(e,t,n),l=d(),c=o.useRef();c.current?c.current.setOptions(a):c.current=new y(l,a);var u=c.current.getCurrentResult();o.useEffect(function(){s.current=!0;var e=c.current.subscribe(r.j.batchCalls(function(){s.current&&i(function(e){return e+1})}));return function(){s.current=!1,e()}},[]);var h=o.useCallback(function(e,t){c.current.mutate(e,t).catch(m.lQ)},[]);if(u.error&&x(void 0,c.current.options.useErrorBoundary,[u.error]))throw u.error;return(0,f.A)({},u,{mutate:h,mutateAsync:u.mutate})}var w=n(244),N=n(990),j=function(e){function t(t,n){var r;return(r=e.call(this)||this).client=t,r.options=n,r.trackedProps=[],r.selectError=null,r.bindMethods(),r.setOptions(n),r}(0,p.A)(t,e);var n=t.prototype;return n.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},n.onSubscribe=function(){1===this.listeners.length&&(this.currentQuery.addObserver(this),S(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},n.onUnsubscribe=function(){this.listeners.length||this.destroy()},n.shouldFetchOnReconnect=function(){return _(this.currentQuery,this.options,this.options.refetchOnReconnect)},n.shouldFetchOnWindowFocus=function(){return _(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},n.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},n.setOptions=function(e,t){var n=this.options,r=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(e),"undefined"!==typeof this.options.enabled&&"boolean"!==typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();var s=this.hasListeners();s&&k(this.currentQuery,r,this.options,n)&&this.executeFetch(),this.updateResult(t),!s||this.currentQuery===r&&this.options.enabled===n.enabled&&this.options.staleTime===n.staleTime||this.updateStaleTimeout();var i=this.computeRefetchInterval();!s||this.currentQuery===r&&this.options.enabled===n.enabled&&i===this.currentRefetchInterval||this.updateRefetchInterval(i)},n.getOptimisticResult=function(e){var t=this.client.defaultQueryObserverOptions(e),n=this.client.getQueryCache().build(this.client,t);return this.createResult(n,t)},n.getCurrentResult=function(){return this.currentResult},n.trackResult=function(e,t){var n=this,r={},s=function(e){n.trackedProps.includes(e)||n.trackedProps.push(e)};return Object.keys(e).forEach(function(t){Object.defineProperty(r,t,{configurable:!1,enumerable:!0,get:function(){return s(t),e[t]}})}),(t.useErrorBoundary||t.suspense)&&s("error"),r},n.getNextResult=function(e){var t=this;return new Promise(function(n,r){var s=t.subscribe(function(t){t.isFetching||(s(),t.isError&&(null==e?void 0:e.throwOnError)?r(t.error):n(t))})})},n.getCurrentQuery=function(){return this.currentQuery},n.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},n.refetch=function(e){return this.fetch((0,f.A)({},e,{meta:{refetchPage:null==e?void 0:e.refetchPage}}))},n.fetchOptimistic=function(e){var t=this,n=this.client.defaultQueryObserverOptions(e),r=this.client.getQueryCache().build(this.client,n);return r.fetch().then(function(){return t.createResult(r,n)})},n.fetch=function(e){var t=this;return this.executeFetch(e).then(function(){return t.updateResult(),t.currentResult})},n.executeFetch=function(e){this.updateQuery();var t=this.currentQuery.fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(m.lQ)),t},n.updateStaleTimeout=function(){var e=this;if(this.clearStaleTimeout(),!m.S$&&!this.currentResult.isStale&&(0,m.gn)(this.options.staleTime)){var t=(0,m.j3)(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(function(){e.currentResult.isStale||e.updateResult()},t)}},n.computeRefetchInterval=function(){var e;return"function"===typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(e=this.options.refetchInterval)&&e},n.updateRefetchInterval=function(e){var t=this;this.clearRefetchInterval(),this.currentRefetchInterval=e,!m.S$&&!1!==this.options.enabled&&(0,m.gn)(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval(function(){(t.options.refetchIntervalInBackground||w.m.isFocused())&&t.executeFetch()},this.currentRefetchInterval))},n.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},n.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},n.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},n.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},n.createResult=function(e,t){var n,r=this.currentQuery,s=this.options,a=this.currentResult,o=this.currentResultState,l=this.currentResultOptions,c=e!==r,u=c?e.state:this.currentQueryInitialState,d=c?this.currentResult:this.previousQueryResult,h=e.state,f=h.dataUpdatedAt,p=h.error,g=h.errorUpdatedAt,v=h.isFetching,y=h.status,x=!1,b=!1;if(t.optimisticResults){var w=this.hasListeners(),N=!w&&S(e,t),j=w&&k(e,r,t,s);(N||j)&&(v=!0,f||(y="loading"))}if(t.keepPreviousData&&!h.dataUpdateCount&&(null==d?void 0:d.isSuccess)&&"error"!==y)n=d.data,f=d.dataUpdatedAt,y=d.status,x=!0;else if(t.select&&"undefined"!==typeof h.data)if(a&&h.data===(null==o?void 0:o.data)&&t.select===this.selectFn)n=this.selectResult;else try{this.selectFn=t.select,n=t.select(h.data),!1!==t.structuralSharing&&(n=(0,m.BH)(null==a?void 0:a.data,n)),this.selectResult=n,this.selectError=null}catch(C){(0,i.t)().error(C),this.selectError=C}else n=h.data;if("undefined"!==typeof t.placeholderData&&"undefined"===typeof n&&("loading"===y||"idle"===y)){var _;if((null==a?void 0:a.isPlaceholderData)&&t.placeholderData===(null==l?void 0:l.placeholderData))_=a.data;else if(_="function"===typeof t.placeholderData?t.placeholderData():t.placeholderData,t.select&&"undefined"!==typeof _)try{_=t.select(_),!1!==t.structuralSharing&&(_=(0,m.BH)(null==a?void 0:a.data,_)),this.selectError=null}catch(C){(0,i.t)().error(C),this.selectError=C}"undefined"!==typeof _&&(y="success",n=_,b=!0)}return this.selectError&&(p=this.selectError,n=this.selectResult,g=Date.now(),y="error"),{status:y,isLoading:"loading"===y,isSuccess:"success"===y,isError:"error"===y,isIdle:"idle"===y,data:n,dataUpdatedAt:f,error:p,errorUpdatedAt:g,failureCount:h.fetchFailureCount,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:v,isRefetching:v&&"loading"!==y,isLoadingError:"error"===y&&0===h.dataUpdatedAt,isPlaceholderData:b,isPreviousData:x,isRefetchError:"error"===y&&0!==h.dataUpdatedAt,isStale:E(e,t),refetch:this.refetch,remove:this.remove}},n.shouldNotifyListeners=function(e,t){if(!t)return!0;var n=this.options,r=n.notifyOnChangeProps,s=n.notifyOnChangePropsExclusions;if(!r&&!s)return!0;if("tracked"===r&&!this.trackedProps.length)return!0;var i="tracked"===r?this.trackedProps:r;return Object.keys(e).some(function(n){var r=n,a=e[r]!==t[r],o=null==i?void 0:i.some(function(e){return e===n}),l=null==s?void 0:s.some(function(e){return e===n});return a&&!l&&(!i||o)})},n.updateResult=function(e){var t=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!(0,m.f8)(this.currentResult,t)){var n={cache:!0};!1!==(null==e?void 0:e.listeners)&&this.shouldNotifyListeners(this.currentResult,t)&&(n.listeners=!0),this.notify((0,f.A)({},n,e))}},n.updateQuery=function(){var e=this.client.getQueryCache().build(this.client,this.options);if(e!==this.currentQuery){var t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))}},n.onQueryUpdate=function(e){var t={};"success"===e.type?t.onSuccess=!0:"error"!==e.type||(0,N.wm)(e.error)||(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()},n.notify=function(e){var t=this;r.j.batch(function(){e.onSuccess?(null==t.options.onSuccess||t.options.onSuccess(t.currentResult.data),null==t.options.onSettled||t.options.onSettled(t.currentResult.data,null)):e.onError&&(null==t.options.onError||t.options.onError(t.currentResult.error),null==t.options.onSettled||t.options.onSettled(void 0,t.currentResult.error)),e.listeners&&t.listeners.forEach(function(e){e(t.currentResult)}),e.cache&&t.client.getQueryCache().notify({query:t.currentQuery,type:"observerResultsUpdated"})})},t}(v.Q);function S(e,t){return function(e,t){return!1!==t.enabled&&!e.state.dataUpdatedAt&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||e.state.dataUpdatedAt>0&&_(e,t,t.refetchOnMount)}function _(e,t,n){if(!1!==t.enabled){var r="function"===typeof n?n(e):n;return"always"===r||!1!==r&&E(e,t)}return!1}function k(e,t,n,r){return!1!==n.enabled&&(e!==t||!1===r.enabled)&&(!n.suspense||"error"!==e.state.status)&&E(e,n)}function E(e,t){return e.isStaleByTime(t.staleTime)}function C(){var e=!1;return{clearReset:function(){e=!1},reset:function(){e=!0},isReset:function(){return e}}}var T=o.createContext(C()),I=function(){return o.useContext(T)};function A(e,t,n){return function(e,t){var n=o.useRef(!1),s=o.useState(0)[1],i=d(),a=I(),l=i.defaultQueryObserverOptions(e);l.optimisticResults=!0,l.onError&&(l.onError=r.j.batchCalls(l.onError)),l.onSuccess&&(l.onSuccess=r.j.batchCalls(l.onSuccess)),l.onSettled&&(l.onSettled=r.j.batchCalls(l.onSettled)),l.suspense&&("number"!==typeof l.staleTime&&(l.staleTime=1e3),0===l.cacheTime&&(l.cacheTime=1)),(l.suspense||l.useErrorBoundary)&&(a.isReset()||(l.retryOnMount=!1));var c=o.useState(function(){return new t(i,l)})[0],u=c.getOptimisticResult(l);if(o.useEffect(function(){n.current=!0,a.clearReset();var e=c.subscribe(r.j.batchCalls(function(){n.current&&s(function(e){return e+1})}));return c.updateResult(),function(){n.current=!1,e()}},[a,c]),o.useEffect(function(){c.setOptions(l,{listeners:!1})},[l,c]),l.suspense&&u.isLoading)throw c.fetchOptimistic(l).then(function(e){var t=e.data;null==l.onSuccess||l.onSuccess(t),null==l.onSettled||l.onSettled(t,null)}).catch(function(e){a.clearReset(),null==l.onError||l.onError(e),null==l.onSettled||l.onSettled(void 0,e)});if(u.isError&&!a.isReset()&&!u.isFetching&&x(l.suspense,l.useErrorBoundary,[u.error,c.getCurrentQuery()]))throw u.error;return"tracked"===l.notifyOnChangeProps&&(u=c.trackResult(u,l)),u}((0,m.vh)(e,t,n),j)}},540:(e,t,n)=>{"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}n.d(t,{A:()=>s})},579:(e,t,n)=>{"use strict";e.exports=n(153)},646:(e,t,n)=>{"use strict";n.d(t,{E:()=>y});var r=n(168),s=n(870),i=n(540),a=n(991),o=n(75),l=n(990),c=function(){function e(e){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=e.meta,this.scheduleGc()}var t=e.prototype;return t.setOptions=function(e){var t;this.options=(0,r.A)({},this.defaultOptions,e),this.meta=null==e?void 0:e.meta,this.cacheTime=Math.max(this.cacheTime||0,null!=(t=this.options.cacheTime)?t:3e5)},t.setDefaultOptions=function(e){this.defaultOptions=e},t.scheduleGc=function(){var e=this;this.clearGcTimeout(),(0,s.gn)(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){e.optionalRemove()},this.cacheTime))},t.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},t.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},t.setData=function(e,t){var n,r,i=this.state.data,a=(0,s.Zw)(e,i);return(null==(n=(r=this.options).isDataEqual)?void 0:n.call(r,i,a))?a=i:!1!==this.options.structuralSharing&&(a=(0,s.BH)(i,a)),this.dispatch({data:a,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt}),a},t.setState=function(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})},t.cancel=function(e){var t,n=this.promise;return null==(t=this.retryer)||t.cancel(e),n?n.then(s.lQ).catch(s.lQ):Promise.resolve()},t.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},t.reset=function(){this.destroy(),this.setState(this.initialState)},t.isActive=function(){return this.observers.some(function(e){return!1!==e.options.enabled})},t.isFetching=function(){return this.state.isFetching},t.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(e){return e.getCurrentResult().isStale})},t.isStaleByTime=function(e){return void 0===e&&(e=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!(0,s.j3)(this.state.dataUpdatedAt,e)},t.onFocus=function(){var e,t=this.observers.find(function(e){return e.shouldFetchOnWindowFocus()});t&&t.refetch(),null==(e=this.retryer)||e.continue()},t.onOnline=function(){var e,t=this.observers.find(function(e){return e.shouldFetchOnReconnect()});t&&t.refetch(),null==(e=this.retryer)||e.continue()},t.addObserver=function(e){-1===this.observers.indexOf(e)&&(this.observers.push(e),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))},t.removeObserver=function(e){-1!==this.observers.indexOf(e)&&(this.observers=this.observers.filter(function(t){return t!==e}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:e}))},t.getObserversCount=function(){return this.observers.length},t.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},t.fetch=function(e,t){var n,r,i,a=this;if(this.state.isFetching)if(this.state.dataUpdatedAt&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var c;return null==(c=this.retryer)||c.continueRetry(),this.promise}if(e&&this.setOptions(e),!this.options.queryFn){var u=this.observers.find(function(e){return e.options.queryFn});u&&this.setOptions(u.options)}var d=(0,s.HN)(this.queryKey),h=(0,s.jY)(),f={queryKey:d,pageParam:void 0,meta:this.meta};Object.defineProperty(f,"signal",{enumerable:!0,get:function(){if(h)return a.abortSignalConsumed=!0,h.signal}});var m,p,g={fetchOptions:t,options:this.options,queryKey:d,state:this.state,fetchFn:function(){return a.options.queryFn?(a.abortSignalConsumed=!1,a.options.queryFn(f)):Promise.reject("Missing queryFn")},meta:this.meta};(null==(n=this.options.behavior)?void 0:n.onFetch)&&(null==(m=this.options.behavior)||m.onFetch(g));(this.revertState=this.state,this.state.isFetching&&this.state.fetchMeta===(null==(r=g.fetchOptions)?void 0:r.meta))||this.dispatch({type:"fetch",meta:null==(p=g.fetchOptions)?void 0:p.meta});return this.retryer=new l.eJ({fn:g.fetchFn,abort:null==h||null==(i=h.abort)?void 0:i.bind(h),onSuccess:function(e){a.setData(e),null==a.cache.config.onSuccess||a.cache.config.onSuccess(e,a),0===a.cacheTime&&a.optionalRemove()},onError:function(e){(0,l.wm)(e)&&e.silent||a.dispatch({type:"error",error:e}),(0,l.wm)(e)||(null==a.cache.config.onError||a.cache.config.onError(e,a),(0,o.t)().error(e)),0===a.cacheTime&&a.optionalRemove()},onFail:function(){a.dispatch({type:"failed"})},onPause:function(){a.dispatch({type:"pause"})},onContinue:function(){a.dispatch({type:"continue"})},retry:g.options.retry,retryDelay:g.options.retryDelay}),this.promise=this.retryer.promise,this.promise},t.dispatch=function(e){var t=this;this.state=this.reducer(this.state,e),a.j.batch(function(){t.observers.forEach(function(t){t.onQueryUpdate(e)}),t.cache.notify({query:t,type:"queryUpdated",action:e})})},t.getDefaultState=function(e){var t="function"===typeof e.initialData?e.initialData():e.initialData,n="undefined"!==typeof e.initialData?"function"===typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0,r="undefined"!==typeof t;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?null!=n?n:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:r?"success":"idle"}},t.reducer=function(e,t){var n,s;switch(t.type){case"failed":return(0,r.A)({},e,{fetchFailureCount:e.fetchFailureCount+1});case"pause":return(0,r.A)({},e,{isPaused:!0});case"continue":return(0,r.A)({},e,{isPaused:!1});case"fetch":return(0,r.A)({},e,{fetchFailureCount:0,fetchMeta:null!=(n=t.meta)?n:null,isFetching:!0,isPaused:!1},!e.dataUpdatedAt&&{error:null,status:"loading"});case"success":return(0,r.A)({},e,{data:t.data,dataUpdateCount:e.dataUpdateCount+1,dataUpdatedAt:null!=(s=t.dataUpdatedAt)?s:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var i=t.error;return(0,l.wm)(i)&&i.revert&&this.revertState?(0,r.A)({},this.revertState):(0,r.A)({},e,{error:i,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return(0,r.A)({},e,{isInvalidated:!0});case"setState":return(0,r.A)({},e,t.state);default:return e}},e}(),u=n(422),d=function(e){function t(t){var n;return(n=e.call(this)||this).config=t||{},n.queries=[],n.queriesMap={},n}(0,i.A)(t,e);var n=t.prototype;return n.build=function(e,t,n){var r,i=t.queryKey,a=null!=(r=t.queryHash)?r:(0,s.F$)(i,t),o=this.get(a);return o||(o=new c({cache:this,queryKey:i,queryHash:a,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(i),meta:t.meta}),this.add(o)),o},n.add=function(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"queryAdded",query:e}))},n.remove=function(e){var t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter(function(t){return t!==e}),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"queryRemoved",query:e}))},n.clear=function(){var e=this;a.j.batch(function(){e.queries.forEach(function(t){e.remove(t)})})},n.get=function(e){return this.queriesMap[e]},n.getAll=function(){return this.queries},n.find=function(e,t){var n=(0,s.b_)(e,t)[0];return"undefined"===typeof n.exact&&(n.exact=!0),this.queries.find(function(e){return(0,s.MK)(n,e)})},n.findAll=function(e,t){var n=(0,s.b_)(e,t)[0];return Object.keys(n).length>0?this.queries.filter(function(e){return(0,s.MK)(n,e)}):this.queries},n.notify=function(e){var t=this;a.j.batch(function(){t.listeners.forEach(function(t){t(e)})})},n.onFocus=function(){var e=this;a.j.batch(function(){e.queries.forEach(function(e){e.onFocus()})})},n.onOnline=function(){var e=this;a.j.batch(function(){e.queries.forEach(function(e){e.onOnline()})})},t}(u.Q),h=n(964),f=function(e){function t(t){var n;return(n=e.call(this)||this).config=t||{},n.mutations=[],n.mutationId=0,n}(0,i.A)(t,e);var n=t.prototype;return n.build=function(e,t,n){var r=new h.s({mutationCache:this,mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:n,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0,meta:t.meta});return this.add(r),r},n.add=function(e){this.mutations.push(e),this.notify(e)},n.remove=function(e){this.mutations=this.mutations.filter(function(t){return t!==e}),e.cancel(),this.notify(e)},n.clear=function(){var e=this;a.j.batch(function(){e.mutations.forEach(function(t){e.remove(t)})})},n.getAll=function(){return this.mutations},n.find=function(e){return"undefined"===typeof e.exact&&(e.exact=!0),this.mutations.find(function(t){return(0,s.nJ)(e,t)})},n.findAll=function(e){return this.mutations.filter(function(t){return(0,s.nJ)(e,t)})},n.notify=function(e){var t=this;a.j.batch(function(){t.listeners.forEach(function(t){t(e)})})},n.onFocus=function(){this.resumePausedMutations()},n.onOnline=function(){this.resumePausedMutations()},n.resumePausedMutations=function(){var e=this.mutations.filter(function(e){return e.state.isPaused});return a.j.batch(function(){return e.reduce(function(e,t){return e.then(function(){return t.continue().catch(s.lQ)})},Promise.resolve())})},t}(u.Q),m=n(244),p=n(317);function g(e,t){return null==e.getNextPageParam?void 0:e.getNextPageParam(t[t.length-1],t)}function v(e,t){return null==e.getPreviousPageParam?void 0:e.getPreviousPageParam(t[0],t)}var y=function(){function e(e){void 0===e&&(e={}),this.queryCache=e.queryCache||new d,this.mutationCache=e.mutationCache||new f,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var t=e.prototype;return t.mount=function(){var e=this;this.unsubscribeFocus=m.m.subscribe(function(){m.m.isFocused()&&p.t.isOnline()&&(e.mutationCache.onFocus(),e.queryCache.onFocus())}),this.unsubscribeOnline=p.t.subscribe(function(){m.m.isFocused()&&p.t.isOnline()&&(e.mutationCache.onOnline(),e.queryCache.onOnline())})},t.unmount=function(){var e,t;null==(e=this.unsubscribeFocus)||e.call(this),null==(t=this.unsubscribeOnline)||t.call(this)},t.isFetching=function(e,t){var n=(0,s.b_)(e,t)[0];return n.fetching=!0,this.queryCache.findAll(n).length},t.isMutating=function(e){return this.mutationCache.findAll((0,r.A)({},e,{fetching:!0})).length},t.getQueryData=function(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state.data},t.getQueriesData=function(e){return this.getQueryCache().findAll(e).map(function(e){return[e.queryKey,e.state.data]})},t.setQueryData=function(e,t,n){var r=(0,s.vh)(e),i=this.defaultQueryOptions(r);return this.queryCache.build(this,i).setData(t,n)},t.setQueriesData=function(e,t,n){var r=this;return a.j.batch(function(){return r.getQueryCache().findAll(e).map(function(e){var s=e.queryKey;return[s,r.setQueryData(s,t,n)]})})},t.getQueryState=function(e,t){var n;return null==(n=this.queryCache.find(e,t))?void 0:n.state},t.removeQueries=function(e,t){var n=(0,s.b_)(e,t)[0],r=this.queryCache;a.j.batch(function(){r.findAll(n).forEach(function(e){r.remove(e)})})},t.resetQueries=function(e,t,n){var i=this,o=(0,s.b_)(e,t,n),l=o[0],c=o[1],u=this.queryCache,d=(0,r.A)({},l,{active:!0});return a.j.batch(function(){return u.findAll(l).forEach(function(e){e.reset()}),i.refetchQueries(d,c)})},t.cancelQueries=function(e,t,n){var r=this,i=(0,s.b_)(e,t,n),o=i[0],l=i[1],c=void 0===l?{}:l;"undefined"===typeof c.revert&&(c.revert=!0);var u=a.j.batch(function(){return r.queryCache.findAll(o).map(function(e){return e.cancel(c)})});return Promise.all(u).then(s.lQ).catch(s.lQ)},t.invalidateQueries=function(e,t,n){var i,o,l,c=this,u=(0,s.b_)(e,t,n),d=u[0],h=u[1],f=(0,r.A)({},d,{active:null==(i=null!=(o=d.refetchActive)?o:d.active)||i,inactive:null!=(l=d.refetchInactive)&&l});return a.j.batch(function(){return c.queryCache.findAll(d).forEach(function(e){e.invalidate()}),c.refetchQueries(f,h)})},t.refetchQueries=function(e,t,n){var i=this,o=(0,s.b_)(e,t,n),l=o[0],c=o[1],u=a.j.batch(function(){return i.queryCache.findAll(l).map(function(e){return e.fetch(void 0,(0,r.A)({},c,{meta:{refetchPage:null==l?void 0:l.refetchPage}}))})}),d=Promise.all(u).then(s.lQ);return(null==c?void 0:c.throwOnError)||(d=d.catch(s.lQ)),d},t.fetchQuery=function(e,t,n){var r=(0,s.vh)(e,t,n),i=this.defaultQueryOptions(r);"undefined"===typeof i.retry&&(i.retry=!1);var a=this.queryCache.build(this,i);return a.isStaleByTime(i.staleTime)?a.fetch(i):Promise.resolve(a.state.data)},t.prefetchQuery=function(e,t,n){return this.fetchQuery(e,t,n).then(s.lQ).catch(s.lQ)},t.fetchInfiniteQuery=function(e,t,n){var r=(0,s.vh)(e,t,n);return r.behavior={onFetch:function(e){e.fetchFn=function(){var t,n,r,i,a,o,c,u=null==(t=e.fetchOptions)||null==(n=t.meta)?void 0:n.refetchPage,d=null==(r=e.fetchOptions)||null==(i=r.meta)?void 0:i.fetchMore,h=null==d?void 0:d.pageParam,f="forward"===(null==d?void 0:d.direction),m="backward"===(null==d?void 0:d.direction),p=(null==(a=e.state.data)?void 0:a.pages)||[],y=(null==(o=e.state.data)?void 0:o.pageParams)||[],x=(0,s.jY)(),b=null==x?void 0:x.signal,w=y,N=!1,j=e.options.queryFn||function(){return Promise.reject("Missing queryFn")},S=function(e,t,n,r){return w=r?[t].concat(w):[].concat(w,[t]),r?[n].concat(e):[].concat(e,[n])},_=function(t,n,r,s){if(N)return Promise.reject("Cancelled");if("undefined"===typeof r&&!n&&t.length)return Promise.resolve(t);var i={queryKey:e.queryKey,signal:b,pageParam:r,meta:e.meta},a=j(i),o=Promise.resolve(a).then(function(e){return S(t,r,e,s)});return(0,l.dd)(a)&&(o.cancel=a.cancel),o};if(p.length)if(f){var k="undefined"!==typeof h,E=k?h:g(e.options,p);c=_(p,k,E)}else if(m){var C="undefined"!==typeof h,T=C?h:v(e.options,p);c=_(p,C,T,!0)}else!function(){w=[];var t="undefined"===typeof e.options.getNextPageParam,n=!u||!p[0]||u(p[0],0,p);c=n?_([],t,y[0]):Promise.resolve(S([],y[0],p[0]));for(var r=function(n){c=c.then(function(r){if(!u||!p[n]||u(p[n],n,p)){var s=t?y[n]:g(e.options,r);return _(r,t,s)}return Promise.resolve(S(r,y[n],p[n]))})},s=1;s<p.length;s++)r(s)}();else c=_([]);var I=c.then(function(e){return{pages:e,pageParams:w}});return I.cancel=function(){N=!0,null==x||x.abort(),(0,l.dd)(c)&&c.cancel()},I}}},this.fetchQuery(r)},t.prefetchInfiniteQuery=function(e,t,n){return this.fetchInfiniteQuery(e,t,n).then(s.lQ).catch(s.lQ)},t.cancelMutations=function(){var e=this,t=a.j.batch(function(){return e.mutationCache.getAll().map(function(e){return e.cancel()})});return Promise.all(t).then(s.lQ).catch(s.lQ)},t.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},t.executeMutation=function(e){return this.mutationCache.build(this,e).execute()},t.getQueryCache=function(){return this.queryCache},t.getMutationCache=function(){return this.mutationCache},t.getDefaultOptions=function(){return this.defaultOptions},t.setDefaultOptions=function(e){this.defaultOptions=e},t.setQueryDefaults=function(e,t){var n=this.queryDefaults.find(function(t){return(0,s.Od)(e)===(0,s.Od)(t.queryKey)});n?n.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})},t.getQueryDefaults=function(e){var t;return e?null==(t=this.queryDefaults.find(function(t){return(0,s.Cp)(e,t.queryKey)}))?void 0:t.defaultOptions:void 0},t.setMutationDefaults=function(e,t){var n=this.mutationDefaults.find(function(t){return(0,s.Od)(e)===(0,s.Od)(t.mutationKey)});n?n.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})},t.getMutationDefaults=function(e){var t;return e?null==(t=this.mutationDefaults.find(function(t){return(0,s.Cp)(e,t.mutationKey)}))?void 0:t.defaultOptions:void 0},t.defaultQueryOptions=function(e){if(null==e?void 0:e._defaulted)return e;var t=(0,r.A)({},this.defaultOptions.queries,this.getQueryDefaults(null==e?void 0:e.queryKey),e,{_defaulted:!0});return!t.queryHash&&t.queryKey&&(t.queryHash=(0,s.F$)(t.queryKey,t)),t},t.defaultQueryObserverOptions=function(e){return this.defaultQueryOptions(e)},t.defaultMutationOptions=function(e){return(null==e?void 0:e._defaulted)?e:(0,r.A)({},this.defaultOptions.mutations,this.getMutationDefaults(null==e?void 0:e.mutationKey),e,{_defaulted:!0})},t.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},e}()},730:(e,t,n)=>{"use strict";var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function p(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function x(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!d.call(m,e)||!d.call(f,e)&&(h.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),N=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case j:return"Fragment";case N:return"Portal";case _:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function J(e,t){Y(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ie(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(fe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,je=null,Se=null;function _e(e){if(e=xs(e)){if("function"!==typeof Ne)throw Error(i(280));var t=e.stateNode;t&&(t=ws(t),Ne(e.stateNode,e.type,t))}}function ke(e){je?Se?Se.push(e):Se=[e]:je=e}function Ee(){if(je){var e=je,t=Se;if(Se=je=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ce(e,t){return e(t)}function Te(){}var Ie=!1;function Ae(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Ce(e,t,n)}finally{Ie=!1,(null!==je||null!==Se)&&(Te(),Ee())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=ws(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var De=!1;if(u)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ue){De=!1}function Oe(e,t,n,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){Le=!0,Me=e}};function ze(e,t,n,r,s,i,a,o,l){Le=!1,Me=null,Oe.apply(Ve,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Qe(e){if(qe(e)!==e)throw Error(i(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Qe(s),e;if(a===r)return Qe(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ke=s.unstable_scheduleCallback,Ge=s.unstable_cancelCallback,Xe=s.unstable_shouldYield,$e=s.unstable_requestPaint,Ye=s.unstable_now,Je=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=dt(o):0!==(i&=a)&&(r=dt(i))}else 0!==(a=n&~s)?r=dt(a):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-at(t)),r|=e[n],t&=~s;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,Nt,jt,St,_t,kt=!1,Et=[],Ct=null,Tt=null,It=null,At=new Map,Rt=new Map,Dt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Lt(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=xs(t))&&Nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Mt(e){var t=ys(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void _t(e.priority,function(){jt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xs(n))&&Nt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){kt=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==Tt&&Ft(Tt)&&(Tt=null),null!==It&&Ft(It)&&(It=null),At.forEach(Ut),Rt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Vt)))}function qt(e){function t(t){return zt(t,e)}if(0<Et.length){zt(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==Tt&&zt(Tt,e),null!==It&&zt(It,e),At.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Dt.shift()}var Bt=b.ReactCurrentBatchConfig,Qt=!0;function Ht(e,t,n,r){var s=xt,i=Bt.transition;Bt.transition=null;try{xt=1,Kt(e,t,n,r)}finally{xt=s,Bt.transition=i}}function Wt(e,t,n,r){var s=xt,i=Bt.transition;Bt.transition=null;try{xt=4,Kt(e,t,n,r)}finally{xt=s,Bt.transition=i}}function Kt(e,t,n,r){if(Qt){var s=Xt(e,t,n,r);if(null===s)Qr(e,t,r,Gt,n),Ot(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,s),!0;case"dragenter":return Tt=Lt(Tt,e,t,n,r,s),!0;case"mouseover":return It=Lt(It,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return At.set(i,Lt(At.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Rt.set(i,Lt(Rt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==s;){var i=xs(s);if(null!==i&&wt(i),null===(i=Xt(e,t,n,r))&&Qr(e,t,r,Gt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Qr(e,t,r,null,n)}}var Gt=null;function Xt(e,t,n,r){if(Gt=null,null!==(e=ys(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,s="value"in Yt?Yt.value:Yt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=M({},cn,{view:0,detail:0}),hn=sn(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),mn=sn(fn),pn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},dn,{relatedTarget:0})),vn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(yn),bn=sn(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=jn[e])&&!!t[e]}function _n(){return Sn}var kn=M({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Nn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=sn(kn),Cn=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=sn(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),In=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(An),Dn=[9,13,27,32],Pn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Ln=u&&"TextEvent"in window&&!On,Mn=u&&(!Pn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Hn(e,t,n,r){ke(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Kn=null;function Gn(e){Fr(e,0)}function Xn(e){if(K(bs(e)))return e}function $n(e,t){if("change"===e)return t}var Yn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Yn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Kn=Wn=null)}function nr(e){if("value"===e.propertyName&&Xn(Kn)){var t=[];Hn(t,Kn,e,we(e)),Ae(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Kn)}function ir(e,t){if("click"===e)return Xn(t)}function ar(e,t){if("input"===e||"change"===e)return Xn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!d.call(t,s)||!or(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=ur(n,i);var a=ur(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,xr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Wr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Nr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},jr={},Sr={};function _r(e){if(jr[e])return jr[e];if(!Nr[e])return e;var t,n=Nr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return jr[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);var kr=_r("animationend"),Er=_r("animationiteration"),Cr=_r("animationstart"),Tr=_r("transitionend"),Ir=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ir.set(e,t),l(t,[e])}for(var Dr=0;Dr<Ar.length;Dr++){var Pr=Ar[Dr];Rr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Rr(kr,"onAnimationEnd"),Rr(Er,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(i(198));var u=Me;Le=!1,Me=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Mr(s,o,c),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Mr(s,o,c),i=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[ps];void 0===n&&(n=t[ps]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[zr]){e[zr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function Br(e,t,n,r){switch($t(t)){case 1:var s=Ht;break;case 4:s=Wt;break;default:s=Kt}n=s.bind(null,t,n,e),s=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Qr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=ys(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}Ae(function(){var r=i,s=we(n),a=[];e:{var o=Ir.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=En;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case kr:case Er:case Cr:l=vn;break;case Tr:l=In;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,m=r;null!==m;){var p=(f=m).stateNode;if(5===f.tag&&null!==p&&(f=p,null!==h&&(null!=(p=Re(m,h))&&u.push(Hr(m,p,f)))),d)break;m=m.return}0<u.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!ys(c)&&!c[ms])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ys(c):null)&&(c!==(d=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=mn,p="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,p="onPointerLeave",h="onPointerEnter",m="pointer"),d=null==l?o:bs(l),f=null==c?o:bs(c),(o=new u(p,m+"leave",l,n,s)).target=d,o.relatedTarget=f,p=null,ys(s)===r&&((u=new u(h,m+"enter",c,n,s)).target=f,u.relatedTarget=d,p=u),d=p,l&&c)e:{for(h=c,m=0,f=u=l;f;f=Kr(f))m++;for(f=0,p=h;p;p=Kr(p))f++;for(;0<m-f;)u=Kr(u),m--;for(;0<f-m;)h=Kr(h),f--;for(;m--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Gr(a,o,l,u,!1),null!==c&&null!==d&&Gr(a,d,c,u,!0)}if("select"===(l=(o=r?bs(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=$n;else if(Qn(o))if(Yn)g=ar;else{g=sr;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ir);switch(g&&(g=g(e,r))?Hn(a,g,n,s):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?bs(r):window,e){case"focusin":(Qn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,br(a,n,s);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":br(a,n,s)}var y;if(Pn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else qn?Vn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Mn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==x?"onCompositionEnd"===x&&qn&&(y=en()):(Jt="value"in(Yt=s)?Yt.value:Yt.textContent,qn=!0)),0<(v=Wr(r,x)).length&&(x=new bn(x,e,null,n,s),a.push({event:x,listeners:v}),y?x.data=y:null!==(y=zn(n))&&(x.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Pn&&Vn(e,t)?(e=en(),Zt=Jt=Yt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(s=new bn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=y))}Fr(a,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=Re(e,n))&&r.unshift(Hr(e,i,s)),null!=(i=Re(e,t))&&r.push(Hr(e,i,s))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=Re(n,i))&&a.unshift(Hr(n,l,o)):s||null!=(l=Re(n,i))&&a.push(Hr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Xr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(i(425))}function Zr(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,is="function"===typeof Promise?Promise:void 0,as="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof is?function(e){return is.resolve(null).then(e).catch(os)}:rs;function os(e){setTimeout(function(){throw e})}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);qt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function us(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ds=Math.random().toString(36).slice(2),hs="__reactFiber$"+ds,fs="__reactProps$"+ds,ms="__reactContainer$"+ds,ps="__reactEvents$"+ds,gs="__reactListeners$"+ds,vs="__reactHandles$"+ds;function ys(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ms]||n[hs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=us(e);null!==e;){if(n=e[hs])return n;e=us(e)}return t}n=(e=n).parentNode}return null}function xs(e){return!(e=e[hs]||e[ms])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ws(e){return e[fs]||null}var Ns=[],js=-1;function Ss(e){return{current:e}}function _s(e){0>js||(e.current=Ns[js],Ns[js]=null,js--)}function ks(e,t){js++,Ns[js]=e.current,e.current=t}var Es={},Cs=Ss(Es),Ts=Ss(!1),Is=Es;function As(e,t){var n=e.type.contextTypes;if(!n)return Es;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Rs(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ds(){_s(Ts),_s(Cs)}function Ps(e,t,n){if(Cs.current!==Es)throw Error(i(168));ks(Cs,t),ks(Ts,n)}function Os(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,B(e)||"Unknown",s));return M({},n,r)}function Ls(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Es,Is=Cs.current,ks(Cs,e),ks(Ts,Ts.current),!0}function Ms(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Os(e,t,Is),r.__reactInternalMemoizedMergedChildContext=e,_s(Ts),_s(Cs),ks(Cs,e)):_s(Ts),ks(Ts,n)}var Fs=null,Us=!1,Vs=!1;function zs(e){null===Fs?Fs=[e]:Fs.push(e)}function qs(){if(!Vs&&null!==Fs){Vs=!0;var e=0,t=xt;try{var n=Fs;for(xt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fs=null,Us=!1}catch(s){throw null!==Fs&&(Fs=Fs.slice(e+1)),Ke(Ze,qs),s}finally{xt=t,Vs=!1}}return null}var Bs=[],Qs=0,Hs=null,Ws=0,Ks=[],Gs=0,Xs=null,$s=1,Ys="";function Js(e,t){Bs[Qs++]=Ws,Bs[Qs++]=Hs,Hs=e,Ws=t}function Zs(e,t,n){Ks[Gs++]=$s,Ks[Gs++]=Ys,Ks[Gs++]=Xs,Xs=e;var r=$s;e=Ys;var s=32-at(r)-1;r&=~(1<<s),n+=1;var i=32-at(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,$s=1<<32-at(t)+s|n<<s|r,Ys=i+e}else $s=1<<i|n<<s|r,Ys=e}function ei(e){null!==e.return&&(Js(e,1),Zs(e,1,0))}function ti(e){for(;e===Hs;)Hs=Bs[--Qs],Bs[Qs]=null,Ws=Bs[--Qs],Bs[Qs]=null;for(;e===Xs;)Xs=Ks[--Gs],Ks[Gs]=null,Ys=Ks[--Gs],Ks[Gs]=null,$s=Ks[--Gs],Ks[Gs]=null}var ni=null,ri=null,si=!1,ii=null;function ai(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xs?{id:$s,overflow:Ys}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(si){var t=ri;if(t){var n=t;if(!oi(e,t)){if(li(e))throw Error(i(418));t=cs(n.nextSibling);var r=ni;t&&oi(e,t)?ai(r,n):(e.flags=-4097&e.flags|2,si=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,si=!1,ni=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function di(e){if(e!==ni)return!1;if(!si)return ui(e),si=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw hi(),Error(i(418));for(;t;)ai(e,t),t=cs(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?cs(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ri;e;)e=cs(e.nextSibling)}function fi(){ri=ni=null,si=!1}function mi(e){null===ii?ii=[e]:ii.push(e)}var pi=b.ReactCurrentBatchConfig;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function vi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yi(e){return(0,e._init)(e._payload)}function xi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===j?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===R&&yi(i)===t.type)?((r=s(t,n.props)).ref=gi(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=gi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case N:return(t=Fc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Oc(t,e.mode,n,null)).return=e,t;vi(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===s?c(e,t,n,r):null;case N:return n.key===s?u(e,t,n,r):null;case R:return f(e,t,(s=n._init)(n._payload),r)}if(te(n)||O(n))return null!==s?null:d(e,t,n,r,null);vi(e,n)}return null}function m(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case N:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case R:return m(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,s,null);vi(t,r)}return null}function p(s,i,o,l){for(var c=null,u=null,d=i,p=i=0,g=null;null!==d&&p<o.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var v=f(s,d,o[p],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(s,d),i=a(v,i,p),null===u?c=v:u.sibling=v,u=v,d=g}if(p===o.length)return n(s,d),si&&Js(s,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(s,o[p],l))&&(i=a(d,i,p),null===u?c=d:u.sibling=d,u=d);return si&&Js(s,p),c}for(d=r(s,d);p<o.length;p++)null!==(g=m(d,s,p,o[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),i=a(g,i,p),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(s,e)}),si&&Js(s,p),c}function g(s,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,p=o,g=o=0,v=null,y=l.next();null!==p&&!y.done;g++,y=l.next()){p.index>g?(v=p,p=null):v=p.sibling;var x=f(s,p,y.value,c);if(null===x){null===p&&(p=v);break}e&&p&&null===x.alternate&&t(s,p),o=a(x,o,g),null===d?u=x:d.sibling=x,d=x,p=v}if(y.done)return n(s,p),si&&Js(s,g),u;if(null===p){for(;!y.done;g++,y=l.next())null!==(y=h(s,y.value,c))&&(o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return si&&Js(s,g),u}for(p=r(s,p);!y.done;g++,y=l.next())null!==(y=m(p,s,g,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?g:y.key),o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&p.forEach(function(e){return t(s,e)}),si&&Js(s,g),u}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===j&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===j){if(7===u.tag){n(r,u.sibling),(i=s(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&yi(c)===u.type){n(r,u.sibling),(i=s(u,a.props)).ref=gi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===j?((i=Oc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Pc(a.type,a.key,a.props,null,r.mode,l)).ref=gi(r,i,a),l.return=r,r=l)}return o(r);case N:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Fc(a,r.mode,l)).return=r,r=i}return o(r);case R:return e(r,i,(u=a._init)(a._payload),l)}if(te(a))return p(r,i,a,l);if(O(a))return g(r,i,a,l);vi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Mc(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var bi=xi(!0),wi=xi(!1),Ni=Ss(null),ji=null,Si=null,_i=null;function ki(){_i=Si=ji=null}function Ei(e){var t=Ni.current;_s(Ni),e._currentValue=t}function Ci(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ti(e,t){ji=e,_i=Si=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function Ii(e){var t=e._currentValue;if(_i!==e)if(e={context:e,memoizedValue:t,next:null},null===Si){if(null===ji)throw Error(i(308));Si=e,ji.dependencies={lanes:0,firstContext:e}}else Si=Si.next=e;return t}var Ai=null;function Ri(e){null===Ai?Ai=[e]:Ai.push(e)}function Di(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Ri(t)):(n.next=s.next,s.next=n),t.interleaved=n,Pi(e,r)}function Pi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Oi=!1;function Li(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ui(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Pi(e,n)}return null===(s=r.interleaved)?(t.next=t,Ri(r)):(t.next=s.next,s.next=t),r.interleaved=t,Pi(e,n)}function Vi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function zi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qi(e,t,n,r){var s=e.updateQueue;Oi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,p=o;switch(h=t,f=n,p.tag){case 1:if("function"===typeof(m=p.payload)){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=p.payload)?m.call(f,d,h):m)||void 0===h)break e;d=M({},d,h);break e;case 2:Oi=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Ll|=a,e.lanes=a,e.memoizedState=d}}function Bi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var Qi={},Hi=Ss(Qi),Wi=Ss(Qi),Ki=Ss(Qi);function Gi(e){if(e===Qi)throw Error(i(174));return e}function Xi(e,t){switch(ks(Ki,t),ks(Wi,e),ks(Hi,Qi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_s(Hi),ks(Hi,t)}function $i(){_s(Hi),_s(Wi),_s(Ki)}function Yi(e){Gi(Ki.current);var t=Gi(Hi.current),n=le(t,e.type);t!==n&&(ks(Wi,e),ks(Hi,n))}function Ji(e){Wi.current===e&&(_s(Hi),_s(Wi))}var Zi=Ss(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=b.ReactCurrentDispatcher,sa=b.ReactCurrentBatchConfig,ia=0,aa=null,oa=null,la=null,ca=!1,ua=!1,da=0,ha=0;function fa(){throw Error(i(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function pa(e,t,n,r,s,a){if(ia=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Ja:Za,e=n(r,s),ua){a=0;do{if(ua=!1,da=0,25<=a)throw Error(i(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,s)}while(ua)}if(ra.current=Ya,t=null!==oa&&null!==oa.next,ia=0,la=oa=aa=null,ca=!1,t)throw Error(i(300));return e}function ga(){var e=0!==da;return da=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ya(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(i(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function xa(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=ya(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=oa,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((ia&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,aa.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(xo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,aa.lanes|=a,Ll|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=ya(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);or(a,t.memoizedState)||(xo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Na(){}function ja(e,t){var n=aa,r=ya(),s=t(),a=!or(r.memoizedState,s);if(a&&(r.memoizedState=s,xo=!0),r=r.queue,Oa(ka.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Ia(9,_a.bind(null,n,r,s,t),void 0,null),null===Tl)throw Error(i(349));0!==(30&ia)||Sa(n,t,s)}return s}function Sa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _a(e,t,n,r){t.value=n,t.getSnapshot=r,Ea(t)&&Ca(e)}function ka(e,t,n){return n(function(){Ea(t)&&Ca(e)})}function Ea(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ca(e){var t=Pi(e,1);null!==t&&nc(t,e,1,-1)}function Ta(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[t.memoizedState,e]}function Ia(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Aa(){return ya().memoizedState}function Ra(e,t,n,r){var s=va();aa.flags|=e,s.memoizedState=Ia(1|t,n,void 0,void 0===r?null:r)}function Da(e,t,n,r){var s=ya();r=void 0===r?null:r;var i=void 0;if(null!==oa){var a=oa.memoizedState;if(i=a.destroy,null!==r&&ma(r,a.deps))return void(s.memoizedState=Ia(t,n,i,r))}aa.flags|=e,s.memoizedState=Ia(1|t,n,i,r)}function Pa(e,t){return Ra(8390656,8,e,t)}function Oa(e,t){return Da(2048,8,e,t)}function La(e,t){return Da(4,2,e,t)}function Ma(e,t){return Da(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4,4,Fa.bind(null,t,e),n)}function Va(){}function za(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qa(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ba(e,t,n){return 0===(21&ia)?(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=n):(or(n,t)||(n=pt(),aa.lanes|=n,Ll|=n,e.baseState=!0),t)}function Qa(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=sa.transition;sa.transition={};try{e(!1),t()}finally{xt=n,sa.transition=r}}function Ha(){return ya().memoizedState}function Wa(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ga(e))Xa(t,n);else if(null!==(n=Di(e,t,n,r))){nc(n,e,r,ec()),$a(n,t,r)}}function Ka(e,t,n){var r=tc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ga(e))Xa(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(s.next=s,Ri(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Di(e,t,s,r))&&(nc(n,e,r,s=ec()),$a(n,t,r))}}function Ga(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Xa(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $a(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Ya={readContext:Ii,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Ja={readContext:Ii,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Ii,useEffect:Pa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ra(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ra(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ra(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wa.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Ta,useDebugValue:Va,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Ta(!1),t=e[0];return e=Qa.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,s=va();if(si){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Tl)throw Error(i(349));0!==(30&ia)||Sa(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Pa(ka.bind(null,r,a,e),[e]),r.flags|=2048,Ia(9,_a.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Tl.identifierPrefix;if(si){var n=Ys;t=":"+t+"R"+(n=($s&~(1<<32-at($s)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Ii,useCallback:za,useContext:Ii,useEffect:Oa,useImperativeHandle:Ua,useInsertionEffect:La,useLayoutEffect:Ma,useMemo:qa,useReducer:ba,useRef:Aa,useState:function(){return ba(xa)},useDebugValue:Va,useDeferredValue:function(e){return Ba(ya(),oa.memoizedState,e)},useTransition:function(){return[ba(xa)[0],ya().memoizedState]},useMutableSource:Na,useSyncExternalStore:ja,useId:Ha,unstable_isNewReconciler:!1},eo={readContext:Ii,useCallback:za,useContext:Ii,useEffect:Oa,useImperativeHandle:Ua,useInsertionEffect:La,useLayoutEffect:Ma,useMemo:qa,useReducer:wa,useRef:Aa,useState:function(){return wa(xa)},useDebugValue:Va,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:Ba(t,oa.memoizedState,e)},useTransition:function(){return[wa(xa)[0],ya().memoizedState]},useMutableSource:Na,useSyncExternalStore:ja,useId:Ha,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=Fi(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,s))&&(nc(t,e,s,r),Vi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=Fi(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,s))&&(nc(t,e,s,r),Vi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),s=Fi(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Ui(e,s,r))&&(nc(t,e,r,n),Vi(t,e,r))}};function so(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,i))}function io(e,t,n){var r=!1,s=Es,i=t.contextType;return"object"===typeof i&&null!==i?i=Ii(i):(s=Rs(t)?Is:Cs.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?As(e,s):Es),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Li(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=Ii(i):(i=Rs(t)?Is:Cs.current,s.context=As(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(no(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&ro.enqueueReplaceState(s,s.state,null),qi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Fi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ql||(Ql=!0,Hl=r),uo(0,t)},n}function mo(e,t,n){(n=Fi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){uo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function po(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=_c.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fi(-1,1)).tag=2,Ui(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var yo=b.ReactCurrentOwner,xo=!1;function bo(e,t,n,r){t.child=null===e?wi(t,null,n,r):bi(t,e.child,n,r)}function wo(e,t,n,r,s){n=n.render;var i=t.ref;return Ti(t,s),r=pa(e,t,n,r,i,s),n=ga(),null===e||xo?(si&&n&&ei(t),t.flags|=1,bo(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Qo(e,t,s))}function No(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Rc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,jo(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Qo(e,t,s)}return t.flags|=1,(e=Dc(i,r)).ref=t.ref,e.return=t,t.child=e}function jo(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(xo=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Qo(e,t,s);0!==(131072&e.flags)&&(xo=!0)}}return ko(e,t,n,r,s)}function So(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ks(Dl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ks(Dl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,ks(Dl,Rl),Rl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,ks(Dl,Rl),Rl|=r;return bo(e,t,s,n),t.child}function _o(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ko(e,t,n,r,s){var i=Rs(n)?Is:Cs.current;return i=As(t,i),Ti(t,s),n=pa(e,t,n,r,i,s),r=ga(),null===e||xo?(si&&r&&ei(t),t.flags|=1,bo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Qo(e,t,s))}function Eo(e,t,n,r,s){if(Rs(n)){var i=!0;Ls(t)}else i=!1;if(Ti(t,s),null===t.stateNode)Bo(e,t),io(t,n,r),oo(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ii(c):c=As(t,c=Rs(n)?Is:Cs.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Oi=!1;var h=t.memoizedState;a.state=h,qi(t,r,a,s),l=t.memoizedState,o!==r||h!==l||Ts.current||Oi?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Oi||so(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Mi(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ii(l):l=As(t,l=Rs(n)?Is:Cs.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ao(t,a,r,l),Oi=!1,h=t.memoizedState,a.state=h,qi(t,r,a,s);var m=t.memoizedState;o!==d||h!==m||Ts.current||Oi?("function"===typeof f&&(no(t,n,f,r),m=t.memoizedState),(c=Oi||so(t,n,c,r,h,m,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,m,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Co(e,t,n,r,i,s)}function Co(e,t,n,r,s,i){_o(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Ms(t,n,!1),Qo(e,t,i);r=t.stateNode,yo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=bi(t,e.child,null,i),t.child=bi(t,null,o,i)):bo(e,t,o,i),t.memoizedState=r.state,s&&Ms(t,n,!0),t.child}function To(e){var t=e.stateNode;t.pendingContext?Ps(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ps(0,t.context,!1),Xi(e,t.containerInfo)}function Io(e,t,n,r,s){return fi(),mi(s),t.flags|=256,bo(e,t,n,r),t.child}var Ao,Ro,Do,Po,Oo={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mo(e,t,n){var r,s=t.pendingProps,a=Zi.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),ks(Zi,1&a),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,s,0,null),e=Oc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Oo,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,Uo(e,t,o,r=co(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Lc({mode:"visible",children:r.children},s,0,null),(a=Oc(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&bi(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Oo,a);if(0===(1&t.mode))return Uo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Uo(e,t,o,r=co(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(r=Tl)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Pi(e,s),nc(r,e,s,-1))}return pc(),Uo(e,t,o,r=co(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ri=cs(s.nextSibling),ni=t,si=!0,ii=null,null!==e&&(Ks[Gs++]=$s,Ks[Gs++]=Ys,Ks[Gs++]=Xs,$s=e.id,Ys=e.overflow,Xs=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Dc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Dc(r,o):(o=Oc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Oo,s}return e=(o=e.child).sibling,s=Dc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Fo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uo(e,t,n,r){return null!==r&&mi(r),bi(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ci(e.return,t,n)}function zo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function qo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(bo(e,t,r.children,n),0!==(2&(r=Zi.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vo(e,n,t);else if(19===e.tag)Vo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ks(Zi,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),zo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ea(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}zo(t,!0,n,null,i);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ho(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ko(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(t),null;case 1:case 17:return Rs(t.type)&&Ds(),Wo(t),null;case 3:return r=t.stateNode,$i(),_s(Ts),_s(Cs),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(ac(ii),ii=null))),Ro(e,t),Wo(t),null;case 5:Ji(t);var s=Gi(Ki.current);if(n=t.type,null!==e&&null!=t.stateNode)Do(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Wo(t),null}if(e=Gi(Hi.current),di(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hs]=t,r[fs]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(s=0;s<Or.length;s++)Ur(Or[s],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":$(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":se(r,a),Ur("invalid",r)}for(var l in ye(n,a),s=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":W(r),Z(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hs]=t,e[fs]=r,Ao(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),s=r;break;case"iframe":case"object":case"embed":Ur("load",e),s=r;break;case"video":case"audio":for(s=0;s<Or.length;s++)Ur(Or[s],e);s=r;break;case"source":Ur("error",e),s=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),s=r;break;case"details":Ur("toggle",e),s=r;break;case"input":$(e,r),s=X(e,r),Ur("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Ur("invalid",e)}for(a in ye(n,s),c=s)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&x(e,a,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wo(t),null;case 6:if(e&&null!=t.stateNode)Po(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Gi(Ki.current),Gi(Hi.current),di(t)){if(r=t.stateNode,n=t.memoizedProps,r[hs]=t,(a=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hs]=t,t.stateNode=r}return Wo(t),null;case 13:if(_s(Zi),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(si&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))hi(),fi(),t.flags|=98560,a=!1;else if(a=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[hs]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wo(t),a=!1}else null!==ii&&(ac(ii),ii=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zi.current)?0===Pl&&(Pl=3):pc())),null!==t.updateQueue&&(t.flags|=4),Wo(t),null);case 4:return $i(),Ro(e,t),null===e&&qr(t.stateNode.containerInfo),Wo(t),null;case 10:return Ei(t.type._context),Wo(t),null;case 19:if(_s(Zi),null===(a=t.memoizedState))return Wo(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Ho(a,!1);else{if(0!==Pl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Ho(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ks(Zi,1&Zi.current|2),t.child}e=e.sibling}null!==a.tail&&Ye()>ql&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ho(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!si)return Wo(t),null}else 2*Ye()-a.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ye(),t.sibling=null,n=Zi.current,ks(Zi,r?1&n|2:1&n),t):(Wo(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Wo(t),6&t.subtreeFlags&&(t.flags|=8192)):Wo(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Go(e,t){switch(ti(t),t.tag){case 1:return Rs(t.type)&&Ds(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $i(),_s(Ts),_s(Cs),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ji(t),null;case 13:if(_s(Zi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _s(Zi),null;case 4:return $i(),null;case 10:return Ei(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ao=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ro=function(){},Do=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Gi(Hi.current);var i,a=null;switch(n){case"input":s=X(e,s),r=X(e,r),a=[];break;case"select":s=M({},s,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Po=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xo=!1,$o=!1,Yo="function"===typeof WeakSet?WeakSet:Set,Jo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&el(t,n,i)}s=s.next}while(s!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[fs],delete t[ps],delete t[gs],delete t[vs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:$o||Zo(n,t);case 6:var r=ul,s=dl;ul=null,hl(e,t,n),dl=s,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),qt(e)):ls(ul,n.stateNode));break;case 4:r=ul,s=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=s;break;case 0:case 11:case 14:case 15:if(!$o&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&el(n,t,a),s=s.next}while(s!==r)}hl(e,t,n);break;case 1:if(!$o&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Sc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?($o=(r=$o)||null!==n.memoizedState,hl(e,t,n),$o=r):hl(e,t,n);break;default:hl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Yo),t.forEach(function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(i(160));fl(a,o,s),ul=null,dl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(u){Sc(s,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Sc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:pl(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(pl(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(g){Sc(e,e.return,g)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Y(s,a),xe(l,o);var u=xe(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(s,h):"dangerouslySetInnerHTML"===d?de(s,h):"children"===d?he(s,h):x(s,d,h,u)}switch(l){case"input":J(s,a);break;case"textarea":ie(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var m=a.value;null!=m?ne(s,!!a.multiple,m,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[fs]=a}catch(g){Sc(e,e.return,g)}}break;case 6:if(pl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){Sc(e,e.return,g)}}break;case 3:if(pl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:pl(t,e),vl(e);break;case 13:pl(t,e),vl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(zl=Ye())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?($o=(u=$o)||d,pl(t,e),$o=u):pl(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Jo=e,d=e.child;null!==d;){for(h=Jo=d;null!==Jo;){switch(m=(f=Jo).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zo(f,f.return);var p=f.stateNode;if("function"===typeof p.componentWillUnmount){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Sc(r,n,g)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==m?(m.return=f,Jo=m):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,u?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(g){Sc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(he(s,""),r.flags&=-33),cl(e,ol(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(i(161))}}catch(o){Sc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Jo=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==Jo;){var s=Jo,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||Xo;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||$o;o=Xo;var c=$o;if(Xo=a,($o=l)&&!c)for(Jo=s;null!==Jo;)l=(a=Jo).child,22===a.tag&&null!==a.memoizedState?Nl(s):null!==l?(l.return=a,Jo=l):Nl(s);for(;null!==i;)Jo=i,xl(i,t,n),i=i.sibling;Jo=s,Xo=o,$o=c}bl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,Jo=i):bl(e)}}function bl(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$o||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$o)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Bi(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bi(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(i(163))}$o||512&t.flags&&sl(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jo=n;break}Jo=t.return}}function wl(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jo=n;break}Jo=t.return}}function Nl(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(l){Sc(t,s,l)}}var i=t.return;try{sl(t)}catch(l){Sc(t,i,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){Sc(t,a,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var jl,Sl=Math.ceil,_l=b.ReactCurrentDispatcher,kl=b.ReactCurrentOwner,El=b.ReactCurrentBatchConfig,Cl=0,Tl=null,Il=null,Al=0,Rl=0,Dl=Ss(0),Pl=0,Ol=null,Ll=0,Ml=0,Fl=0,Ul=null,Vl=null,zl=0,ql=1/0,Bl=null,Ql=!1,Hl=null,Wl=null,Kl=!1,Gl=null,Xl=0,$l=0,Yl=null,Jl=-1,Zl=0;function ec(){return 0!==(6&Cl)?Ye():-1!==Jl?Jl:Jl=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Al?Al&-Al:null!==pi.transition?(0===Zl&&(Zl=pt()),Zl):0!==(e=xt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nc(e,t,n,r){if(50<$l)throw $l=0,Yl=null,Error(i(185));vt(e,n,r),0!==(2&Cl)&&e===Tl||(e===Tl&&(0===(2&Cl)&&(Ml|=n),4===Pl&&oc(e,Al)),rc(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(ql=Ye()+500,Us&&qs()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=ht(e,e===Tl?Al:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Us=!0,zs(e)}(lc.bind(null,e)):zs(lc.bind(null,e)),as(function(){0===(6&Cl)&&qs()}),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Jl=-1,Zl=0,0!==(6&Cl))throw Error(i(327));var n=e.callbackNode;if(Nc()&&e.callbackNode!==n)return null;var r=ht(e,e===Tl?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var s=Cl;Cl|=2;var a=mc();for(Tl===e&&Al===t||(Bl=null,ql=Ye()+500,hc(e,t));;)try{yc();break}catch(l){fc(e,l)}ki(),_l.current=a,Cl=s,null!==Il?t=0:(Tl=null,Al=0,t=Pl)}if(0!==t){if(2===t&&(0!==(s=mt(e))&&(r=s,t=ic(e,s))),1===t)throw n=Ol,hc(e,0),oc(e,r),rc(e,Ye()),n;if(6===t)oc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!or(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=gc(e,r))&&(0!==(a=mt(e))&&(r=a,t=ic(e,a))),1===t))throw n=Ol,hc(e,0),oc(e,r),rc(e,Ye()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:wc(e,Vl,Bl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=zl+500-Ye())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(wc.bind(null,e,Vl,Bl),t);break}wc(e,Vl,Bl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=rs(wc.bind(null,e,Vl,Bl),r);break}wc(e,Vl,Bl);break;default:throw Error(i(329))}}}return rc(e,Ye()),e.callbackNode===n?sc.bind(null,e):null}function ic(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vl,Vl=n,null!==t&&ac(t)),e}function ac(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function oc(e,t){for(t&=~Fl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Cl))throw Error(i(327));Nc();var t=ht(e,0);if(0===(1&t))return rc(e,Ye()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Ol,hc(e,0),oc(e,t),rc(e,Ye()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vl,Bl),rc(e,Ye()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(ql=Ye()+500,Us&&qs())}}function uc(e){null!==Gl&&0===Gl.tag&&0===(6&Cl)&&Nc();var t=Cl;Cl|=1;var n=El.transition,r=xt;try{if(El.transition=null,xt=1,e)return e()}finally{xt=r,El.transition=n,0===(6&(Cl=t))&&qs()}}function dc(){Rl=Dl.current,_s(Dl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ds();break;case 3:$i(),_s(Ts),_s(Cs),na();break;case 5:Ji(r);break;case 4:$i();break;case 13:case 19:_s(Zi);break;case 10:Ei(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Tl=e,Il=e=Dc(e.current,null),Al=Rl=t,Pl=0,Ol=null,Fl=Ml=Ll=0,Vl=Ul=null,null!==Ai){for(t=0;t<Ai.length;t++)if(null!==(r=(n=Ai[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}Ai=null}return e}function fc(e,t){for(;;){var n=Il;try{if(ki(),ra.current=Ya,ca){for(var r=aa.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}ca=!1}if(ia=0,la=oa=aa=null,ua=!1,da=0,kl.current=null,null===n||null===n.return){Pl=1,Ol=t,Il=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=go(o);if(null!==m){m.flags&=-257,vo(m,o,l,0,t),1&m.mode&&po(a,u,t),c=u;var p=(t=m).updateQueue;if(null===p){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}if(0===(1&t)){po(a,u,t),pc();break e}c=Error(i(426))}else if(si&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),mi(lo(c,l));break e}}a=c=lo(c,l),4!==Pl&&(Pl=2),null===Ul?Ul=[a]:Ul.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zi(a,fo(0,c,t));break e;case 1:l=c;var y=a.type,x=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Wl||!Wl.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t,zi(a,mo(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(b){t=b,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function mc(){var e=_l.current;return _l.current=Ya,null===e?Ya:e}function pc(){0!==Pl&&3!==Pl&&2!==Pl||(Pl=4),null===Tl||0===(268435455&Ll)&&0===(268435455&Ml)||oc(Tl,Al)}function gc(e,t){var n=Cl;Cl|=2;var r=mc();for(Tl===e&&Al===t||(Bl=null,hc(e,t));;)try{vc();break}catch(s){fc(e,s)}if(ki(),Cl=n,_l.current=r,null!==Il)throw Error(i(261));return Tl=null,Al=0,Pl}function vc(){for(;null!==Il;)xc(Il)}function yc(){for(;null!==Il&&!Xe();)xc(Il)}function xc(e){var t=jl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?bc(e):Il=t,kl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ko(n,t,Rl)))return void(Il=n)}else{if(null!==(n=Go(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Pl=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Pl&&(Pl=5)}function wc(e,t,n){var r=xt,s=El.transition;try{El.transition=null,xt=1,function(e,t,n,r){do{Nc()}while(null!==Gl);if(0!==(6&Cl))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-at(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===Tl&&(Il=Tl=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Tc(tt,function(){return Nc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=El.transition,El.transition=null;var o=xt;xt=1;var l=Cl;Cl|=4,kl.current=null,function(e,t){if(es=Qt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===a&&++d===r&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},Qt=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,v=p.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(i(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}p=tl,tl=!1}(e,n),gl(n,e),mr(ts),Qt=!!es,ts=es=null,e.current=n,yl(n,e,s),$e(),Cl=l,xt=o,El.transition=a}else e.current=n;if(Kl&&(Kl=!1,Gl=e,Xl=s),a=e.pendingLanes,0===a&&(Wl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ql)throw Ql=!1,e=Hl,Hl=null,e;0!==(1&Xl)&&0!==e.tag&&Nc(),a=e.pendingLanes,0!==(1&a)?e===Yl?$l++:($l=0,Yl=e):$l=0,qs()}(e,t,n,r)}finally{El.transition=s,xt=r}return null}function Nc(){if(null!==Gl){var e=bt(Xl),t=El.transition,n=xt;try{if(El.transition=null,xt=16>e?16:e,null===Gl)var r=!1;else{if(e=Gl,Gl=null,Xl=0,0!==(6&Cl))throw Error(i(331));var s=Cl;for(Cl|=4,Jo=e.current;null!==Jo;){var a=Jo,o=a.child;if(0!==(16&Jo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Jo=u;null!==Jo;){var d=Jo;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Jo=h;else for(;null!==Jo;){var f=(d=Jo).sibling,m=d.return;if(il(d),d===u){Jo=null;break}if(null!==f){f.return=m,Jo=f;break}Jo=m}}}var p=a.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Jo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(a=Jo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Jo=y;break e}Jo=a.return}}var x=e.current;for(Jo=x;null!==Jo;){var b=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Jo=b;else e:for(o=x;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(N){Sc(l,l.return,N)}if(l===o){Jo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Jo=w;break e}Jo=l.return}}if(Cl=s,qs(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(N){}r=!0}return r}finally{xt=n,El.transition=t}}return!1}function jc(e,t,n){e=Ui(e,t=fo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)jc(e,e,n);else for(;null!==t;){if(3===t.tag){jc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Ui(t,e=mo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function _c(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(Al&n)===n&&(4===Pl||3===Pl&&(130023424&Al)===Al&&500>Ye()-zl?hc(e,0):Fl|=n),rc(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Pi(e,t))&&(vt(e,t,n),rc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),kc(e,n)}function Tc(e,t){return Ke(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Ic(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)Rc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case j:return Oc(n.children,s,a,t);case S:o=8,s|=8;break;case _:return(e=Ac(12,n,t,2|s)).elementType=_,e.lanes=a,e;case T:return(e=Ac(13,n,t,s)).elementType=T,e.lanes=a,e;case I:return(e=Ac(19,n,t,s)).elementType=I,e.lanes=a,e;case D:return Lc(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:o=10;break e;case E:o=9;break e;case C:o=11;break e;case A:o=14;break e;case R:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Ac(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Oc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,s,i,a,o,l){return e=new Uc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Ac(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Li(i),e}function zc(e){if(!e)return Es;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Rs(n))return Os(e,n,t)}return t}function qc(e,t,n,r,s,i,a,o,l){return(e=Vc(n,r,!0,e,0,i,0,o,l)).context=zc(null),n=e.current,(i=Fi(r=ec(),s=tc(n))).callback=void 0!==t&&null!==t?t:null,Ui(n,i,s),e.current.lanes=s,vt(e,s,r),rc(e,r),e}function Bc(e,t,n,r){var s=t.current,i=ec(),a=tc(s);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ui(s,t,a))&&(nc(e,s,a,i),Vi(e,s,a)),a}function Qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}jl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ts.current)xo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xo=!1,function(e,t,n){switch(t.tag){case 3:To(t),fi();break;case 5:Yi(t);break;case 1:Rs(t.type)&&Ls(t);break;case 4:Xi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ks(Ni,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ks(Zi,1&Zi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mo(e,t,n):(ks(Zi,1&Zi.current),null!==(e=Qo(e,t,n))?e.sibling:null);ks(Zi,1&Zi.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),ks(Zi,Zi.current),r)break;return null;case 22:case 23:return t.lanes=0,So(e,t,n)}return Qo(e,t,n)}(e,t,n);xo=0!==(131072&e.flags)}else xo=!1,si&&0!==(1048576&t.flags)&&Zs(t,Ws,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bo(e,t),e=t.pendingProps;var s=As(t,Cs.current);Ti(t,n),s=pa(null,t,r,e,s,n);var a=ga();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rs(r)?(a=!0,Ls(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Li(t),s.updater=ro,t.stateNode=s,s._reactInternals=t,oo(t,r,e,n),t=Co(null,t,r,!0,a,n)):(t.tag=0,si&&a&&ei(t),bo(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bo(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=to(r,e),s){case 0:t=ko(null,t,r,e,n);break e;case 1:t=Eo(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=No(null,t,r,to(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,ko(e,t,r,s=t.elementType===r?s:to(r,s),n);case 1:return r=t.type,s=t.pendingProps,Eo(e,t,r,s=t.elementType===r?s:to(r,s),n);case 3:e:{if(To(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Mi(e,t),qi(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Io(e,t,r,n,s=lo(Error(i(423)),t));break e}if(r!==s){t=Io(e,t,r,n,s=lo(Error(i(424)),t));break e}for(ri=cs(t.stateNode.containerInfo.firstChild),ni=t,si=!0,ii=null,n=wi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===s){t=Qo(e,t,n);break e}bo(e,t,r,n)}t=t.child}return t;case 5:return Yi(t),null===e&&ci(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ns(r,s)?o=null:null!==a&&ns(r,a)&&(t.flags|=32),_o(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Mo(e,t,n);case 4:return Xi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bi(t,null,r,n):bo(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,wo(e,t,r,s=t.elementType===r?s:to(r,s),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,ks(Ni,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===s.children&&!Ts.current){t=Qo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ci(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ci(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}bo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ti(t,n),r=r(s=Ii(s)),t.flags|=1,bo(e,t,r,n),t.child;case 14:return s=to(r=t.type,t.pendingProps),No(e,t,r,s=to(r.type,s),n);case 15:return jo(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:to(r,s),Bo(e,t),t.tag=1,Rs(r)?(e=!0,Ls(t)):e=!1,Ti(t,n),io(t,r,s),oo(t,r,s,n),Co(null,t,r,!0,e,n);case 19:return qo(e,t,n);case 22:return So(e,t,n)}throw Error(i(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=Qc(a);o.call(e)}}Bc(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Qc(a);i.call(e)}}var a=qc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[ms]=a.current,qr(8===e.nodeType?e.parentNode:e),uc(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Qc(l);o.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[ms]=l.current,qr(8===e.nodeType?e.parentNode:e),uc(function(){Bc(t,l,n,r)}),l}(n,t,e,s,r);return Qc(a)}Xc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Bc(e,t,null,null)},Xc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Bc(null,e,null,null)}),t[ms]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Ye()),0===(6&Cl)&&(ql=Ye()+500,qs()))}break;case 13:uc(function(){var t=Pi(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Wc(e,1)}},Nt=function(e){if(13===e.tag){var t=Pi(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},jt=function(e){if(13===e.tag){var t=tc(e),n=Pi(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},St=function(){return xt},_t=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},Ne=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ws(r);if(!s)throw Error(i(90));K(r),J(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Te=uc;var eu={usingClientEntryPoint:!1,Events:[xs,bs,ws,ke,Ee,cc]},tu={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{st=ru.inject(nu),it=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(i(299));var n=!1,r="",s=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,s),e[ms]=t.current,qr(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(i(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,s,0,a,o),e[ms]=t.current,qr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Xc(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(i(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(i(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[ms]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},819:(e,t,n)=>{"use strict";n.d(t,{QueryClient:()=>r.E});var r=n(646),s=n(298);n.o(s,"QueryClientProvider")&&n.d(t,{QueryClientProvider:function(){return s.QueryClientProvider}}),n.o(s,"useMutation")&&n.d(t,{useMutation:function(){return s.useMutation}}),n.o(s,"useQuery")&&n.d(t,{useQuery:function(){return s.useQuery}}),n.o(s,"useQueryClient")&&n.d(t,{useQueryClient:function(){return s.useQueryClient}})},853:(e,t,n)=>{"use strict";e.exports=n(234)},870:(e,t,n)=>{"use strict";n.d(t,{BH:()=>x,Cp:()=>v,F$:()=>p,G6:()=>_,GR:()=>d,HN:()=>l,MK:()=>f,Od:()=>g,S$:()=>s,Zw:()=>a,b_:()=>h,f8:()=>b,gn:()=>o,j3:()=>c,jY:()=>k,lQ:()=>i,nJ:()=>m,vh:()=>u,yy:()=>S});var r=n(168),s="undefined"===typeof window;function i(){}function a(e,t){return"function"===typeof e?e(t):e}function o(e){return"number"===typeof e&&e>=0&&e!==1/0}function l(e){return Array.isArray(e)?e:[e]}function c(e,t){return Math.max(e+(t||0)-Date.now(),0)}function u(e,t,n){return j(e)?"function"===typeof t?(0,r.A)({},n,{queryKey:e,queryFn:t}):(0,r.A)({},t,{queryKey:e}):e}function d(e,t,n){return j(e)?"function"===typeof t?(0,r.A)({},n,{mutationKey:e,mutationFn:t}):(0,r.A)({},t,{mutationKey:e}):"function"===typeof e?(0,r.A)({},t,{mutationFn:e}):(0,r.A)({},e)}function h(e,t,n){return j(e)?[(0,r.A)({},t,{queryKey:e}),n]:[e||{},t]}function f(e,t){var n=e.active,r=e.exact,s=e.fetching,i=e.inactive,a=e.predicate,o=e.queryKey,l=e.stale;if(j(o))if(r){if(t.queryHash!==p(o,t.options))return!1}else if(!v(t.queryKey,o))return!1;var c=function(e,t){return!0===e&&!0===t||null==e&&null==t?"all":!1===e&&!1===t?"none":(null!=e?e:!t)?"active":"inactive"}(n,i);if("none"===c)return!1;if("all"!==c){var u=t.isActive();if("active"===c&&!u)return!1;if("inactive"===c&&u)return!1}return("boolean"!==typeof l||t.isStale()===l)&&(("boolean"!==typeof s||t.isFetching()===s)&&!(a&&!a(t)))}function m(e,t){var n=e.exact,r=e.fetching,s=e.predicate,i=e.mutationKey;if(j(i)){if(!t.options.mutationKey)return!1;if(n){if(g(t.options.mutationKey)!==g(i))return!1}else if(!v(t.options.mutationKey,i))return!1}return("boolean"!==typeof r||"loading"===t.state.status===r)&&!(s&&!s(t))}function p(e,t){return((null==t?void 0:t.queryKeyHashFn)||g)(e)}function g(e){var t,n=l(e);return t=n,JSON.stringify(t,function(e,t){return w(t)?Object.keys(t).sort().reduce(function(e,n){return e[n]=t[n],e},{}):t})}function v(e,t){return y(l(e),l(t))}function y(e,t){return e===t||typeof e===typeof t&&(!(!e||!t||"object"!==typeof e||"object"!==typeof t)&&!Object.keys(t).some(function(n){return!y(e[n],t[n])}))}function x(e,t){if(e===t)return e;var n=Array.isArray(e)&&Array.isArray(t);if(n||w(e)&&w(t)){for(var r=n?e.length:Object.keys(e).length,s=n?t:Object.keys(t),i=s.length,a=n?[]:{},o=0,l=0;l<i;l++){var c=n?l:s[l];a[c]=x(e[c],t[c]),a[c]===e[c]&&o++}return r===i&&o===r?e:a}return t}function b(e,t){if(e&&!t||t&&!e)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}function w(e){if(!N(e))return!1;var t=e.constructor;if("undefined"===typeof t)return!0;var n=t.prototype;return!!N(n)&&!!n.hasOwnProperty("isPrototypeOf")}function N(e){return"[object Object]"===Object.prototype.toString.call(e)}function j(e){return"string"===typeof e||Array.isArray(e)}function S(e){return new Promise(function(t){setTimeout(t,e)})}function _(e){Promise.resolve().then(e).catch(function(e){return setTimeout(function(){throw e})})}function k(){if("function"===typeof AbortController)return new AbortController}},907:(e,t,n)=>{"use strict";n.d(t,{QueryClient:()=>r.QueryClient,QueryClientProvider:()=>s.QueryClientProvider,useMutation:()=>s.useMutation,useQuery:()=>s.useQuery,useQueryClient:()=>s.useQueryClient});var r=n(819);n.o(r,"QueryClientProvider")&&n.d(t,{QueryClientProvider:function(){return r.QueryClientProvider}}),n.o(r,"useMutation")&&n.d(t,{useMutation:function(){return r.useMutation}}),n.o(r,"useQuery")&&n.d(t,{useQuery:function(){return r.useQuery}}),n.o(r,"useQueryClient")&&n.d(t,{useQueryClient:function(){return r.useQueryClient}});var s=n(490)},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},964:(e,t,n)=>{"use strict";n.d(t,{$:()=>c,s:()=>l});var r=n(168),s=n(75),i=n(991),a=n(990),o=n(870),l=function(){function e(e){this.options=(0,r.A)({},e.defaultOptions,e.options),this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.observers=[],this.state=e.state||c(),this.meta=e.meta}var t=e.prototype;return t.setState=function(e){this.dispatch({type:"setState",state:e})},t.addObserver=function(e){-1===this.observers.indexOf(e)&&this.observers.push(e)},t.removeObserver=function(e){this.observers=this.observers.filter(function(t){return t!==e})},t.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(o.lQ).catch(o.lQ)):Promise.resolve()},t.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},t.execute=function(){var e,t=this,n="loading"===this.state.status,r=Promise.resolve();return n||(this.dispatch({type:"loading",variables:this.options.variables}),r=r.then(function(){null==t.mutationCache.config.onMutate||t.mutationCache.config.onMutate(t.state.variables,t)}).then(function(){return null==t.options.onMutate?void 0:t.options.onMutate(t.state.variables)}).then(function(e){e!==t.state.context&&t.dispatch({type:"loading",context:e,variables:t.state.variables})})),r.then(function(){return t.executeMutation()}).then(function(n){e=n,null==t.mutationCache.config.onSuccess||t.mutationCache.config.onSuccess(e,t.state.variables,t.state.context,t)}).then(function(){return null==t.options.onSuccess?void 0:t.options.onSuccess(e,t.state.variables,t.state.context)}).then(function(){return null==t.options.onSettled?void 0:t.options.onSettled(e,null,t.state.variables,t.state.context)}).then(function(){return t.dispatch({type:"success",data:e}),e}).catch(function(e){return null==t.mutationCache.config.onError||t.mutationCache.config.onError(e,t.state.variables,t.state.context,t),(0,s.t)().error(e),Promise.resolve().then(function(){return null==t.options.onError?void 0:t.options.onError(e,t.state.variables,t.state.context)}).then(function(){return null==t.options.onSettled?void 0:t.options.onSettled(void 0,e,t.state.variables,t.state.context)}).then(function(){throw t.dispatch({type:"error",error:e}),e})})},t.executeMutation=function(){var e,t=this;return this.retryer=new a.eJ({fn:function(){return t.options.mutationFn?t.options.mutationFn(t.state.variables):Promise.reject("No mutationFn found")},onFail:function(){t.dispatch({type:"failed"})},onPause:function(){t.dispatch({type:"pause"})},onContinue:function(){t.dispatch({type:"continue"})},retry:null!=(e=this.options.retry)?e:0,retryDelay:this.options.retryDelay}),this.retryer.promise},t.dispatch=function(e){var t=this;this.state=function(e,t){switch(t.type){case"failed":return(0,r.A)({},e,{failureCount:e.failureCount+1});case"pause":return(0,r.A)({},e,{isPaused:!0});case"continue":return(0,r.A)({},e,{isPaused:!1});case"loading":return(0,r.A)({},e,{context:t.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:t.variables});case"success":return(0,r.A)({},e,{data:t.data,error:null,status:"success",isPaused:!1});case"error":return(0,r.A)({},e,{data:void 0,error:t.error,failureCount:e.failureCount+1,isPaused:!1,status:"error"});case"setState":return(0,r.A)({},e,t.state);default:return e}}(this.state,e),i.j.batch(function(){t.observers.forEach(function(t){t.onMutationUpdate(e)}),t.mutationCache.notify(t)})},e}();function c(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}},990:(e,t,n)=>{"use strict";n.d(t,{dd:()=>o,eJ:()=>u,wm:()=>c});var r=n(244),s=n(317),i=n(870);function a(e){return Math.min(1e3*Math.pow(2,e),3e4)}function o(e){return"function"===typeof(null==e?void 0:e.cancel)}var l=function(e){this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent};function c(e){return e instanceof l}var u=function(e){var t,n,c,u,d=this,h=!1;this.abort=e.abort,this.cancel=function(e){return null==t?void 0:t(e)},this.cancelRetry=function(){h=!0},this.continueRetry=function(){h=!1},this.continue=function(){return null==n?void 0:n()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(e,t){c=e,u=t});var f=function(t){d.isResolved||(d.isResolved=!0,null==e.onSuccess||e.onSuccess(t),null==n||n(),c(t))},m=function(t){d.isResolved||(d.isResolved=!0,null==e.onError||e.onError(t),null==n||n(),u(t))};!function c(){if(!d.isResolved){var u;try{u=e.fn()}catch(p){u=Promise.reject(p)}t=function(e){if(!d.isResolved&&(m(new l(e)),null==d.abort||d.abort(),o(u)))try{u.cancel()}catch(t){}},d.isTransportCancelable=o(u),Promise.resolve(u).then(f).catch(function(t){var o,l;if(!d.isResolved){var u=null!=(o=e.retry)?o:3,f=null!=(l=e.retryDelay)?l:a,p="function"===typeof f?f(d.failureCount,t):f,g=!0===u||"number"===typeof u&&d.failureCount<u||"function"===typeof u&&u(d.failureCount,t);!h&&g?(d.failureCount++,null==e.onFail||e.onFail(d.failureCount,t),(0,i.yy)(p).then(function(){if(!r.m.isFocused()||!s.t.isOnline())return new Promise(function(t){n=t,d.isPaused=!0,null==e.onPause||e.onPause()}).then(function(){n=void 0,d.isPaused=!1,null==e.onContinue||e.onContinue()})}).then(function(){h?m(t):c()})):m(t)}})}}()}},991:(e,t,n)=>{"use strict";n.d(t,{j:()=>s});var r=n(870),s=new(function(){function e(){this.queue=[],this.transactions=0,this.notifyFn=function(e){e()},this.batchNotifyFn=function(e){e()}}var t=e.prototype;return t.batch=function(e){var t;this.transactions++;try{t=e()}finally{this.transactions--,this.transactions||this.flush()}return t},t.schedule=function(e){var t=this;this.transactions?this.queue.push(e):(0,r.G6)(function(){t.notifyFn(e)})},t.batchCalls=function(e){var t=this;return function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];t.schedule(function(){e.apply(void 0,r)})}},t.flush=function(){var e=this,t=this.queue;this.queue=[],t.length&&(0,r.G6)(function(){e.batchNotifyFn(function(){t.forEach(function(t){e.notifyFn(t)})})})},t.setNotifyFunction=function(e){this.notifyFn=e},t.setBatchNotifyFunction=function(e){this.batchNotifyFn=e},e}())}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e,t=n(43),r=n.t(t,2),s=n(391),i=n(950),a=n.t(i,2);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Ve){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function p(t,n,r,s){void 0===s&&(s={});let{window:i=document.defaultView,v5Compat:a=!1}=s,u=i.history,m=e.Pop,p=null,g=v();function v(){return(u.state||{idx:null}).idx}function y(){m=e.Pop;let t=v(),n=null==t?null:t-g;g=t,p&&p({action:m,location:b.location,delta:n})}function x(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:f(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,u.replaceState(o({},u.state,{idx:g}),""));let b={get action(){return m},get location(){return t(i,u)},listen(e){if(p)throw new Error("A history only accepts one active listener");return i.addEventListener(l,y),p=e,()=>{i.removeEventListener(l,y),p=null}},createHref:e=>n(i,e),createURL:x,encodeLocation(e){let t=x(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){m=e.Push;let s=h(b.location,t,n);r&&r(s,t),g=v()+1;let o=d(s,g),l=b.createHref(s);try{u.pushState(o,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;i.location.assign(l)}a&&p&&p({action:m,location:b.location,delta:1})},replace:function(t,n){m=e.Replace;let s=h(b.location,t,n);r&&r(s,t),g=v();let i=d(s,g),o=b.createHref(s);u.replaceState(i,"",o),a&&p&&p({action:m,location:b.location,delta:0})},go:e=>u.go(e)};return b}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){return void 0===n&&(n="/"),y(e,t,n,!1)}function y(e,t,n,r){let s=R(("string"===typeof t?m(t):t).pathname||"/",n);if(null==s)return null;let i=x(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let e=A(s);a=T(i[o],e,r)}return a}function x(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(c(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=M([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),x(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:C(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))s(e,t,r);else s(e,t)}),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let a=b(r.join("/")),o=[];return o.push(...a.map(e=>""===e?i:[i,e].join("/"))),s&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const w=/^:[\w-]+$/,N=3,j=2,S=1,_=10,k=-2,E=e=>"*"===e;function C(e,t){let n=e.split("/"),r=n.length;return n.some(E)&&(r+=k),t&&(r+=j),n.filter(e=>!E(e)).reduce((e,t)=>e+(w.test(t)?N:""===t?S:_),r)}function T(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},i="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),a.push({params:s,pathname:M([i,u.pathname]),pathnameBase:F(M([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=M([i,u.pathnameBase]))}return a}function I(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:a,pattern:e}}function A(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function D(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function P(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function O(e,t){let n=P(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function L(e,t,n,r){let s;void 0===r&&(r=!1),"string"===typeof e?s=m(e):(s=o({},e),c(!s.pathname||!s.pathname.includes("?"),D("?","pathname","search",s)),c(!s.pathname||!s.pathname.includes("#"),D("#","pathname","hash",s)),c(!s.search||!s.search.includes("#"),D("#","search","hash",s)));let i,a=""===e||""===s.pathname,l=a?"/":s.pathname;if(null==l)i=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}i=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:s=""}="string"===typeof e?m(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:U(r),hash:V(s)}}(s,i),d=l&&"/"!==l&&l.endsWith("/"),h=(a||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!h||(u.pathname+="/"),u}const M=e=>e.join("/").replace(/\/\/+/g,"/"),F=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const q=["post","put","patch","delete"],B=(new Set(q),["get",...q]);new Set(B),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q.apply(this,arguments)}const H=t.createContext(null);const W=t.createContext(null);const K=t.createContext(null);const G=t.createContext(null);const X=t.createContext({outlet:null,matches:[],isDataRoute:!1});const $=t.createContext(null);function Y(){return null!=t.useContext(G)}function J(){return Y()||c(!1),t.useContext(G).location}function Z(e){t.useContext(K).static||t.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=t.useContext(X);return e?function(){let{router:e}=he(ue.UseNavigateStable),n=me(de.UseNavigateStable),r=t.useRef(!1);return Z(()=>{r.current=!0}),t.useCallback(function(t,s){void 0===s&&(s={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,Q({fromRouteId:n},s)))},[e,n])}():function(){Y()||c(!1);let e=t.useContext(H),{basename:n,future:r,navigator:s}=t.useContext(K),{matches:i}=t.useContext(X),{pathname:a}=J(),o=JSON.stringify(O(i,r.v7_relativeSplatPath)),l=t.useRef(!1);return Z(()=>{l.current=!0}),t.useCallback(function(t,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof t)return void s.go(t);let i=L(t,JSON.parse(o),a,"path"===r.relative);null==e&&"/"!==n&&(i.pathname="/"===i.pathname?n:M([n,i.pathname])),(r.replace?s.replace:s.push)(i,r.state,r)},[n,s,o,a,e])}()}const te=t.createContext(null);function ne(){let{matches:e}=t.useContext(X),n=e[e.length-1];return n?n.params:{}}function re(e,n){let{relative:r}=void 0===n?{}:n,{future:s}=t.useContext(K),{matches:i}=t.useContext(X),{pathname:a}=J(),o=JSON.stringify(O(i,s.v7_relativeSplatPath));return t.useMemo(()=>L(e,JSON.parse(o),a,"path"===r),[e,o,a,r])}function se(n,r,s,i){Y()||c(!1);let{navigator:a}=t.useContext(K),{matches:o}=t.useContext(X),l=o[o.length-1],u=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=J();if(r){var p;let e="string"===typeof r?m(r):r;"/"===d||(null==(p=e.pathname)?void 0:p.startsWith(d))||c(!1),h=e}else h=f;let g=h.pathname||"/",y=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=v(n,{pathname:y});let b=ce(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:M([d,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:M([d,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,s,i);return r&&b?t.createElement(G.Provider,{value:{location:Q({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:e.Pop}},b):b}function ie(){let e=function(){var e;let n=t.useContext($),r=fe(de.UseRouteError),s=me(de.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[s]}(),n=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:i},r):null,null)}const ae=t.createElement(ie,null);class oe extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(X.Provider,{value:this.props.routeContext},t.createElement($.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:n,match:r,children:s}=e,i=t.useContext(H);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(X.Provider,{value:n},s)}function ce(e,n,r,s){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===s&&(s=null),null==e){var a;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(a=s)&&a.v7_partialHydration&&0===n.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let o=e,l=null==(i=r)?void 0:i.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||c(!1),o=o.slice(0,Math.min(o.length,e+1))}let u=!1,d=-1;if(r&&s&&s.v7_partialHydration)for(let t=0;t<o.length;t++){let e=o[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=t),e.route.id){let{loaderData:t,errors:n}=r,s=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||s){u=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight((e,s,i)=>{let a,c=!1,h=null,f=null;var m;r&&(a=l&&s.route.id?l[s.route.id]:void 0,h=s.route.errorElement||ae,u&&(d<0&&0===i?(m="route-fallback",!1||pe[m]||(pe[m]=!0),c=!0,f=null):d===i&&(c=!0,f=s.route.hydrateFallbackElement||null)));let p=n.concat(o.slice(0,i+1)),g=()=>{let n;return n=a?h:c?f:s.route.Component?t.createElement(s.route.Component,null):s.route.element?s.route.element:e,t.createElement(le,{match:s,routeContext:{outlet:e,matches:p,isDataRoute:null!=r},children:n})};return r&&(s.route.ErrorBoundary||s.route.errorElement||0===i)?t.createElement(oe,{location:r.location,revalidation:r.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}var ue=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ue||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function he(e){let n=t.useContext(H);return n||c(!1),n}function fe(e){let n=t.useContext(W);return n||c(!1),n}function me(e){let n=function(){let e=t.useContext(X);return e||c(!1),e}(),r=n.matches[n.matches.length-1];return r.route.id||c(!1),r.route.id}const pe={};function ge(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}r.startTransition;function ve(e){let{to:n,replace:r,state:s,relative:i}=e;Y()||c(!1);let{future:a,static:o}=t.useContext(K),{matches:l}=t.useContext(X),{pathname:u}=J(),d=ee(),h=L(n,O(l,a.v7_relativeSplatPath),u,"path"===i),f=JSON.stringify(h);return t.useEffect(()=>d(JSON.parse(f),{replace:r,state:s,relative:i}),[d,f,i,r,s]),null}function ye(e){return function(e){let n=t.useContext(X).outlet;return n?t.createElement(te.Provider,{value:e},n):n}(e.context)}function xe(e){c(!1)}function be(n){let{basename:r="/",children:s=null,location:i,navigationType:a=e.Pop,navigator:o,static:l=!1,future:u}=n;Y()&&c(!1);let d=r.replace(/^\/*/,"/"),h=t.useMemo(()=>({basename:d,navigator:o,static:l,future:Q({v7_relativeSplatPath:!1},u)}),[d,u,o,l]);"string"===typeof i&&(i=m(i));let{pathname:f="/",search:p="",hash:g="",state:v=null,key:y="default"}=i,x=t.useMemo(()=>{let e=R(f,d);return null==e?null:{location:{pathname:e,search:p,hash:g,state:v,key:y},navigationType:a}},[d,f,p,g,v,y,a]);return null==x?null:t.createElement(K.Provider,{value:h},t.createElement(G.Provider,{children:s,value:x}))}function we(e){let{children:t,location:n}=e;return se(Ne(t),n)}new Promise(()=>{});t.Component;function Ne(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,(e,s)=>{if(!t.isValidElement(e))return;let i=[...n,s];if(e.type===t.Fragment)return void r.push.apply(r,Ne(e.props.children,i));e.type!==xe&&c(!1),e.props.index&&e.props.children&&c(!1);let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Ne(e.props.children,i)),r.push(a)}),r}function je(){return je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},je.apply(this,arguments)}function Se(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const _e=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Ve){}new Map;const ke=r.startTransition;a.flushSync,r.useId;function Ee(e){let{basename:n,children:r,future:s,window:i}=e,a=t.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:i,v5Compat:!0})&&(o={}),p(function(e,t){let{pathname:n="/",search:r="",hash:s=""}=m(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),h("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:f(t))},function(e,t){u("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},o)));let l=a.current,[c,d]=t.useState({action:l.action,location:l.location}),{v7_startTransition:g}=s||{},v=t.useCallback(e=>{g&&ke?ke(()=>d(e)):d(e)},[d,g]);return t.useLayoutEffect(()=>l.listen(v),[l,v]),t.useEffect(()=>ge(s),[s]),t.createElement(be,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:l,future:s})}const Ce="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Te=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ie=t.forwardRef(function(e,n){let r,{onClick:s,relative:i,reloadDocument:a,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:m}=e,p=Se(e,_e),{basename:g}=t.useContext(K),v=!1;if("string"===typeof d&&Te.test(d)&&(r=d,Ce))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=R(t.pathname,g);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:v=!0}catch(Ve){}let y=function(e,n){let{relative:r}=void 0===n?{}:n;Y()||c(!1);let{basename:s,navigator:i}=t.useContext(K),{hash:a,pathname:o,search:l}=re(e,{relative:r}),u=o;return"/"!==s&&(u="/"===o?s:M([s,o])),i.createHref({pathname:u,search:l,hash:a})}(d,{relative:i}),x=function(e,n){let{target:r,replace:s,state:i,preventScrollReset:a,relative:o,viewTransition:l}=void 0===n?{}:n,c=ee(),u=J(),d=re(e,{relative:o});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==s?s:f(u)===f(d);c(e,{replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,s,i,r,e,a,o,l])}(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:m});return t.createElement("a",je({},p,{href:r||y,onClick:v||a?s:function(e){s&&s(e),e.defaultPrevented||x(e)},ref:n,target:u}))});var Ae,Re;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ae||(Ae={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Re||(Re={}));var De=n(907);function Pe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}function Le(e){var t=function(e,t){if("object"!=Oe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Oe(t)?t:t+""}function Me(e,t,n){return(t=Le(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach(function(t){Me(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let Ve={data:""},ze=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Ve,qe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Be=/\/\*[^]*?\*\/|  +/g,Qe=/\n+/g,He=(e,t)=>{let n="",r="",s="";for(let i in e){let a=e[i];"@"==i[0]?"i"==i[1]?n=i+" "+a+";":r+="f"==i[1]?He(a,i):i+"{"+He(a,"k"==i[1]?"":t)+"}":"object"==typeof a?r+=He(a,t?t.replace(/([^,])+/g,e=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):i):null!=a&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=He.p?He.p(i,a):i+":"+a+";")}return n+(t&&s?t+"{"+s+"}":s)+r},We={},Ke=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+Ke(e[n]);return t}return e},Ge=(e,t,n,r,s)=>{let i=Ke(e),a=We[i]||(We[i]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(i));if(!We[a]){let t=i!==e?e:(e=>{let t,n,r=[{}];for(;t=qe.exec(e.replace(Be,""));)t[4]?r.shift():t[3]?(n=t[3].replace(Qe," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(Qe," ").trim();return r[0]})(e);We[a]=He(s?{["@keyframes "+a]:t}:t,n?"":"."+a)}let o=n&&We.g?We.g:null;return n&&(We.g=We[a]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(We[a],t,r,o),a};function Xe(e){let t=this||{},n=e.call?e(t.p):e;return Ge(n.unshift?n.raw?((e,t,n)=>e.reduce((e,r,s)=>{let i=t[s];if(i&&i.call){let e=i(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;i=t?"."+t:e&&"object"==typeof e?e.props?"":He(e,""):!1===e?"":e}return e+r+(null==i?"":i)},""))(n,[].slice.call(arguments,1),t.p):n.reduce((e,n)=>Object.assign(e,n&&n.call?n(t.p):n),{}):n,ze(t.target),t.g,t.o,t.k)}Xe.bind({g:1});let $e,Ye,Je,Ze=Xe.bind({k:1});function et(e,t){let n=this||{};return function(){let r=arguments;function s(i,a){let o=Object.assign({},i),l=o.className||s.className;n.p=Object.assign({theme:Ye&&Ye()},o),n.o=/ *go\d+/.test(l),o.className=Xe.apply(n,r)+(l?" "+l:""),t&&(o.ref=a);let c=e;return e[0]&&(c=o.as||e,delete o.as),Je&&c[0]&&Je(o),$e(c,o)}return t?t(s):s}}var tt,nt,rt,st,it,at,ot,lt,ct,ut,dt,ht,ft,mt,pt,gt,vt=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,yt=(()=>{let e=0;return()=>(++e).toString()})(),xt=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),bt="default",wt=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return Ue(Ue({},e),{},{toasts:[t.toast,...e.toasts].slice(0,n)});case 1:return Ue(Ue({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?Ue(Ue({},e),t.toast):e)});case 2:let{toast:r}=t;return wt(e,{type:e.toasts.find(e=>e.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return Ue(Ue({},e),{},{toasts:e.toasts.map(e=>e.id===s||void 0===s?Ue(Ue({},e),{},{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?Ue(Ue({},e),{},{toasts:[]}):Ue(Ue({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return Ue(Ue({},e),{},{pausedAt:t.time});case 6:let i=t.time-(e.pausedAt||0);return Ue(Ue({},e),{},{pausedAt:void 0,toasts:e.toasts.map(e=>Ue(Ue({},e),{},{pauseDuration:e.pauseDuration+i}))})}},Nt=[],jt={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},St={},_t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bt;St[t]=wt(St[t]||jt,e),Nt.forEach(e=>{let[n,r]=e;n===t&&r(St[t])})},kt=e=>Object.keys(St).forEach(t=>_t(e,t)),Et=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt;return t=>{_t(t,e)}},Ct={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Tt=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return Ue(Ue({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},n),{},{id:(null==n?void 0:n.id)||yt()})}(t,e,n);return Et(r.toasterId||(e=>Object.keys(St).find(t=>St[t].toasts.some(t=>t.id===e)))(r.id))({type:2,toast:r}),r.id},It=(e,t)=>Tt("blank")(e,t);It.error=Tt("error"),It.success=Tt("success"),It.loading=Tt("loading"),It.custom=Tt("custom"),It.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Et(t)(n):kt(n)},It.dismissAll=e=>It.dismiss(void 0,e),It.remove=(e,t)=>{let n={type:4,toastId:e};t?Et(t)(n):kt(n)},It.removeAll=e=>It.remove(void 0,e),It.promise=(e,t,n)=>{let r=It.loading(t.loading,Ue(Ue({},n),null==n?void 0:n.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let s=t.success?vt(t.success,e):void 0;return s?It.success(s,Ue(Ue({id:r},n),null==n?void 0:n.success)):It.dismiss(r),e}).catch(e=>{let s=t.error?vt(t.error,e):void 0;s?It.error(s,Ue(Ue({id:r},n),null==n?void 0:n.error)):It.dismiss(r)}),e};var At=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",{toasts:r,pausedAt:s}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bt,[r,s]=(0,t.useState)(St[n]||jt),i=(0,t.useRef)(St[n]);(0,t.useEffect)(()=>(i.current!==St[n]&&s(St[n]),Nt.push([n,s]),()=>{let e=Nt.findIndex(e=>{let[t]=e;return t===n});e>-1&&Nt.splice(e,1)}),[n]);let a=r.toasts.map(t=>{var n,r,s;return Ue(Ue(Ue(Ue({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||Ct[t.type],style:Ue(Ue(Ue({},e.style),null==(s=e[t.type])?void 0:s.style),t.style)})});return Ue(Ue({},r),{},{toasts:a})}(e,n),i=(0,t.useRef)(new Map).current,a=(0,t.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(i.has(e))return;let n=setTimeout(()=>{i.delete(e),o({type:4,toastId:e})},t);i.set(e,n)},[]);(0,t.useEffect)(()=>{if(s)return;let e=Date.now(),t=r.map(t=>{if(t.duration===1/0)return;let r=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(r<0))return setTimeout(()=>It.dismiss(t.id,n),r);t.visible&&It.dismiss(t.id)});return()=>{t.forEach(e=>e&&clearTimeout(e))}},[r,s,n]);let o=(0,t.useCallback)(Et(n),[n]),l=(0,t.useCallback)(()=>{o({type:5,time:Date.now()})},[o]),c=(0,t.useCallback)((e,t)=>{o({type:1,toast:{id:e,height:t}})},[o]),u=(0,t.useCallback)(()=>{s&&o({type:6,time:Date.now()})},[s,o]),d=(0,t.useCallback)((e,t)=>{let{reverseOrder:n=!1,gutter:s=8,defaultPosition:i}=t||{},a=r.filter(t=>(t.position||i)===(e.position||i)&&t.height),o=a.findIndex(t=>t.id===e.id),l=a.filter((e,t)=>t<o&&e.visible).length;return a.filter(e=>e.visible).slice(...n?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+s,0)},[r]);return(0,t.useEffect)(()=>{r.forEach(e=>{if(e.dismissed)a(e.id,e.removeDelay);else{let t=i.get(e.id);t&&(clearTimeout(t),i.delete(e.id))}})},[r,a]),{toasts:r,handlers:{updateHeight:c,startPause:l,endPause:u,calculateOffset:d}}},Rt=Ze(tt||(tt=Pe(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),Dt=Ze(nt||(nt=Pe(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Pt=Ze(rt||(rt=Pe(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),Ot=et("div")(st||(st=Pe(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",Rt,Dt,e=>e.secondary||"#fff",Pt),Lt=Ze(it||(it=Pe(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),Mt=et("div")(at||(at=Pe(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",Lt),Ft=Ze(ot||(ot=Pe(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),Ut=Ze(lt||(lt=Pe(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),Vt=et("div")(ct||(ct=Pe(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",Ft,Ut,e=>e.secondary||"#fff"),zt=et("div")(ut||(ut=Pe(["\n  position: absolute;\n"]))),qt=et("div")(dt||(dt=Pe(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),Bt=Ze(ht||(ht=Pe(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Qt=et("div")(ft||(ft=Pe(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),Bt),Ht=e=>{let{toast:n}=e,{icon:r,type:s,iconTheme:i}=n;return void 0!==r?"string"==typeof r?t.createElement(Qt,null,r):r:"blank"===s?null:t.createElement(qt,null,t.createElement(Mt,Ue({},i)),"loading"!==s&&t.createElement(zt,null,"error"===s?t.createElement(Ot,Ue({},i)):t.createElement(Vt,Ue({},i))))},Wt=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),Kt=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),Gt=et("div")(mt||(mt=Pe(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),Xt=et("div")(pt||(pt=Pe(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),$t=t.memo(e=>{let{toast:n,position:r,style:s,children:i}=e,a=n.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,s]=xt()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Wt(n),Kt(n)];return{animation:t?"".concat(Ze(r)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(Ze(s)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(n.position||r||"top-center",n.visible):{opacity:0},o=t.createElement(Ht,{toast:n}),l=t.createElement(Xt,Ue({},n.ariaProps),vt(n.message,n));return t.createElement(Gt,{className:n.className,style:Ue(Ue(Ue({},a),s),n.style)},"function"==typeof i?i({icon:o,message:l}):t.createElement(t.Fragment,null,o,l))});!function(e,t,n,r){He.p=t,$e=e,Ye=n,Je=r}(t.createElement);var Yt=e=>{let{id:n,className:r,style:s,onHeightUpdate:i,children:a}=e,o=t.useCallback(e=>{if(e){let t=()=>{let t=e.getBoundingClientRect().height;i(n,t)};t(),new MutationObserver(t).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[n,i]);return t.createElement("div",{ref:o,className:r,style:s},a)},Jt=Xe(gt||(gt=Pe(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),Zt=e=>{let{reverseOrder:n,position:r="top-center",toastOptions:s,gutter:i,children:a,toasterId:o,containerStyle:l,containerClassName:c}=e,{toasts:u,handlers:d}=At(s,o);return t.createElement("div",{"data-rht-toaster":o||"",style:Ue({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},l),className:c,onMouseEnter:d.startPause,onMouseLeave:d.endPause},u.map(e=>{let s=e.position||r,o=((e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return Ue(Ue({left:0,right:0,display:"flex",position:"absolute",transition:xt()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(n?1:-1),"px)")},r),s)})(s,d.calculateOffset(e,{reverseOrder:n,gutter:i,defaultPosition:r}));return t.createElement(Yt,{id:e.id,key:e.id,onHeightUpdate:d.updateHeight,className:e.visible?Jt:"",style:o},"custom"===e.type?vt(e.message,e):a?a(e):t.createElement($t,{toast:e,position:s}))}))},en=It;const tn=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},nn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(tn(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==o)throw new rn;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class rn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sn=function(e){return function(e){const t=tn(e);return nn.encodeByteArray(t,!0)}(e).replace(/\./g,"")},an=function(e){try{return nn.decodeString(e,!0)}catch(Ve){console.error("base64Decode failed: ",Ve)}return null};const on=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,ln=()=>{try{return on()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5000/api"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Ve){return}const t=e&&an(e[1]);return t&&JSON.parse(t)})()}catch(Ve){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Ve))}},cn=e=>{var t,n;return null===(n=null===(t=ln())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},un=()=>{var e;return null===(e=ln())||void 0===e?void 0:e.config},dn=e=>{var t;return null===(t=ln())||void 0===t?void 0:t["_".concat(e)]};class hn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function fn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function mn(){return!function(){var e;const t=null===(e=ln())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Ve){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pn(){try{return"object"===typeof indexedDB}catch(Ve){return!1}}class gn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vn.prototype.create)}}class vn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(yn,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new gn(n,i,t)}}const yn=/\{\$([^}]+)}/g;function xn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(bn(n)&&bn(i)){if(!xn(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function bn(e){return null!==e&&"object"===typeof e}function wn(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Nn(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function jn(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Sn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=_n),void 0===r.error&&(r.error=_n),void 0===r.complete&&(r.complete=_n);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Ve){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Ve){"undefined"!==typeof console&&console.error&&console.error(Ve)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _n(){}function kn(e){return e&&e._delegate?e._delegate:e}class En{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Cn="[DEFAULT]";class Tn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new hn;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Ve){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Ve){if(r)return null;throw Ve}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Cn})}catch(Ve){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Ve){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===Cn?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cn;return this.component?this.component.multipleInstances?e:Cn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class In{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Tn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const An=[];var Rn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Rn||(Rn={}));const Dn={debug:Rn.DEBUG,verbose:Rn.VERBOSE,info:Rn.INFO,warn:Rn.WARN,error:Rn.ERROR,silent:Rn.SILENT},Pn=Rn.INFO,On={[Rn.DEBUG]:"log",[Rn.VERBOSE]:"log",[Rn.INFO]:"info",[Rn.WARN]:"warn",[Rn.ERROR]:"error"},Ln=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=On[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class Mn{constructor(e){this.name=e,this._logLevel=Pn,this._logHandler=Ln,this._userLogHandler=null,An.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Dn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Rn.DEBUG,...t),this._logHandler(this,Rn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Rn.VERBOSE,...t),this._logHandler(this,Rn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Rn.INFO,...t),this._logHandler(this,Rn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Rn.WARN,...t),this._logHandler(this,Rn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Rn.ERROR,...t),this._logHandler(this,Rn.ERROR,...t)}}let Fn,Un;const Vn=new WeakMap,zn=new WeakMap,qn=new WeakMap,Bn=new WeakMap,Qn=new WeakMap;let Hn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return zn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||qn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Wn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Un||(Un=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Xn(this),n),Gn(Vn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Gn(e.apply(Xn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(Xn(this),t,...r);return qn.set(i,t.sort?t.sort():[t]),Gn(i)}}function Kn(e){return"function"===typeof e?Wn(e):(e instanceof IDBTransaction&&function(e){if(zn.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});zn.set(e,t)}(e),t=e,(Fn||(Fn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Hn):e);var t}function Gn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(Gn(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&Vn.set(t,e)}).catch(()=>{}),Qn.set(t,e),t}(e);if(Bn.has(e))return Bn.get(e);const t=Kn(e);return t!==e&&(Bn.set(e,t),Qn.set(t,e)),t}const Xn=e=>Qn.get(e);const $n=["get","getKey","getAll","getAllKeys","count"],Yn=["put","add","delete","clear"],Jn=new Map;function Zn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Jn.get(t))return Jn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Yn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!$n.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return Jn.set(t,i),i}Hn=(e=>Ue(Ue({},e),{},{get:(t,n,r)=>Zn(t,n)||e.get(t,n,r),has:(t,n)=>!!Zn(t,n)||e.has(t,n)}))(Hn);class er{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const tr="@firebase/app",nr="0.10.13",rr=new Mn("@firebase/app"),sr="@firebase/app-compat",ir="@firebase/analytics-compat",ar="@firebase/analytics",or="@firebase/app-check-compat",lr="@firebase/app-check",cr="@firebase/auth",ur="@firebase/auth-compat",dr="@firebase/database",hr="@firebase/data-connect",fr="@firebase/database-compat",mr="@firebase/functions",pr="@firebase/functions-compat",gr="@firebase/installations",vr="@firebase/installations-compat",yr="@firebase/messaging",xr="@firebase/messaging-compat",br="@firebase/performance",wr="@firebase/performance-compat",Nr="@firebase/remote-config",jr="@firebase/remote-config-compat",Sr="@firebase/storage",_r="@firebase/storage-compat",kr="@firebase/firestore",Er="@firebase/vertexai-preview",Cr="@firebase/firestore-compat",Tr="firebase",Ir="[DEFAULT]",Ar={[tr]:"fire-core",[sr]:"fire-core-compat",[ar]:"fire-analytics",[ir]:"fire-analytics-compat",[lr]:"fire-app-check",[or]:"fire-app-check-compat",[cr]:"fire-auth",[ur]:"fire-auth-compat",[dr]:"fire-rtdb",[hr]:"fire-data-connect",[fr]:"fire-rtdb-compat",[mr]:"fire-fn",[pr]:"fire-fn-compat",[gr]:"fire-iid",[vr]:"fire-iid-compat",[yr]:"fire-fcm",[xr]:"fire-fcm-compat",[br]:"fire-perf",[wr]:"fire-perf-compat",[Nr]:"fire-rc",[jr]:"fire-rc-compat",[Sr]:"fire-gcs",[_r]:"fire-gcs-compat",[kr]:"fire-fst",[Cr]:"fire-fst-compat",[Er]:"fire-vertex","fire-js":"fire-js",[Tr]:"fire-js-all"},Rr=new Map,Dr=new Map,Pr=new Map;function Or(e,t){try{e.container.addComponent(t)}catch(Ve){rr.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Ve)}}function Lr(e){const t=e.name;if(Pr.has(t))return rr.debug("There were multiple attempts to register component ".concat(t,".")),!1;Pr.set(t,e);for(const n of Rr.values())Or(n,e);for(const n of Dr.values())Or(n,e);return!0}function Mr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Fr(e){return void 0!==e.settings}const Ur=new vn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Vr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new En("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ur.create("app-deleted",{appName:this._name})}}const zr="10.14.1";function qr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Ir,automaticDataCollectionEnabled:!1},t),s=r.name;if("string"!==typeof s||!s)throw Ur.create("bad-app-name",{appName:String(s)});if(n||(n=un()),!n)throw Ur.create("no-options");const i=Rr.get(s);if(i){if(xn(n,i.options)&&xn(r,i.config))return i;throw Ur.create("duplicate-app",{appName:s})}const a=new In(s);for(const l of Pr.values())a.addComponent(l);const o=new Vr(n,r,a);return Rr.set(s,o),o}function Br(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ir;const t=Rr.get(e);if(!t&&e===Ir&&un())return qr();if(!t)throw Ur.create("no-app",{appName:e});return t}function Qr(e,t,n){var r;let s=null!==(r=Ar[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),i&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void rr.warn(e.join(" "))}Lr(new En("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const Hr="firebase-heartbeat-store";let Wr=null;function Kr(){return Wr||(Wr=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=Gn(a);return r&&a.addEventListener("upgradeneeded",e=>{r(Gn(a.result),e.oldVersion,e.newVersion,Gn(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Hr)}catch(Ve){console.warn(Ve)}}}).catch(e=>{throw Ur.create("idb-open",{originalErrorMessage:e.message})})),Wr}async function Gr(e,t){try{const n=(await Kr()).transaction(Hr,"readwrite"),r=n.objectStore(Hr);await r.put(t,Xr(e)),await n.done}catch(Ve){if(Ve instanceof gn)rr.warn(Ve.message);else{const t=Ur.create("idb-set",{originalErrorMessage:null===Ve||void 0===Ve?void 0:Ve.message});rr.warn(t.message)}}}function Xr(e){return"".concat(e.name,"!").concat(e.options.appId)}class $r{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Jr(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Yr();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(Ve){rr.warn(Ve)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Yr(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),Zr(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Zr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=sn(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(Ve){return rr.warn(Ve),""}}}function Yr(){return(new Date).toISOString().substring(0,10)}class Jr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!pn()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Kr()).transaction(Hr),n=await t.objectStore(Hr).get(Xr(e));return await t.done,n}catch(Ve){if(Ve instanceof gn)rr.warn(Ve.message);else{const t=Ur.create("idb-get",{originalErrorMessage:null===Ve||void 0===Ve?void 0:Ve.message});rr.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Gr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Gr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Zr(e){return sn(JSON.stringify({version:2,heartbeats:e})).length}var es;es="",Lr(new En("platform-logger",e=>new er(e),"PRIVATE")),Lr(new En("heartbeat",e=>new $r(e),"PRIVATE")),Qr(tr,nr,es),Qr(tr,nr,"esm2017"),Qr("fire-js","");Qr("firebase","10.14.1","app");function ts(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function ns(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rs=ns,ss=new vn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),is=new Mn("@firebase/auth");function as(e){if(is.logLevel<=Rn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];is.error("Auth (".concat(zr,"): ").concat(e),...n)}}function os(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ds(e,...n)}function ls(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ds(e,...n)}function cs(e,t,n){const r=Object.assign(Object.assign({},rs()),{[t]:n});return new vn("auth","Firebase",r).create(t,{appName:e.name})}function us(e){return cs(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ds(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return ss.create(e,...n)}function hs(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw ds(t,...r)}}function fs(e){const t="INTERNAL ASSERTION FAILED: "+e;throw as(t),new Error(t)}function ms(e,t){e||fs(t)}function ps(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function gs(){return"http:"===vs()||"https:"===vs()}function vs(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function ys(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(gs()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class xs{constructor(e,t){this.shortDelay=e,this.longDelay=t,ms(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return ys()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function bs(e,t){ms(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class ws{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ns={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},js=new xs(3e4,6e4);function Ss(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function _s(e,t,n,r){return ks(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=wn(Object.assign({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),ws.fetch()(Cs(e,e.config.apiHost,n,a),l)})}async function ks(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ns),t);try{const t=new Is(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw As(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw As(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw As(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw As(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw cs(e,o,a);os(e,o)}}catch(Ve){if(Ve instanceof gn)throw Ve;os(e,"network-request-failed",{message:String(Ve)})}}async function Es(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await _s(e,t,n,r,s);return"mfaPendingCredential"in i&&os(e,"multi-factor-auth-required",{_serverResponse:i}),i}function Cs(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r);return e.config.emulator?bs(e.config,s):"".concat(e.config.apiScheme,"://").concat(s)}function Ts(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Is{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(ls(this.auth,"network-request-failed")),js.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function As(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ls(e,t,r);return s.customData._tokenResponse=n,s}function Rs(e){return void 0!==e&&void 0!==e.enterprise}class Ds{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ts(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Ps(e,t){return _s(e,"GET","/v2/recaptchaConfig",Ss(e,t))}async function Os(e,t){return _s(e,"POST","/v1/accounts:lookup",t)}function Ls(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Ve){}}function Ms(e){return 1e3*Number(e)}function Fs(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return as("JWT malformed, contained fewer than 3 sections"),null;try{const e=an(n);return e?JSON.parse(e):(as("Failed to decode base64 JWT payload"),null)}catch(Ve){return as("Caught error parsing JWT payload as JSON",null===Ve||void 0===Ve?void 0:Ve.toString()),null}}function Us(e){const t=Fs(e);return hs(t,"internal-error"),hs("undefined"!==typeof t.exp,"internal-error"),hs("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Vs(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Ve){throw Ve instanceof gn&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(Ve)&&e.auth.currentUser===e&&await e.auth.signOut(),Ve}}class zs{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Ve){return void((null===Ve||void 0===Ve?void 0:Ve.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class qs{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ls(this.lastLoginAt),this.creationTime=Ls(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Bs(e){var t;const n=e.auth,r=await e.getIdToken(),s=await Vs(e,Os(n,{idToken:r}));hs(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?Qs(i.providerUserInfo):[],o=function(e,t){const n=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...n,...t]}(e.providerData,a),l=e.isAnonymous,c=!(e.email&&i.passwordHash)&&!(null===o||void 0===o?void 0:o.length),u=!!l&&c,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new qs(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function Qs(e){return e.map(e=>{var{providerId:t}=e,n=ts(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Hs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){hs(e.idToken,"internal-error"),hs("undefined"!==typeof e.idToken,"internal-error"),hs("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Us(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){hs(0!==e.length,"internal-error");const t=Us(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(hs(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await ks(e,{},async()=>{const n=wn({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=Cs(e,r,"/v1/token","key=".concat(s)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ws.fetch()(i,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new Hs;return n&&(hs("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(hs("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(hs("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Hs,this.toJSON())}_performRefresh(){return fs("not implemented")}}function Ws(e,t){hs("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Ks{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=ts(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new qs(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Vs(this,this.stsTokenManager.getToken(this.auth,e));return hs(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=kn(e),r=await n.getIdToken(t),s=Fs(r);hs(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ls(Ms(s.auth_time)),issuedAtTime:Ls(Ms(s.iat)),expirationTime:Ls(Ms(s.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=kn(e);await Bs(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(hs(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ks(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){hs(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Bs(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fr(this.auth.app))return Promise.reject(us(this.auth));const e=await this.getIdToken();return await Vs(this,async function(e,t){return _s(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,p=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:x,isAnonymous:b,providerData:w,stsTokenManager:N}=t;hs(y&&N,e,"internal-error");const j=Hs.fromJSON(this.name,N);hs("string"===typeof y,e,"internal-error"),Ws(u,e.name),Ws(d,e.name),hs("boolean"===typeof x,e,"internal-error"),hs("boolean"===typeof b,e,"internal-error"),Ws(h,e.name),Ws(f,e.name),Ws(m,e.name),Ws(p,e.name),Ws(g,e.name),Ws(v,e.name);const S=new Ks({uid:y,auth:e,email:d,emailVerified:x,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:h,tenantId:m,stsTokenManager:j,createdAt:g,lastLoginAt:v});return w&&Array.isArray(w)&&(S.providerData=w.map(e=>Object.assign({},e))),p&&(S._redirectEventId=p),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Hs;r.updateFromServerResponse(t);const s=new Ks({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Bs(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];hs(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?Qs(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),a=new Hs;a.updateFromIdToken(n);const o=new Ks({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new qs(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(o,l),o}}const Gs=new Map;function Xs(e){ms(e instanceof Function,"Expected a class definition");let t=Gs.get(e);return t?(ms(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Gs.set(e,t),t)}class $s{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$s.type="NONE";const Ys=$s;function Js(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Zs{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=Js(this.userKey,r.apiKey,s),this.fullPersistenceKey=Js("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ks._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Zs(Xs(Ys),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||Xs(Ys);const i=Js(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){const n=Ks._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(l){}})),new Zs(s,e,n)):new Zs(s,e,n)}}function ei(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(si(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ti(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ai(t))return"Blackberry";if(oi(t))return"Webos";if(ni(t))return"Safari";if((t.includes("chrome/")||ri(t))&&!t.includes("edge/"))return"Chrome";if(ii(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ti(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn();return/firefox\//i.test(e)}function ni(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ri(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn();return/crios\//i.test(e)}function si(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn();return/iemobile/i.test(e)}function ii(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn();return/android/i.test(e)}function ai(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn();return/blackberry/i.test(e)}function oi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn();return/webos/i.test(e)}function li(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ci(){return function(){const e=fn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function ui(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn();return li(e)||ii(e)||oi(e)||ai(e)||/windows phone/i.test(e)||si(e)}function di(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ei(fn());break;case"Worker":t="".concat(ei(fn()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(zr,"/").concat(r)}class hi{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(Ve){r(Ve)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Ve){t.reverse();for(const n of t)try{n()}catch(kt){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Ve||void 0===Ve?void 0:Ve.message})}}}class fi{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class mi{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gi(this),this.idTokenSubscription=new gi(this),this.beforeStateQueue=new hi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ss,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xs(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Zs.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Ve){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Os(this,{idToken:e}),n=await Ks._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Fr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null===a||void 0===a?void 0:a.user)||(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(Ve){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Ve))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return hs(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Ve){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Bs(e)}catch(Ve){if((null===Ve||void 0===Ve?void 0:Ve.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fr(this.app))return Promise.reject(us(this));const t=e?kn(e):null;return t&&hs(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&hs(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fr(this.app)?Promise.reject(us(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fr(this.app)?Promise.reject(us(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xs(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return _s(e,"GET","/v2/passwordPolicy",Ss(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new fi(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new vn("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return _s(e,"POST","/v2/accounts:revokeToken",Ss(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xs(e)||this._popupRedirectResolver;hs(t,this,"argument-error"),this.redirectPersistenceManager=await Zs.create(this,[Xs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(hs(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return hs(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=di(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(is.logLevel<=Rn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];is.warn("Auth (".concat(zr,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function pi(e){return kn(e)}class gi{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Sn(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return hs(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let vi={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yi(e){return vi.loadJS(e)}function xi(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class bi{constructor(e){this.type="recaptcha-enterprise",this.auth=pi(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;Rs(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Ps(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Ds(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&Rs(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=vi.recaptchaEnterpriseScript;0!==t.length&&(t+=s),yi(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function wi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=new bi(e);let i;try{i=await s.verify(n)}catch(o){i=await s.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ni(e,t,n,r){var s;if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await wi(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await wi(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}function ji(e,t,n){const r=pi(e);hs(r._canInitEmulator,r,"emulator-config-failed"),hs(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),i=Si(t),{host:a,port:o}=function(e){const t=Si(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:_i(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:_i(t)}}}(t),l=null===o?"":":".concat(o);r.config.emulator={url:"".concat(i,"//").concat(a).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Si(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function _i(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ki{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return fs("not implemented")}_getIdTokenResponse(e){return fs("not implemented")}_linkToIdToken(e,t){return fs("not implemented")}_getReauthenticationResolver(e){return fs("not implemented")}}async function Ei(e,t){return _s(e,"POST","/v1/accounts:signUp",t)}async function Ci(e,t){return Es(e,"POST","/v1/accounts:signInWithPassword",Ss(e,t))}class Ti extends ki{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ti(e,t,"password")}static _fromEmailAndCode(e,t){return new Ti(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ni(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ci);case"emailLink":return async function(e,t){return Es(e,"POST","/v1/accounts:signInWithEmailLink",Ss(e,t))}(e,{email:this._email,oobCode:this._password});default:os(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ni(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ei);case"emailLink":return async function(e,t){return Es(e,"POST","/v1/accounts:signInWithEmailLink",Ss(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:os(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ii(e,t){return Es(e,"POST","/v1/accounts:signInWithIdp",Ss(e,t))}class Ai extends ki{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ai(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):os("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=ts(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new Ai(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return Ii(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ii(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ii(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wn(t)}return e}}const Ri={USER_NOT_FOUND:"user-not-found"};class Di extends ki{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Di({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Di({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Es(e,"POST","/v1/accounts:signInWithPhoneNumber",Ss(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Es(e,"POST","/v1/accounts:signInWithPhoneNumber",Ss(e,t));if(n.temporaryProof)throw As(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Es(e,"POST","/v1/accounts:signInWithPhoneNumber",Ss(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Ri)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new Di({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class Pi{constructor(e){var t,n,r,s,i,a;const o=Nn(jn(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);hs(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.languageCode)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=Nn(jn(e)).link,n=t?Nn(jn(t)).deep_link_id:null,r=Nn(jn(e)).deep_link_id;return(r?Nn(jn(r)).link:null)||r||n||t||e}(e);try{return new Pi(t)}catch(n){return null}}}class Oi{constructor(){this.providerId=Oi.PROVIDER_ID}static credential(e,t){return Ti._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Pi.parseLink(t);return hs(n,"argument-error"),Ti._fromEmailAndCode(e,n.code,n.tenantId)}}Oi.PROVIDER_ID="password",Oi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Oi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Li{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Mi extends Li{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Fi extends Mi{constructor(){super("facebook.com")}static credential(e){return Ai._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Fi.credential(t.oauthAccessToken)}catch(n){return null}}}Fi.FACEBOOK_SIGN_IN_METHOD="facebook.com",Fi.PROVIDER_ID="facebook.com";class Ui extends Mi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ai._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ui.credential(n,r)}catch(s){return null}}}Ui.GOOGLE_SIGN_IN_METHOD="google.com",Ui.PROVIDER_ID="google.com";class Vi extends Mi{constructor(){super("github.com")}static credential(e){return Ai._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Vi.credential(t.oauthAccessToken)}catch(n){return null}}}Vi.GITHUB_SIGN_IN_METHOD="github.com",Vi.PROVIDER_ID="github.com";class zi extends Mi{constructor(){super("twitter.com")}static credential(e,t){return Ai._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return zi.credential(n,r)}catch(s){return null}}}async function qi(e,t){return Es(e,"POST","/v1/accounts:signUp",Ss(e,t))}zi.TWITTER_SIGN_IN_METHOD="twitter.com",zi.PROVIDER_ID="twitter.com";class Bi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await Ks._fromIdTokenResponse(e,n,r),i=Qi(n);return new Bi({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Qi(n);return new Bi({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Qi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Hi extends gn{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Hi.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Hi(e,t,n,r)}}function Wi(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Hi._fromErrorAndOperation(e,n,t,r);throw n})}async function Ki(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Vs(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Bi._forOperation(e,"link",r)}async function Gi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Fr(r.app))return Promise.reject(us(r));const s="reauthenticate";try{const i=await Vs(e,Wi(r,s,t,e),n);hs(i.idToken,r,"internal-error");const a=Fs(i.idToken);hs(a,r,"internal-error");const{sub:o}=a;return hs(e.uid===o,r,"user-mismatch"),Bi._forOperation(e,s,i)}catch(Ve){throw(null===Ve||void 0===Ve?void 0:Ve.code)==="auth/".concat("user-not-found")&&os(r,"user-mismatch"),Ve}}async function Xi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Fr(e.app))return Promise.reject(us(e));const r="signIn",s=await Wi(e,r,t),i=await Bi._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function $i(e,t){return Xi(pi(e),t)}async function Yi(e){const t=pi(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Ji(e,t,n){if(Fr(e.app))return Promise.reject(us(e));const r=pi(e),s=Ni(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qi),i=await s.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Yi(e),t}),a=await Bi._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}function Zi(e,t,n){return Fr(e.app)?Promise.reject(us(e)):$i(kn(e),Oi.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Yi(e),t})}new WeakMap;const ea="__sak";class ta{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ea,"1"),this.storage.removeItem(ea),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class na extends ta{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ui(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);ci()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}na.type="LOCAL";const ra=na;class sa extends ta{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}sa.type="SESSION";const ia=sa;class aa{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new aa(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function oa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}aa.receivers=[];class la{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=oa("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function ca(){return window}function ua(){return"undefined"!==typeof ca().WorkerGlobalScope&&"function"===typeof ca().importScripts}const da="firebaseLocalStorageDb",ha="firebaseLocalStorage",fa="fbase_key";class ma{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function pa(e,t){return e.transaction([ha],t?"readwrite":"readonly").objectStore(ha)}function ga(){const e=indexedDB.open(da,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(ha,{keyPath:fa})}catch(Ve){n(Ve)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(ha)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(da);return new ma(e).toPromise()}(),t(await ga()))})})}async function va(e,t,n){const r=pa(e,!0).put({[fa]:t,value:n});return new ma(r).toPromise()}function ya(e,t){const n=pa(e,!0).delete(t);return new ma(n).toPromise()}class xa{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await ga()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Ve){if(t++>3)throw Ve;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ua()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=aa._getInstance(ua()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new la(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ga();return await va(e,ea,"1"),await ya(e,ea),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>va(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=pa(e,!1).get(t),r=await new ma(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ya(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=pa(e,!1).getAll();return new ma(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}xa.type="LOCAL";const ba=xa;xi("rcb"),new xs(3e4,6e4);const wa="recaptcha";async function Na(e,t,n){var r;const s=await n.verify();try{let i;if(hs("string"===typeof s,e,"argument-error"),hs(n.type===wa,e,"argument-error"),i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){hs("enroll"===t.type,e,"internal-error");const n=await function(e,t){return _s(e,"POST","/v2/accounts/mfaEnrollment:start",Ss(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{hs("signin"===t.type,e,"internal-error");const n=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;hs(n,e,"missing-multi-factor-info");const a=await function(e,t){return _s(e,"POST","/v2/accounts/mfaSignIn:start",Ss(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return _s(e,"POST","/v1/accounts:sendVerificationCode",Ss(e,t))}(e,{phoneNumber:i.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}class ja{constructor(e){this.providerId=ja.PROVIDER_ID,this.auth=pi(e)}verifyPhoneNumber(e,t){return Na(this.auth,e,kn(t))}static credential(e,t){return Di._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ja.credentialFromTaggedObject(t)}static credentialFromError(e){return ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Di._fromTokenResponse(n,r):null}}function Sa(e,t){return t?Xs(t):(hs(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ja.PROVIDER_ID="phone",ja.PHONE_SIGN_IN_METHOD="phone";class _a extends ki{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ii(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ii(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ii(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ka(e){return Xi(e.auth,new _a(e),e.bypassAuthState)}function Ea(e){const{auth:t,user:n}=e;return hs(n,t,"internal-error"),Gi(n,new _a(e),e.bypassAuthState)}async function Ca(e){const{auth:t,user:n}=e;return hs(n,t,"internal-error"),Ki(n,new _a(e),e.bypassAuthState)}class Ta{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Ve){this.reject(Ve)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(Ve){this.reject(Ve)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ka;case"linkViaPopup":case"linkViaRedirect":return Ca;case"reauthViaPopup":case"reauthViaRedirect":return Ea;default:os(this.auth,"internal-error")}}resolve(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ia=new xs(2e3,1e4);class Aa extends Ta{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,Aa.currentPopupAction&&Aa.currentPopupAction.cancel(),Aa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return hs(e,this.auth,"internal-error"),e}async onExecution(){ms(1===this.filter.length,"Popup operations only handle one event");const e=oa();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ls(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(ls(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Aa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ls(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Ia.get())};e()}}Aa.currentPopupAction=null;const Ra=new Map;class Da extends Ta{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Ra.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=La(t),r=Oa(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Ve){e=()=>Promise.reject(Ve)}Ra.set(this.auth._key(),e)}return this.bypassAuthState||Ra.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Pa(e,t){Ra.set(e._key(),t)}function Oa(e){return Xs(e._redirectPersistence)}function La(e){return Js("pendingRedirect",e.config.apiKey,e.name)}async function Ma(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Fr(e.app))return Promise.reject(us(e));const r=pi(e),s=Sa(r,t),i=new Da(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Fa{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Va(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Va(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ls(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ua(e))}saveEventToCache(e){this.cachedEventUids.add(Ua(e)),this.lastProcessedEventTime=Date.now()}}function Ua(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Va(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const za=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qa=/^https?/;async function Ba(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return _s(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Qa(r))return}catch(n){}os(e,"unauthorized-domain")}function Qa(e){const t=ps(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!qa.test(n))return!1;if(za.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const Ha=new xs(3e4,6e4);function Wa(){const e=ca().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ka(e){return new Promise((t,n)=>{var r,s,i;function a(){Wa(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Wa(),n(ls(e,"network-request-failed"))},timeout:Ha.get()})}if(null===(s=null===(r=ca().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=ca().gapi)||void 0===i?void 0:i.load)){const t=xi("iframefcb");return ca()[t]=()=>{gapi.load?a():n(ls(e,"network-request-failed"))},yi("".concat(vi.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw Ga=null,e})}let Ga=null;const Xa=new xs(5e3,15e3),$a={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ya=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ja(e){const t=e.config;hs(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?bs(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:zr},s=Ya.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(wn(r).slice(1))}async function Za(e){const t=await function(e){return Ga=Ga||Ka(e),Ga}(e),n=ca().gapi;return hs(n,e,"internal-error"),t.open({where:document.body,url:Ja(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$a,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=ls(e,"network-request-failed"),i=ca().setTimeout(()=>{r(s)},Xa.get());function a(){ca().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}const eo={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class to{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Ve){}}}function no(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},eo),{width:r.toString(),height:s.toString(),top:i,left:a}),c=fn().toLowerCase();n&&(o=ri(c)?"_blank":n),ti(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return li(arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new to(null);const d=window.open(t||"",o,u);hs(d,e,"popup-blocked");try{d.focus()}catch(Ve){}return new to(d)}const ro="__/auth/handler",so="emulator/auth/handler",io=encodeURIComponent("fac");async function ao(e,t,n,r,s,i){hs(e.config.authDomain,e,"auth-domain-config-required"),hs(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:zr,eventId:s};if(t instanceof Li){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof Mi){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(io,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(ro);return bs(t,so)}(e),"?").concat(wn(o).slice(1)).concat(c)}const oo="webStorageSupport";const lo=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ia,this._completeRedirectFn=Ma,this._overrideRedirectResult=Pa}async _openPopup(e,t,n,r){var s;ms(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return no(e,await ao(e,t,n,ps(),r),oa())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){ca().location.href=e}(await ao(e,t,n,ps(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(ms(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Za(e),n=new Fa(e);return t.register("authEvent",t=>{hs(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(oo,{type:oo},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[oo];void 0!==s&&t(!!s),os(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ba(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ui()||ni()||li()}};var co="@firebase/auth",uo="1.7.9";class ho{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){hs(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const fo=dn("authIdTokenMaxAge")||300;let mo=null;var po;!function(e){vi=e}({loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=ls("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),po="Browser",Lr(new En("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;hs(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:po,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:di(po)},c=new mi(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xs);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Lr(new En("auth-internal",e=>(e=>new ho(e))(pi(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Qr(co,uo,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(po)),Qr(co,uo,"esm2017");var go,vo,yo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},xo={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function i(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new p(o,o);if(d(e))return t=g(h(e),t),new p(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new p(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var s=y(n,1),i=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=i.add(r);0>=c.l(e)&&(s=s.add(n),i=c),r=y(r,1),n=y(n,1)}return t=f(e,s.j(t)),new p(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(i=a(n)).j(t);d(c)||0<c.l(e);)c=(i=a(n-=r)).j(t);u(i)&&(i=l),s=s.add(i),e=f(e,c)}return new p(s,e)}function v(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],a=0;a<s;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var s=g(n,t).g,i=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var a=s+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);s=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var l=this.i(s)>>>16,f=65535&this.i(s),p=e.i(i)>>>16,g=65535&e.i(i);n[2*s+2*i]+=f*g,m(n,2*s+2*i),n[2*s+2*i+1]+=l*g,m(n,2*s+2*i+1),n[2*s+2*i+1]+=f*p,m(n,2*s+2*i+1),n[2*s+2*i+2]+=l*p,m(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,vo=xo.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),s=o,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),n);8>l?(l=a(Math.pow(n,l)),s=s.j(l).add(a(c))):s=(s=s.j(r)).add(a(c))}return s},go=xo.Integer=r}).apply("undefined"!==typeof yo?yo:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var bo,wo,No,jo,So,_o,ko,Eo,Co="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},To={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Co&&Co];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function m(e){return/^[\s\xa0]*$/.test(e)}function p(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=p().indexOf("Gecko")&&!(-1!=p().toLowerCase().indexOf("webkit")&&-1==p().indexOf("Edge"))&&!(-1!=p().indexOf("Trident")||-1!=p().indexOf("MSIE"))&&-1==p().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function x(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function N(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function j(e){s.setTimeout(()=>{throw e},0)}function S(){var e=T;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new k,e=>e.reset());class k{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let E,C=!1,T=new class{constructor(){this.h=this.g=null}add(e,t){const n=_.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},I=()=>{const e=s.Promise.resolve(void 0);E=()=>{e.then(A)}};var A=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(We){j(We)}var t=_;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function R(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(We){}return e}();function O(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var s=!0;break e}catch(Ye){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&O.aa.h.call(this)}}d(O,D);var L={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++F,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function q(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function B(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}z.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=B(e,t,r,s);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new U(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var Q="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,n,r,s){if(r&&r.once)return G(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)W(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,s):K(e,t,n,!1,r,s)}function K(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=Z(e);if(l||(e[Q]=l=new z(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)P||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(Y(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)G(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,s):K(e,t,n,!0,r,s)}function X(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)X(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=B(i=e.g[t],n,r,s))&&(V(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=B(t,n,r,s)),(n=-1<e?t[e]:null)&&$(n))}function $(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])q(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Y(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(q(n,e),0==n.h&&(n.src=null,t[Q]=null)):V(e)}}}function Y(e){return e in H?H[e]:H[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new O(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&$(e),e=n.call(r,t)}return e}function Z(e){return(e=e[Q])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var s=t;w(t=new D(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=se(a,r,!0,t)&&s}if(s=se(a=t.g=e,r,!0,t)&&s,s=se(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=se(a=t.g=n[i],r,!1,t)&&s}function se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&q(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function ie(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ae(e){e.g=ie(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,R),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){X(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){R.call(this),this.h=e,this.g={}}d(le,R);var ce=[];function ue(e){y(e.g,function(e,t){this.g.hasOwnProperty(t)&&$(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=s.JSON.stringify,he=s.JSON.parse,fe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function me(){}function pe(e){return e.h||(e.h=e.i())}function ge(){}me.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){D.call(this,"d")}function xe(){D.call(this,"c")}d(ye,D),d(xe,D);var be={},we=null;function Ne(){return we=we||new ne}function je(e){D.call(this,be.La,e)}function Se(e){const t=Ne();re(t,new je(t))}function _e(e,t){D.call(this,be.STAT_EVENT,e),this.stat=t}function ke(e){const t=Ne();re(t,new _e(t,e))}function Ee(e,t){D.call(this,be.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Te(){this.g=!0}function Ie(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}be.La="serverreachability",d(je,D),be.STAT_EVENT="statevent",d(_e,D),be.Ma="timingevent",d(Ee,D),Te.prototype.xa=function(){this.g=!1},Te.prototype.info=function(){};var Ae,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Pe(){}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}d(Pe,me),Pe.prototype.g=function(){return new XMLHttpRequest},Pe.prototype.i=function(){return{}},Ae=new Pe;var Me={},Fe={};function Ue(e,t,n){e.L=1,e.v=vt(ht(t)),e.m=n,e.P=!0,ze(e,null)}function ze(e,t){e.F=Date.now(),Ke(e),e.A=ht(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),It(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=xn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ce[0]=s.toString()),s=ce);for(var i=0;i<s.length;i++){var a=W(n,s[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?x(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Qe(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function He(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function Ke(e){e.S=Date.now()+e.I,Ge(e,e.I)}function Ge(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(c(e.ba,e),t)}function Xe(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function Je(e){0==e.j.G||e.J||mn(e.j,e)}function Ze(e){Xe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function et(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||it(n.h,e)))if(!e.K&&it(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(qe){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;fn(n),nn(n)}un(n),ke(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(c(n.Za,n),6e3));if(1>=st(n.h)&&n.ca){try{n.ca()}catch(qe){}n.ca=void 0}}else gn(n,11)}else if((e.K||n.g==e)&&fn(n),!m(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(at(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,gt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=yn(r,r.J?r.ia:null,r.W),a.K){ot(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(Xe(o),Ke(o)),r.g=a}else cn(r);0<n.i.length&&sn(n)}else"stop"!=c[0]&&"close"!=c[0]||gn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?gn(n,7):tn(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Se()}catch(qe){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Yt(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const h=Yt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Jt(this.g)))){this.J||4!=h||7==t||Se(),Xe(this);var n=this.g.Z();this.X=n;t:if(Qe(this)){var r=Jt(this.g);e="";var i=r.length,a=4==Yt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ze(this),Je(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,ke(12),Ze(this),Je(this);break e}Ie(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,et(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=He(this,o),e==Fe){4==h&&(this.s=4,ke(14),n=!1),Ie(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,ke(15),Ie(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ie(this.i,this.l,e,null),et(this,e)}if(Qe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,ke(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),dn(d),d.M=!0,ke(11))}}else Ie(this.i,this.l,o,"[Invalid Chunked Response]"),Ze(this),Je(this)}else Ie(this.i,this.l,o,null),et(this,o);4==h&&Ze(this),this.o&&!this.J&&(4==h?mn(this.j,this):(this.o=!1,Ke(this)))}else(function(e){const t={};e=(e.g&&2<=Yt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(m(e[r]))continue;var n=N(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),Ze(this),Je(this)}}}catch(At){}},Oe.prototype.cancel=function(){this.J=!0,Ze(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Se(),ke(17)),Ze(this),this.s=2,Je(this)):Ge(this,this.S-e)};var tt=class{constructor(e,t){this.g=e,this.map=t}};function nt(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rt(e){return!!e.h||!!e.g&&e.g.size>=e.j}function st(e){return e.h?1:e.g?e.g.size:0}function it(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function at(e,t){e.g?e.g.add(t):e.h=t}function ot(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function lt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function ct(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,a=0;a<s;a++)t.call(void 0,r[a],n&&n[a],e)}nt.prototype.cancel=function(){if(this.i=lt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ut=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof dt){this.h=e.h,ft(this,e.j),this.o=e.o,this.g=e.g,mt(this,e.s),this.l=e.l;var t=e.i,n=new kt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),pt(this,n),this.m=e.m}else e&&(t=String(e).match(ut))?(this.h=!1,ft(this,t[1]||"",!0),this.o=yt(t[2]||""),this.g=yt(t[3]||"",!0),mt(this,t[4]),this.l=yt(t[5]||"",!0),pt(this,t[6]||"",!0),this.m=yt(t[7]||"")):(this.h=!1,this.i=new kt(null,this.h))}function ht(e){return new dt(e)}function ft(e,t,n){e.j=n?yt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function mt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function pt(e,t,n){t instanceof kt?(e.i=t,function(e,t){t&&!e.j&&(Et(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Ct(this,t),It(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=xt(t,St)),e.i=new kt(t,e.h))}function gt(e,t,n){e.i.set(t,n)}function vt(e){return gt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function yt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function xt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,bt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function bt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}dt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(xt(t,wt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(xt(t,wt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(xt(n,"/"==n.charAt(0)?jt:Nt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",xt(n,_t)),e.join("")};var wt=/[#\/\?@]/g,Nt=/[#\?:]/g,jt=/[#\?]/g,St=/[#\?@]/g,_t=/#/g;function kt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Et(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Ct(e,t){Et(e),t=Rt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Tt(e,t){return Et(e),t=Rt(e,t),e.g.has(t)}function It(e,t,n){Ct(e,t),0<n.length&&(e.i=null,e.g.set(Rt(e,t),h(n)),e.h+=n.length)}function Rt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Dt(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(Ye){}}function Pt(){this.g=new fe}function Ot(e,t,n){const r=n||"";try{ct(e,function(e,n){let s=e;a(e)&&(s=de(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(Ve){throw t.push(r+"type="+encodeURIComponent("_badmap")),Ve}}function Lt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Mt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Ft(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ut(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Vt(e)}function Vt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function zt(e){let t="";return y(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function qt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=zt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):gt(e,t,n))}function Bt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=kt.prototype).add=function(e,t){Et(this),this.i=null,e=Rt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Et(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Et(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){Et(this);let t=[];if("string"===typeof e)Tt(this,e)&&(t=t.concat(this.g.get(Rt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Et(this),this.i=null,Tt(this,e=Rt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")},d(Lt,me),Lt.prototype.g=function(){return new Mt(this.l,this.j)},Lt.prototype.i=function(e){return function(){return e}}({}),d(Mt,ne),(e=Mt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Vt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ut(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Vt(this)),this.g&&(this.readyState=3,Vt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ft(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ut(this):Vt(this),3==this.readyState&&Ft(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ut(this))},e.Qa=function(e){this.g&&(this.response=e,Ut(this))},e.ga=function(){this.g&&Ut(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Mt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Bt,ne);var Qt=/^https?$/i,Ht=["POST","PUT"];function Wt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Kt(e),Xt(e)}function Kt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Gt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Yt(e)||2!=e.Z()))if(e.u&&4==Yt(e))ie(e.Ea,0,e);else if(re(e,"readystatechange"),4==Yt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(ut)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),i=!Qt.test(a?a.toLowerCase():"")}n=i}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Yt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Kt(e)}}finally{Xt(e)}}}function Xt(e,t){if(e.g){$t(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(Ve){}}}function $t(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function Yt(e){return e.g?e.g.readyState:0}function Jt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Zt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function en(e){this.Aa=0,this.i=[],this.j=new Te,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zt("baseRetryDelayMs",5e3,e),this.cb=Zt("retryDelaySeedMs",1e4,e),this.Wa=Zt("forwardChannelMaxRetries",2,e),this.wa=Zt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new nt(e&&e.concurrentRequestLimit),this.Da=new Pt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function tn(e){if(rn(e),3==e.G){var t=e.U++,n=ht(e.I);if(gt(n,"SID",e.K),gt(n,"RID",t),gt(n,"TYPE","terminate"),on(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=vt(ht(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch($e){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=xn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ke(t)}vn(e)}function nn(e){e.g&&(dn(e),e.g.cancel(),e.g=null)}function rn(e){nn(e),e.u&&(s.clearTimeout(e.u),e.u=null),fn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function sn(e){if(!rt(e.h)&&!e.s){e.s=!0;var t=e.Ga;E||I(),C||(E(),C=!0),T.add(t,e),e.B=0}}function an(e,t){var n;n=t?t.l:e.U++;const r=ht(e.I);gt(r,"SID",e.K),gt(r,"RID",n),gt(r,"AID",e.T),on(e,r),e.m&&e.o&&qt(r,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=ln(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),at(e.h,n),Ue(n,r,t)}function on(e,t){e.H&&y(e.H,function(e,n){gt(t,n,e)}),e.l&&ct({},function(e,n){gt(t,n,e)})}function ln(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let a=0;a<n;a++){let n=s[a].g;const o=s[a].map;if(n-=t,0>n)t=Math.max(0,s[a].g-100),i=!1;else try{Ot(o,e,"req"+n+"_")}catch(At){r&&r(o)}}if(i){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function cn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;E||I(),C||(E(),C=!0),T.add(t,e),e.v=0}}function un(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(c(e.Fa,e),pn(e,e.v)),e.v++,!0)}function dn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function hn(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ht(e.qa);gt(t,"RID","rpc"),gt(t,"SID",e.K),gt(t,"AID",e.T),gt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&gt(t,"TO",e.ja),gt(t,"TYPE","xmlhttp"),on(e,t),e.m&&e.o&&qt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=vt(ht(t)),n.m=null,n.P=!0,ze(n,e)}function fn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function mn(e,t){var n=null;if(e.g==t){fn(e),dn(e),e.g=null;var r=2}else{if(!it(e.h,t))return;n=t.D,ot(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;re(r=Ne(),new Ee(r,n)),sn(e)}else cn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(st(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(c(e.Ga,e,t),pn(e,e.B)),e.B++,!0))}(e,t)||2==r&&un(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:gn(e,5);break;case 4:gn(e,10);break;case 3:gn(e,6);break;default:gn(e,2)}}function pn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function gn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new dt(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ft(r,"https"),vt(r),t?function(e,t){const n=new Te;if(s.Image){const r=new Image;r.onload=u(Dt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Dt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Dt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Dt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Te;const n=new AbortController,r=setTimeout(()=>{n.abort(),Dt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Dt(0,0,!0,t):Dt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Dt(0,0,!1,t)})}(r.toString(),n)}else ke(2);e.G=0,e.l&&e.l.sa(t),vn(e),rn(e)}function vn(e){if(e.G=0,e.ka=[],e.l){const t=lt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function yn(e,t,n){var r=n instanceof dt?ht(n):new dt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),mt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new dt(null);r&&ft(a,r),t&&(a.g=t),i&&mt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&gt(r,n,t),gt(r,"VER",e.la),on(e,r),r}function xn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Bt(new Lt({eb:n})):new Bt(e.pa)).Ha(e.J),t}function bn(){}function wn(){}function Nn(e,t){ne.call(this),this.g=new en(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new _n(this)}function jn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Sn(){xe.call(this),this.status=1}function _n(e){this.g=e}(e=Bt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?pe(this.o):pe(Ae),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(Ye){return void Wt(this,Ye)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Ht,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$t(this),this.u=!0,this.g.send(e),this.u=!1}catch(Ye){Wt(this,Ye)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Xt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xt(this,!0)),Bt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Gt(this):this.bb())},e.bb=function(){Gt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Yt(this)?this.g.status:-1}catch(Be){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Be){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=en.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){ke(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=yn(this,null,this.W),sn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Oe(this,this.j,e);let i=this.o;if(this.S&&(i?(i=x(i),w(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=ln(this,s,t),gt(n=ht(this.I),"RID",e),gt(n,"CVER",22),this.D&&gt(n,"X-HTTP-Session-Id",this.D),on(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(zt(i)))+"&"+t:this.m&&qt(n,this.m,i)),at(this.h,s),this.Ua&&gt(n,"TYPE","init"),this.P?(gt(n,"$req",t),gt(n,"SID","null"),s.T=!0,Ue(s,n,null)):Ue(s,n,t),this.G=2}}else 3==this.G&&(e?an(this,e):0==this.i.length||rt(this.h)||an(this))},e.Fa=function(){if(this.u=null,hn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ke(10),nn(this),hn(this))},e.Za=function(){null!=this.C&&(this.C=null,nn(this),un(this),ke(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=bn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},wn.prototype.g=function(e,t){return new Nn(e,t)},d(Nn,ne),Nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){tn(this.g)},Nn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new tt(t.Ya++,e)),3==t.G&&sn(t)},Nn.prototype.N=function(){this.g.l=null,delete this.j,tn(this.g),delete this.g,Nn.aa.N.call(this)},d(jn,ye),d(Sn,xe),d(_n,bn),_n.prototype.ua=function(){re(this.g,"a")},_n.prototype.ta=function(e){re(this.g,new jn(e))},_n.prototype.sa=function(e){re(this.g,new Sn)},_n.prototype.ra=function(){re(this.g,"b")},wn.prototype.createWebChannel=wn.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,Eo=To.createWebChannelTransport=function(){return new wn},ko=To.getStatEventTarget=function(){return Ne()},_o=To.Event=be,So=To.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,jo=To.ErrorCode=Re,De.COMPLETE="complete",No=To.EventType=De,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,wo=To.WebChannel=ge,To.FetchXmlHttpFactory=Lt,Bt.prototype.listenOnce=Bt.prototype.L,Bt.prototype.getLastError=Bt.prototype.Ka,Bt.prototype.getLastErrorCode=Bt.prototype.Ba,Bt.prototype.getStatus=Bt.prototype.Z,Bt.prototype.getResponseJson=Bt.prototype.Oa,Bt.prototype.getResponseText=Bt.prototype.oa,Bt.prototype.send=Bt.prototype.ea,Bt.prototype.setWithCredentials=Bt.prototype.Ha,bo=To.XhrIo=Bt}).apply("undefined"!==typeof Co?Co:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Io="@firebase/firestore";class Ao{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ao.UNAUTHENTICATED=new Ao(null),Ao.GOOGLE_CREDENTIALS=new Ao("google-credentials-uid"),Ao.FIRST_PARTY=new Ao("first-party-uid"),Ao.MOCK_USER=new Ao("mock-user");let Ro="10.14.0";const Do=new Mn("@firebase/firestore");function Po(){return Do.logLevel}function Oo(e){if(Do.logLevel<=Rn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Fo);Do.debug("Firestore (".concat(Ro,"): ").concat(e),...s)}}function Lo(e){if(Do.logLevel<=Rn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Fo);Do.error("Firestore (".concat(Ro,"): ").concat(e),...s)}}function Mo(e){if(Do.logLevel<=Rn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Fo);Do.warn("Firestore (".concat(Ro,"): ").concat(e),...s)}}function Fo(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(ze){return e}}function Uo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Ro,") INTERNAL ASSERTION FAILED: ")+e;throw Lo(t),new Error(t)}function Vo(e,t){e||Uo()}function zo(e,t){return e}const qo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Bo extends gn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Qo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ho{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Wo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ao.UNAUTHENTICATED))}shutdown(){}}class Ko{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Go{constructor(e){this.t=e,this.currentUser=Ao.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Vo(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new Qo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Qo,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{Oo("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Oo("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Qo)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Oo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Vo("string"==typeof t.accessToken),new Ho(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Vo(null===e||"string"==typeof e),new Ao(e)}}class Xo{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ao.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class $o{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Xo(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ao.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Yo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Jo{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Vo(void 0===this.o);const n=e=>{null!=e.error&&Oo("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Oo("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Oo("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Oo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Vo("string"==typeof e.token),this.R=e.token,new Yo(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Zo(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class el{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Zo(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}}function tl(e,t){return e<t?-1:e>t?1:0}function nl(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class rl{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Bo(qo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Bo(qo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Bo(qo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Bo(qo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return rl.fromMillis(Date.now())}static fromDate(e){return rl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new rl(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?tl(this.nanoseconds,e.nanoseconds):tl(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class sl{constructor(e){this.timestamp=e}static fromTimestamp(e){return new sl(e)}static min(){return new sl(new rl(0,0))}static max(){return new sl(new rl(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class il{constructor(e,t,n){void 0===t?t=0:t>e.length&&Uo(),void 0===n?n=e.length-t:n>e.length-t&&Uo(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===il.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof il?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),s=t.get(r);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class al extends il{construct(e,t,n){return new al(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new Bo(qo.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new al(e)}static emptyPath(){return new al([])}}const ol=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ll extends il{construct(e,t,n){return new ll(e,t,n)}static isValidIdentifier(e){return ol.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ll.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ll(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new Bo(qo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Bo(qo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Bo(qo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new Bo(qo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ll(t)}static emptyPath(){return new ll([])}}class cl{constructor(e){this.path=e}static fromPath(e){return new cl(al.fromString(e))}static fromName(e){return new cl(al.fromString(e).popFirst(5))}static empty(){return new cl(al.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===al.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return al.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new cl(new al(e.slice()))}}class ul{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}ul.UNKNOWN_ID=-1;function dl(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=sl.fromTimestamp(1e9===r?new rl(n+1,0):new rl(n,r));return new fl(s,cl.empty(),t)}function hl(e){return new fl(e.readTime,e.key,-1)}class fl{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new fl(sl.min(),cl.empty(),-1)}static max(){return new fl(sl.max(),cl.empty(),-1)}}function ml(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=cl.comparator(e.documentKey,t.documentKey),0!==n?n:tl(e.largestBatchId,t.largestBatchId))}const pl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function vl(e){if(e.code!==qo.FAILED_PRECONDITION||e.message!==pl)throw e;Oo("LocalStore","Unexpectedly lost primary lease")}class yl{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Uo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new yl((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof yl?t:yl.resolve(t)}catch(e){return yl.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):yl.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):yl.reject(t)}static resolve(e){return new yl((t,n)=>{t(e)})}static reject(e){return new yl((t,n)=>{n(e)})}static waitFor(e){return new yl((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=yl.resolve(!1);for(const n of e)t=t.next(e=>e?yl.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new yl((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new yl((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function xl(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function bl(e){return"IndexedDbTransactionError"===e.name}class wl{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Nl(e){return null==e}function jl(e){return 0===e&&1/e==-1/0}function Sl(e){return"number"==typeof e&&Number.isInteger(e)&&!jl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}wl.oe=-1;const _l=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],kl=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],El=kl,Cl=[...El,"indexConfiguration","indexState","indexEntries"];function Tl(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Il(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Al(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Rl{constructor(e,t){this.comparator=e,this.root=t||Pl.EMPTY}insert(e,t){return new Rl(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pl.BLACK,null,null))}remove(e){return new Rl(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dl(this.root,e,this.comparator,!0)}}class Dl{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pl{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:Pl.RED,this.left=null!=r?r:Pl.EMPTY,this.right=null!=s?s:Pl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Pl(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Pl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Pl.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Uo();if(this.right.isRed())throw Uo();const e=this.left.check();if(e!==this.right.check())throw Uo();return e+(this.isRed()?0:1)}}Pl.EMPTY=null,Pl.RED=!0,Pl.BLACK=!1,Pl.EMPTY=new class{constructor(){this.size=0}get key(){throw Uo()}get value(){throw Uo()}get color(){throw Uo()}get left(){throw Uo()}get right(){throw Uo()}copy(e,t,n,r,s){return this}insert(e,t,n){return new Pl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ol{constructor(e){this.comparator=e,this.data=new Rl(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ll(this.data.getIterator())}getIteratorFrom(e){return new Ll(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Ol))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ol(this.comparator);return t.data=e,t}}class Ll{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ml{constructor(e){this.fields=e,e.sort(ll.comparator)}static empty(){return new Ml([])}unionWith(e){let t=new Ol(ll.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ml(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nl(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Fl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ul{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Fl("Invalid base64 string: "+e):e}}(e);return new Ul(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ul(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tl(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ul.EMPTY_BYTE_STRING=new Ul("");const Vl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zl(e){if(Vo(!!e),"string"==typeof e){let t=0;const n=Vl.exec(e);if(Vo(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ql(e.seconds),nanos:ql(e.nanos)}}function ql(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Bl(e){return"string"==typeof e?Ul.fromBase64String(e):Ul.fromUint8Array(e)}function Ql(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Hl(e){const t=e.mapValue.fields.__previous_value__;return Ql(t)?Hl(t):t}function Wl(e){const t=zl(e.mapValue.fields.__local_write_time__.timestampValue);return new rl(t.seconds,t.nanos)}class Kl{constructor(e,t,n,r,s,i,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class Gl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Gl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Gl&&e.projectId===this.projectId&&e.database===this.database}}const Xl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function $l(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ql(e)?4:hc(e)?9007199254740991:uc(e)?10:11:Uo()}function Yl(e,t){if(e===t)return!0;const n=$l(e);if(n!==$l(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Wl(e).isEqual(Wl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=zl(e.timestampValue),r=zl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Bl(e.bytesValue).isEqual(Bl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ql(e.geoPointValue.latitude)===ql(t.geoPointValue.latitude)&&ql(e.geoPointValue.longitude)===ql(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ql(e.integerValue)===ql(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ql(e.doubleValue),r=ql(t.doubleValue);return n===r?jl(n)===jl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return nl(e.arrayValue.values||[],t.arrayValue.values||[],Yl);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Tl(n)!==Tl(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Yl(n[s],r[s])))return!1;return!0}(e,t);default:return Uo()}}function Jl(e,t){return void 0!==(e.values||[]).find(e=>Yl(e,t))}function Zl(e,t){if(e===t)return 0;const n=$l(e),r=$l(t);if(n!==r)return tl(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return tl(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ql(e.integerValue||e.doubleValue),r=ql(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ec(e.timestampValue,t.timestampValue);case 4:return ec(Wl(e),Wl(t));case 5:return tl(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Bl(e),r=Bl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=tl(n[s],r[s]);if(0!==e)return e}return tl(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=tl(ql(e.latitude),ql(t.latitude));return 0!==n?n:tl(ql(e.longitude),ql(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return tc(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=o.value)||void 0===r?void 0:r.arrayValue,u=tl((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:tc(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Xl.mapValue&&t===Xl.mapValue)return 0;if(e===Xl.mapValue)return 1;if(t===Xl.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=tl(r[a],i[a]);if(0!==e)return e;const t=Zl(n[r[a]],s[i[a]]);if(0!==t)return t}return tl(r.length,i.length)}(e.mapValue,t.mapValue);default:throw Uo()}}function ec(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return tl(e,t);const n=zl(e),r=zl(t),s=tl(n.seconds,r.seconds);return 0!==s?s:tl(n.nanos,r.nanos)}function tc(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=Zl(n[s],r[s]);if(e)return e}return tl(n.length,r.length)}function nc(e){return rc(e)}function rc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=zl(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Bl(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return cl.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=rc(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(rc(e.fields[s]));return n+"}"}(e.mapValue):Uo()}function sc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ic(e){return!!e&&"integerValue"in e}function ac(e){return!!e&&"arrayValue"in e}function oc(e){return!!e&&"nullValue"in e}function lc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function cc(e){return!!e&&"mapValue"in e}function uc(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function dc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Il(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=dc(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=dc(e.arrayValue.values[n]);return t}return Object.assign({},e)}function hc(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class fc{constructor(e){this.value=e}static empty(){return new fc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!cc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dc(t)}setAll(e){let t=ll.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=dc(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());cc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];cc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Il(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new fc(dc(this.value))}}function mc(e){const t=[];return Il(e.fields,(e,n)=>{const r=new ll([e]);if(cc(n)){const e=mc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Ml(t)}class pc{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new pc(e,0,sl.min(),sl.min(),sl.min(),fc.empty(),0)}static newFoundDocument(e,t,n,r){return new pc(e,1,t,sl.min(),n,r,0)}static newNoDocument(e,t){return new pc(e,2,t,sl.min(),sl.min(),fc.empty(),0)}static newUnknownDocument(e,t){return new pc(e,3,t,sl.min(),sl.min(),fc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(sl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=sl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof pc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class gc{constructor(e,t){this.position=e,this.inclusive=t}}function vc(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?cl.comparator(cl.fromName(a.referenceValue),n.key):Zl(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function yc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Yl(e.position[n],t.position[n]))return!1;return!0}class xc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function bc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class wc{}class Nc extends wc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ic(e,t,n):"array-contains"===t?new Pc(e,n):"in"===t?new Oc(e,n):"not-in"===t?new Lc(e,n):"array-contains-any"===t?new Mc(e,n):new Nc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ac(e,n):new Rc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Zl(t,this.value)):null!==t&&$l(this.value)===$l(t)&&this.matchesComparison(Zl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Uo()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jc extends wc{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new jc(e,t)}matches(e){return Sc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Sc(e){return"and"===e.op}function _c(e){return kc(e)&&Sc(e)}function kc(e){for(const t of e.filters)if(t instanceof jc)return!1;return!0}function Ec(e){if(e instanceof Nc)return e.field.canonicalString()+e.op.toString()+nc(e.value);if(_c(e))return e.filters.map(e=>Ec(e)).join(",");{const t=e.filters.map(e=>Ec(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Cc(e,t){return e instanceof Nc?function(e,t){return t instanceof Nc&&e.op===t.op&&e.field.isEqual(t.field)&&Yl(e.value,t.value)}(e,t):e instanceof jc?function(e,t){return t instanceof jc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Cc(n,t.filters[r]),!0)}(e,t):void Uo()}function Tc(e){return e instanceof Nc?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(nc(e.value))}(e):e instanceof jc?function(e){return e.op.toString()+" {"+e.getFilters().map(Tc).join(" ,")+"}"}(e):"Filter"}class Ic extends Nc{constructor(e,t,n){super(e,t,n),this.key=cl.fromName(n.referenceValue)}matches(e){const t=cl.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ac extends Nc{constructor(e,t){super(e,"in",t),this.keys=Dc("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Rc extends Nc{constructor(e,t){super(e,"not-in",t),this.keys=Dc("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Dc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>cl.fromName(e.referenceValue))}class Pc extends Nc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ac(t)&&Jl(t.arrayValue,this.value)}}class Oc extends Nc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Jl(this.value.arrayValue,t)}}class Lc extends Nc{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Jl(this.value.arrayValue,t)}}class Mc extends Nc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ac(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Jl(this.value.arrayValue,e))}}class Fc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.ue=null}}function Uc(e){return new Fc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Vc(e){const t=zo(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Ec(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Nl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>nc(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>nc(e)).join(",")),t.ue=e}return t.ue}function zc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!bc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Cc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!yc(e.startAt,t.startAt)&&yc(e.endAt,t.endAt)}function qc(e){return cl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Bc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Qc(e,t,n,r,s,i,a,o){return new Bc(e,t,n,r,s,i,a,o)}function Hc(e){return new Bc(e)}function Wc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Kc(e){return null!==e.collectionGroup}function Gc(e){const t=zo(e);if(null===t.ce){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ol(ll.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new xc(r,n))}),e.has(ll.keyField().canonicalString())||t.ce.push(new xc(ll.keyField(),n))}return t.ce}function Xc(e){const t=zo(e);return t.le||(t.le=$c(t,Gc(e))),t.le}function $c(e,t){if("F"===e.limitType)return Uc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new xc(e.field,t)});const n=e.endAt?new gc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new gc(e.startAt.position,e.startAt.inclusive):null;return Uc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Yc(e,t){const n=e.filters.concat([t]);return new Bc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Jc(e,t,n){return new Bc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Zc(e,t){return zc(Xc(e),Xc(t))&&e.limitType===t.limitType}function eu(e){return"".concat(Vc(Xc(e)),"|lt:").concat(e.limitType)}function tu(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Tc(e)).join(", "),"]")),Nl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>nc(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>nc(e)).join(",")),"Target(".concat(t,")")}(Xc(e)),"; limitType=").concat(e.limitType,")")}function nu(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):cl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Gc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=vc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Gc(e),t))&&!(e.endAt&&!function(e,t,n){const r=vc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Gc(e),t))}(e,t)}function ru(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function su(e){return(t,n)=>{let r=!1;for(const s of Gc(e)){const e=iu(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function iu(e,t,n){const r=e.field.isKeyField()?cl.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?Zl(r,s):Uo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Uo()}}class au{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Il(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return Al(this.inner)}size(){return this.innerSize}}const ou=new Rl(cl.comparator);function lu(){return ou}const cu=new Rl(cl.comparator);function uu(){let e=cu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function du(e){let t=cu;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function hu(){return mu()}function fu(){return mu()}function mu(){return new au(e=>e.toString(),(e,t)=>e.isEqual(t))}const pu=new Rl(cl.comparator),gu=new Ol(cl.comparator);function vu(){let e=gu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const yu=new Ol(tl);function xu(){return yu}function bu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jl(t)?"-0":t}}function wu(e){return{integerValue:""+e}}function Nu(e,t){return Sl(t)?wu(t):bu(e,t)}class ju{constructor(){this._=void 0}}function Su(e,t,n){return e instanceof Eu?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ql(t)&&(t=Hl(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Cu?Tu(e,t):e instanceof Iu?Au(e,t):function(e,t){const n=ku(e,t),r=Du(n)+Du(e.Pe);return ic(n)&&ic(e.Pe)?wu(r):bu(e.serializer,r)}(e,t)}function _u(e,t,n){return e instanceof Cu?Tu(e,t):e instanceof Iu?Au(e,t):n}function ku(e,t){return e instanceof Ru?function(e){return ic(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Eu extends ju{}class Cu extends ju{constructor(e){super(),this.elements=e}}function Tu(e,t){const n=Pu(t);for(const r of e.elements)n.some(e=>Yl(e,r))||n.push(r);return{arrayValue:{values:n}}}class Iu extends ju{constructor(e){super(),this.elements=e}}function Au(e,t){let n=Pu(t);for(const r of e.elements)n=n.filter(e=>!Yl(e,r));return{arrayValue:{values:n}}}class Ru extends ju{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Du(e){return ql(e.integerValue||e.doubleValue)}function Pu(e){return ac(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ou{constructor(e,t){this.field=e,this.transform=t}}class Lu{constructor(e,t){this.version=e,this.transformResults=t}}class Mu{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mu}static exists(e){return new Mu(void 0,e)}static updateTime(e){return new Mu(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fu(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Uu{}function Vu(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new $u(e.key,Mu.none()):new Hu(e.key,e.data,Mu.none());{const n=e.data,r=fc.empty();let s=new Ol(ll.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new Wu(e.key,r,new Ml(s.toArray()),Mu.none())}}function zu(e,t,n){e instanceof Hu?function(e,t,n){const r=e.value.clone(),s=Gu(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Wu?function(e,t,n){if(!Fu(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Gu(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Ku(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function qu(e,t,n,r){return e instanceof Hu?function(e,t,n,r){if(!Fu(e.precondition,t))return n;const s=e.value.clone(),i=Xu(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof Wu?function(e,t,n,r){if(!Fu(e.precondition,t))return n;const s=Xu(e.fieldTransforms,r,t),i=t.data;return i.setAll(Ku(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Fu(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Bu(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=ku(r.transform,e||null);null!=s&&(null===n&&(n=fc.empty()),n.set(r.field,s))}return n||null}function Qu(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&nl(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Cu&&t instanceof Cu||e instanceof Iu&&t instanceof Iu?nl(e.elements,t.elements,Yl):e instanceof Ru&&t instanceof Ru?Yl(e.Pe,t.Pe):e instanceof Eu&&t instanceof Eu}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Hu extends Uu{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Wu extends Uu{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Ku(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Gu(e,t,n){const r=new Map;Vo(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,_u(a,o,n[s]))}return r}function Xu(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,Su(e,i,t))}return r}class $u extends Uu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Yu extends Uu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ju{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&zu(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=qu(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=qu(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=fu();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=Vu(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(sl.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),vu())}isEqual(e){return this.batchId===e.batchId&&nl(this.mutations,e.mutations,(e,t)=>Qu(e,t))&&nl(this.baseMutations,e.baseMutations,(e,t)=>Qu(e,t))}}class Zu{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Vo(e.mutations.length===n.length);let r=pu;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new Zu(e,t,n,r)}}class ed{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class td{constructor(e,t){this.count=e,this.unchangedNames=t}}var nd,rd;function sd(e){switch(e){default:return Uo();case qo.CANCELLED:case qo.UNKNOWN:case qo.DEADLINE_EXCEEDED:case qo.RESOURCE_EXHAUSTED:case qo.INTERNAL:case qo.UNAVAILABLE:case qo.UNAUTHENTICATED:return!1;case qo.INVALID_ARGUMENT:case qo.NOT_FOUND:case qo.ALREADY_EXISTS:case qo.PERMISSION_DENIED:case qo.FAILED_PRECONDITION:case qo.ABORTED:case qo.OUT_OF_RANGE:case qo.UNIMPLEMENTED:case qo.DATA_LOSS:return!0}}function id(e){if(void 0===e)return Lo("GRPC error has no .code"),qo.UNKNOWN;switch(e){case nd.OK:return qo.OK;case nd.CANCELLED:return qo.CANCELLED;case nd.UNKNOWN:return qo.UNKNOWN;case nd.DEADLINE_EXCEEDED:return qo.DEADLINE_EXCEEDED;case nd.RESOURCE_EXHAUSTED:return qo.RESOURCE_EXHAUSTED;case nd.INTERNAL:return qo.INTERNAL;case nd.UNAVAILABLE:return qo.UNAVAILABLE;case nd.UNAUTHENTICATED:return qo.UNAUTHENTICATED;case nd.INVALID_ARGUMENT:return qo.INVALID_ARGUMENT;case nd.NOT_FOUND:return qo.NOT_FOUND;case nd.ALREADY_EXISTS:return qo.ALREADY_EXISTS;case nd.PERMISSION_DENIED:return qo.PERMISSION_DENIED;case nd.FAILED_PRECONDITION:return qo.FAILED_PRECONDITION;case nd.ABORTED:return qo.ABORTED;case nd.OUT_OF_RANGE:return qo.OUT_OF_RANGE;case nd.UNIMPLEMENTED:return qo.UNIMPLEMENTED;case nd.DATA_LOSS:return qo.DATA_LOSS;default:return Uo()}}(rd=nd||(nd={}))[rd.OK=0]="OK",rd[rd.CANCELLED=1]="CANCELLED",rd[rd.UNKNOWN=2]="UNKNOWN",rd[rd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rd[rd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rd[rd.NOT_FOUND=5]="NOT_FOUND",rd[rd.ALREADY_EXISTS=6]="ALREADY_EXISTS",rd[rd.PERMISSION_DENIED=7]="PERMISSION_DENIED",rd[rd.UNAUTHENTICATED=16]="UNAUTHENTICATED",rd[rd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rd[rd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rd[rd.ABORTED=10]="ABORTED",rd[rd.OUT_OF_RANGE=11]="OUT_OF_RANGE",rd[rd.UNIMPLEMENTED=12]="UNIMPLEMENTED",rd[rd.INTERNAL=13]="INTERNAL",rd[rd.UNAVAILABLE=14]="UNAVAILABLE",rd[rd.DATA_LOSS=15]="DATA_LOSS";let ad=null;function od(){return new TextEncoder}const ld=new go([4294967295,4294967295],0);function cd(e){const t=od().encode(e),n=new vo;return n.update(t),new Uint8Array(n.digest())}function ud(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new go([n,r],0),new go([s,i],0)]}class dd{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new hd("Invalid padding: ".concat(t));if(n<0)throw new hd("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new hd("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new hd("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=go.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(go.fromNumber(n)));return 1===r.compare(ld)&&(r=new go([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=cd(e),[n,r]=ud(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new dd(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.Ie)return;const t=cd(e),[n,r]=ud(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class hd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class fd{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,md.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new fd(sl.min(),r,new Rl(tl),lu(),vu())}}class md{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new md(n,t,vu(),vu(),vu())}}class pd{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class gd{constructor(e,t){this.targetId=e,this.me=t}}class vd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ul.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class yd{constructor(){this.fe=0,this.ge=wd(),this.pe=Ul.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=vu(),t=vu(),n=vu();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Uo()}}),new md(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=wd()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Vo(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class xd{constructor(e){this.Le=e,this.Be=new Map,this.ke=lu(),this.qe=bd(),this.Qe=new Rl(tl)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Uo()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const s=r.target;if(qc(s))if(0===n){const e=new cl(s.path);this.Ue(t,e,pc.newNoDocument(e,sl.min()))}else Vo(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),s=n?this.Xe(n,e,r):1;if(0!==s){this.je(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==ad||ad.et(function(e,t,n,r,s){var i,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===s,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,s))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=Bl(n).toUint8Array()}catch(e){if(e instanceof Fl)return Mo("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new dd(i,r,s)}catch(e){return Mo(e instanceof hd?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Le.tt(),i="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const s=this.Je(r);if(s){if(n.current&&qc(s.target)){const t=new cl(s.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,pc.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=vu();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new fd(e,t,this.Qe,this.ke,n);return this.ke=lu(),this.qe=bd(),this.Qe=new Rl(tl),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new yd,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ol(tl),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Oo("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new yd),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function bd(){return new Rl(cl.comparator)}function wd(){return new Rl(cl.comparator)}const Nd={asc:"ASCENDING",desc:"DESCENDING"},jd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Sd={and:"AND",or:"OR"};class _d{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function kd(e,t){return e.useProto3Json||Nl(t)?t:{value:t}}function Ed(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Cd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Td(e,t){return Ed(e,t.toTimestamp())}function Id(e){return Vo(!!e),sl.fromTimestamp(function(e){const t=zl(e);return new rl(t.seconds,t.nanos)}(e))}function Ad(e,t){return Rd(e,t).canonicalString()}function Rd(e,t){const n=function(e){return new al(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Dd(e){const t=al.fromString(e);return Vo(Zd(t)),t}function Pd(e,t){return Ad(e.databaseId,t.path)}function Od(e,t){const n=Dd(t);if(n.get(1)!==e.databaseId.projectId)throw new Bo(qo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Bo(qo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new cl(Ud(n))}function Ld(e,t){return Ad(e.databaseId,t)}function Md(e){const t=Dd(e);return 4===t.length?al.emptyPath():Ud(t)}function Fd(e){return new al(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ud(e){return Vo(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Vd(e,t,n){return{name:Pd(e,t),fields:n.value.mapValue.fields}}function zd(e,t){let n;if(t instanceof Hu)n={update:Vd(e,t.key,t.value)};else if(t instanceof $u)n={delete:Pd(e,t.key)};else if(t instanceof Wu)n={update:Vd(e,t.key,t.data),updateMask:Jd(t.fieldMask)};else{if(!(t instanceof Yu))return Uo();n={verify:Pd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Eu)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Cu)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Iu)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ru)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Uo()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Td(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Uo()}(e,t.precondition)),n}function qd(e,t){return{documents:[Ld(e,t.path)]}}function Bd(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ld(e,s);const i=function(e){if(0!==e.length)return Yd(jc.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Xd(e.field),direction:Wd(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=kd(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:s}}function Qd(e){let t=Md(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Vo(1===r);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Hd(e);return t instanceof jc&&_c(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new xc($d(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Nl(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new gc(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new gc(n,t)}(n.endAt)),Qc(t,s,a,i,o,"F",l,c)}function Hd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=$d(e.unaryFilter.field);return Nc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=$d(e.unaryFilter.field);return Nc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=$d(e.unaryFilter.field);return Nc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=$d(e.unaryFilter.field);return Nc.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Uo()}}(e):void 0!==e.fieldFilter?function(e){return Nc.create($d(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Uo()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return jc.create(e.compositeFilter.filters.map(e=>Hd(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Uo()}}(e.compositeFilter.op))}(e):Uo()}function Wd(e){return Nd[e]}function Kd(e){return jd[e]}function Gd(e){return Sd[e]}function Xd(e){return{fieldPath:e.canonicalString()}}function $d(e){return ll.fromServerFormat(e.fieldPath)}function Yd(e){return e instanceof Nc?function(e){if("=="===e.op){if(lc(e.value))return{unaryFilter:{field:Xd(e.field),op:"IS_NAN"}};if(oc(e.value))return{unaryFilter:{field:Xd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(lc(e.value))return{unaryFilter:{field:Xd(e.field),op:"IS_NOT_NAN"}};if(oc(e.value))return{unaryFilter:{field:Xd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xd(e.field),op:Kd(e.op),value:e.value}}}(e):e instanceof jc?function(e){const t=e.getFilters().map(e=>Yd(e));return 1===t.length?t[0]:{compositeFilter:{op:Gd(e.op),filters:t}}}(e):Uo()}function Jd(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Zd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class eh{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:sl.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:sl.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ul.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new eh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new eh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new eh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new eh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class th{constructor(e){this.ct=e}}function nh(e){const t=Qd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Jc(t,t.limit,"L"):t}class rh{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ql(e.integerValue));else if("doubleValue"in e){const n=ql(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),jl(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=zl(n)),t.Rt("".concat(n.seconds||"")),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Bl(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?hc(e)?this.dt(t,Number.MAX_SAFE_INTEGER):uc(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Uo()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const s=e.fields||{};this.dt(t,53);const i="value",a=(null===(r=null===(n=s[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(ql(a)),this.Vt(i,t),this.Tt(s[i],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),cl.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}rh.vt=new rh;class sh{constructor(){this.un=new ih}addToCollectionParentIndex(e,t){return this.un.add(t),yl.resolve()}getCollectionParents(e,t){return yl.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return yl.resolve()}deleteFieldIndex(e,t){return yl.resolve()}deleteAllFieldIndexes(e){return yl.resolve()}createTargetIndexes(e,t){return yl.resolve()}getDocumentsMatchingTarget(e,t){return yl.resolve(null)}getIndexType(e,t){return yl.resolve(0)}getFieldIndexes(e,t){return yl.resolve([])}getNextCollectionGroupToUpdate(e){return yl.resolve(null)}getMinOffset(e,t){return yl.resolve(fl.min())}getMinOffsetFromCollectionGroup(e,t){return yl.resolve(fl.min())}updateCollectionGroup(e,t,n){return yl.resolve()}updateIndexEntries(e,t){return yl.resolve()}}class ih{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ol(al.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ol(al.comparator)).toArray()}}new Uint8Array(0);class ah{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ah(e,ah.DEFAULT_COLLECTION_PERCENTILE,ah.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}ah.DEFAULT_COLLECTION_PERCENTILE=10,ah.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ah.DEFAULT=new ah(41943040,ah.DEFAULT_COLLECTION_PERCENTILE,ah.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ah.DISABLED=new ah(-1,0,0);class oh{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new oh(0)}static kn(){return new oh(-1)}}class lh{constructor(){this.changes=new au(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?yl.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ch{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class uh{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&qu(n.mutation,e,Ml.empty(),rl.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,vu()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vu();const r=hu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=uu();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=hu();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,vu()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=lu();const i=mu(),a=mu();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Wu)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),qu(a.mutation,t,a.mutation.getFieldMask(),rl.now())):i.set(t.key,Ml.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new ch(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=mu();let r=new Rl((e,t)=>e-t),s=vu();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||Ml.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||vu()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=fu();l.forEach(e=>{if(!s.has(e)){const r=Vu(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return yl.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return cl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Kc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):yl.resolve(hu());let a=-1,o=s;return i.next(t=>yl.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?yl.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,vu())).next(e=>({batchId:a,changes:du(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new cl(t)).next(e=>{let t=uu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=uu();return this.indexManager.getCollectionParents(e,s).next(a=>yl.forEach(a,a=>{const o=function(e,t){return new Bc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,pc.newInvalidDocument(r)))});let n=uu();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&qu(i.mutation,r,Ml.empty(),rl.now()),nu(t,r)&&(n=n.insert(e,r))}),n})}}class dh{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return yl.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Id(e.createTime)}}(t)),yl.resolve()}getNamedQuery(e,t){return yl.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:nh(e.bundledQuery),readTime:Id(e.readTime)}}(t)),yl.resolve()}}class hh{constructor(){this.overlays=new Rl(cl.comparator),this.Ir=new Map}getOverlay(e,t){return yl.resolve(this.overlays.get(t))}getOverlays(e,t){const n=hu();return yl.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),yl.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),yl.resolve()}getOverlaysForCollection(e,t,n){const r=hu(),s=t.length+1,i=new cl(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return yl.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Rl((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=hu(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=hu(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return yl.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new ed(t,n));let s=this.Ir.get(t);void 0===s&&(s=vu(),this.Ir.set(t,s)),this.Ir.set(t,s.add(n.key))}}class fh{constructor(){this.sessionToken=Ul.EMPTY_BYTE_STRING}getSessionToken(e){return yl.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,yl.resolve()}}class mh{constructor(){this.Tr=new Ol(ph.Er),this.dr=new Ol(ph.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new ph(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new ph(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new cl(new al([])),n=new ph(t,e),r=new ph(t,e+1),s=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),s.push(e.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new cl(new al([])),n=new ph(t,e),r=new ph(t,e+1);let s=vu();return this.dr.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new ph(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ph{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return cl.comparator(e.key,t.key)||tl(e.wr,t.wr)}static Ar(e,t){return tl(e.wr,t.wr)||cl.comparator(e.key,t.key)}}class gh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ol(ph.Er)}checkEmpty(e){return yl.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Ju(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.br=this.br.add(new ph(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return yl.resolve(i)}lookupMutationBatch(e,t){return yl.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),s=r<0?0:r;return yl.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return yl.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return yl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ph(t,0),r=new ph(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);s.push(t)}),yl.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ol(tl);return t.forEach(e=>{const t=new ph(e,0),r=new ph(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),yl.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;cl.isDocumentKey(s)||(s=s.child(""));const i=new ph(new cl(s),0);let a=new Ol(tl);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)},i),yl.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Vo(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return yl.forEach(t.mutations,r=>{const s=new ph(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new ph(t,0),r=this.br.firstAfterOrEqual(n);return yl.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,yl.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class vh{constructor(e){this.Mr=e,this.docs=new Rl(cl.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return yl.resolve(n?n.document.mutableCopy():pc.newInvalidDocument(t))}getEntries(e,t){let n=lu();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():pc.newInvalidDocument(e))}),yl.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=lu();const i=t.path,a=new cl(i.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||ml(hl(a),n)<=0||(r.has(a.key)||nu(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return yl.resolve(s)}getAllFromCollectionGroup(e,t,n,r){Uo()}Or(e,t){return yl.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new yh(this)}getSize(e){return yl.resolve(this.size)}}class yh extends lh{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),yl.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class xh{constructor(e){this.persistence=e,this.Nr=new au(e=>Vc(e),zc),this.lastRemoteSnapshotVersion=sl.min(),this.highestTargetId=0,this.Lr=0,this.Br=new mh,this.targetCount=0,this.kr=oh.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),yl.resolve()}getLastRemoteSnapshotVersion(e){return yl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return yl.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),yl.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),yl.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new oh(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,yl.resolve()}updateTargetData(e,t){return this.Kn(t),yl.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,yl.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.Nr.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),yl.waitFor(s).next(()=>r)}getTargetCount(e){return yl.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return yl.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),yl.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),yl.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),yl.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return yl.resolve(n)}containsKey(e,t){return yl.resolve(this.Br.containsKey(t))}}class bh{constructor(e,t){this.qr={},this.overlays={},this.Qr=new wl(0),this.Kr=!1,this.Kr=!0,this.$r=new fh,this.referenceDelegate=e(this),this.Ur=new xh(this),this.indexManager=new sh,this.remoteDocumentCache=function(e){return new vh(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new th(t),this.Gr=new dh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new gh(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){Oo("MemoryPersistence","Starting transaction:",e);const r=new wh(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return yl.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class wh extends gl{constructor(e){super(),this.currentSequenceNumber=e}}class Nh{constructor(e){this.persistence=e,this.Jr=new mh,this.Yr=null}static Zr(e){return new Nh(e)}get Xr(){if(this.Yr)return this.Yr;throw Uo()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),yl.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),yl.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),yl.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return yl.forEach(this.Xr,n=>{const r=cl.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,sl.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return yl.or([()=>yl.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class jh{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=vu(),r=vu();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new jh(e,t.fromCache,n,r)}}class Sh{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class _h{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=mn()?8:xl(fn())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.Yi(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.Zi(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new Sh;return this.Xi(e,t,n).next(r=>{if(s.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>s.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(Po()<=Rn.DEBUG&&Oo("QueryEngine","SDK will not create cache indexes for query:",tu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),yl.resolve()):(Po()<=Rn.DEBUG&&Oo("QueryEngine","Query:",tu(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(Po()<=Rn.DEBUG&&Oo("QueryEngine","The SDK decides to create cache indexes for query:",tu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xc(t))):yl.resolve())}Yi(e,t){if(Wc(t))return yl.resolve(null);let n=Xc(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Jc(t,null,"F"),n=Xc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=vu(...r);return this.Ji.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.ts(t,r);return this.ns(t,i,s,n.readTime)?this.Yi(e,Jc(t,null,"F")):this.rs(e,i,t,n)}))})))}Zi(e,t,n,r){return Wc(t)||r.isEqual(sl.min())?yl.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const i=this.ts(t,s);return this.ns(t,i,n,r)?yl.resolve(null):(Po()<=Rn.DEBUG&&Oo("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),tu(t)),this.rs(e,i,t,dl(r,-1)).next(e=>e))})}ts(e,t){let n=new Ol(su(e));return t.forEach((t,r)=>{nu(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,n){return Po()<=Rn.DEBUG&&Oo("QueryEngine","Using full collection scan to execute query:",tu(t)),this.Ji.getDocumentsMatchingQuery(e,t,fl.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class kh{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new Rl(tl),this._s=new au(e=>Vc(e),zc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function Eh(e,t,n,r){return new kh(e,t,n,r)}async function Ch(e,t){const n=zo(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=vu();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({hs:e,removedBatchIds:s,addedBatchIds:i}))})})}function Th(e){const t=zo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function Ih(e,t,n){let r=vu(),s=vu();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=lu();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(sl.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Oo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{Ps:r,Is:s}})}function Ah(e,t){const n=zo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Rh(e,t){const n=zo(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(s=>s?(r=s,yl.resolve(r)):n.Ur.allocateTargetId(e).next(s=>(r=new eh(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function Dh(e,t,n){const r=zo(e),s=r.os.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!bl(e))throw e;Oo("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.os=r.os.remove(t),r._s.delete(s.target)}function Ph(e,t,n){const r=zo(e);let s=sl.min(),i=vu();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=zo(e),s=r._s.get(n);return void 0!==s?yl.resolve(r.os.get(s)):r.Ur.getTargetData(t,n)}(r,e,Xc(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?s:sl.min(),n?i:vu())).next(e=>(Oh(r,ru(t),e),{documents:e,Ts:i})))}function Oh(e,t,n){let r=e.us.get(t)||sl.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class Lh{constructor(){this.activeTargetIds=xu()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mh{constructor(){this.so=new Lh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Lh,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Fh{_o(e){}shutdown(){}}class Uh{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Oo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Oo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Vh=null;function zh(){return null===Vh?Vh=268435456+Math.round(2147483648*Math.random()):Vh++,"0x"+Vh.toString(16)}const qh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Bh{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Qh="WebChannelConnection";class Hh extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo="projects/".concat(n,"/databases/").concat(r),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Fo(){return!1}Mo(e,t,n,r,s){const i=zh(),a=this.xo(e,t.toUriEncodedString());Oo("RestConnection","Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,r,s),this.No(e,a,o,n).then(t=>(Oo("RestConnection","Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw Mo("RestConnection","RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t})}Lo(e,t,n,r,s,i){return this.Mo(e,t,n,r,s)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ro,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=qh[e];return"".concat(this.Do,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const s=zh();return new Promise((i,a)=>{const o=new bo;o.setWithCredentials(!0),o.listenOnce(No.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case jo.NO_ERROR:const t=o.getResponseJson();Oo(Qh,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),i(t);break;case jo.TIMEOUT:Oo(Qh,"RPC '".concat(e,"' ").concat(s," timed out")),a(new Bo(qo.DEADLINE_EXCEEDED,"Request time out"));break;case jo.HTTP_ERROR:const n=o.getStatus();if(Oo(Qh,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(qo).indexOf(t)>=0?t:qo.UNKNOWN}(t.status);a(new Bo(e,t.message))}else a(new Bo(qo.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Bo(qo.UNAVAILABLE,"Connection failed."));break;default:Uo()}}finally{Oo(Qh,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);Oo(Qh,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=zh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Eo(),a=ko(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");Oo(Qh,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=i.createWebChannel(c,o);let d=!1,h=!1;const f=new Bh({Io:t=>{h?Oo(Qh,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Oo(Qh,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Oo(Qh,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},To:()=>u.close()}),m=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(u,wo.EventType.OPEN,()=>{h||(Oo(Qh,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.yo())}),m(u,wo.EventType.CLOSE,()=>{h||(h=!0,Oo(Qh,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.So())}),m(u,wo.EventType.ERROR,t=>{h||(h=!0,Mo(Qh,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.So(new Bo(qo.UNAVAILABLE,"The operation could not be completed")))}),m(u,wo.EventType.MESSAGE,t=>{var n;if(!h){const s=t.data[0];Vo(!!s);const i=s,a=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){Oo(Qh,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=nd[e];if(void 0!==t)return id(t)}(t),s=a.message;void 0===n&&(n=qo.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),h=!0,f.So(new Bo(n,s)),u.close()}else Oo(Qh,"RPC '".concat(e,"' stream ").concat(r," received:"),s),f.bo(s)}}),m(a,_o.STAT_EVENT,t=>{t.stat===So.PROXY?Oo(Qh,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===So.NOPROXY&&Oo(Qh,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.wo()},0),f}}function Wh(){return"undefined"!=typeof document?document:null}function Kh(e){return new _d(e,!0)}class Gh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&Oo("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Xh{constructor(e,t,n,r,s,i,a,o){this.ui=e,this.Ho=n,this.Jo=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Gh(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===qo.RESOURCE_EXHAUSTED?(Lo(t.toString()),Lo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===qo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new Bo(qo.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Oo("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Oo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $h extends Xh{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Uo()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(Vo(void 0===t||"string"==typeof t),Ul.fromBase64String(t||"")):(Vo(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Ul.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?qo.UNKNOWN:id(e.code);return new Bo(t,e.message||"")}(a);n=new vd(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Od(e,r.document.name),i=Id(r.document.updateTime),a=r.document.createTime?Id(r.document.createTime):sl.min(),o=new fc({mapValue:{fields:r.document.fields}}),l=pc.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new pd(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Od(e,r.document),i=r.readTime?Id(r.readTime):sl.min(),a=pc.newNoDocument(s,i),o=r.removedTargetIds||[];n=new pd([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Od(e,r.document),i=r.removedTargetIds||[];n=new pd([],i,s,null)}else{if(!("filter"in t))return Uo();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new td(r,s),a=e.targetId;n=new gd(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return sl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?sl.min():t.readTime?Id(t.readTime):sl.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=Fd(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=qc(r)?{documents:qd(e,r)}:{query:Bd(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Cd(e,t.resumeToken);const r=kd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(sl.min())>0){n.readTime=Ed(e,t.snapshotVersion.toTimestamp());const r=kd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Uo()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=Fd(this.serializer),t.removeTarget=e,this.a_(t)}}class Yh extends Xh{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Vo(!!e.streamToken),this.lastStreamToken=e.streamToken,Vo(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Vo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(Vo(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Id(e.updateTime):Id(t);return n.isEqual(sl.min())&&(n=Id(t)),new Lu(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Id(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=Fd(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>zd(this.serializer,e))};this.a_(t)}}class Jh extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Bo(qo.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.Mo(e,Rd(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===qo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Bo(qo.UNKNOWN,e.toString())})}Lo(e,t,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,o]=i;return this.connection.Lo(e,Rd(t,n),r,a,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===qo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Bo(qo.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Zh{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(Lo(t),this.D_=!1):Oo("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class ef{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(e=>{n.enqueueAndForget(async()=>{uf(this)&&(Oo("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=zo(e);t.L_.add(4),await nf(t),t.q_.set("Unknown"),t.L_.delete(4),await tf(t)}(this))})}),this.q_=new Zh(n,r)}}async function tf(e){if(uf(e))for(const t of e.B_)await t(!0)}async function nf(e){for(const t of e.B_)await t(!1)}function rf(e,t){const n=zo(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),cf(n)?lf(n):Tf(n).r_()&&af(n,t))}function sf(e,t){const n=zo(e),r=Tf(n);n.N_.delete(t),r.r_()&&of(n,t),0===n.N_.size&&(r.r_()?r.o_():uf(n)&&n.q_.set("Unknown"))}function af(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(sl.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Tf(e).A_(t)}function of(e,t){e.Q_.xe(t),Tf(e).R_(t)}function lf(e){e.Q_=new xd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Tf(e).start(),e.q_.v_()}function cf(e){return uf(e)&&!Tf(e).n_()&&e.N_.size>0}function uf(e){return 0===zo(e).L_.size}function df(e){e.Q_=void 0}async function hf(e){e.q_.set("Online")}async function ff(e){e.N_.forEach((t,n)=>{af(e,t)})}async function mf(e,t){df(e),cf(e)?(e.q_.M_(t),lf(e)):e.q_.set("Unknown")}async function pf(e,t,n){if(e.q_.set("Online"),t instanceof vd&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){Oo("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await gf(e,n)}else if(t instanceof pd?e.Q_.Ke(t):t instanceof gd?e.Q_.He(t):e.Q_.We(t),!n.isEqual(sl.min()))try{const t=await Th(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.N_.get(r);s&&e.N_.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(Ul.EMPTY_BYTE_STRING,r.snapshotVersion)),of(e,t);const s=new eh(r.target,t,n,r.sequenceNumber);af(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Oo("RemoteStore","Failed to raise snapshot:",t),await gf(e,t)}}async function gf(e,t,n){if(!bl(t))throw t;e.L_.add(1),await nf(e),e.q_.set("Offline"),n||(n=()=>Th(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Oo("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await tf(e)})}function vf(e,t){return t().catch(n=>gf(e,n,t))}async function yf(e){const t=zo(e),n=If(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;xf(t);)try{const e=await Ah(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,bf(t,e)}catch(e){await gf(t,e)}wf(t)&&Nf(t)}function xf(e){return uf(e)&&e.O_.length<10}function bf(e,t){e.O_.push(t);const n=If(e);n.r_()&&n.V_&&n.m_(t.mutations)}function wf(e){return uf(e)&&!If(e).n_()&&e.O_.length>0}function Nf(e){If(e).start()}async function jf(e){If(e).p_()}async function Sf(e){const t=If(e);for(const n of e.O_)t.m_(n.mutations)}async function _f(e,t,n){const r=e.O_.shift(),s=Zu.from(r,t,n);await vf(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await yf(e)}async function kf(e,t){t&&If(e).V_&&await async function(e,t){if(function(e){return sd(e)&&e!==qo.ABORTED}(t.code)){const n=e.O_.shift();If(e).s_(),await vf(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await yf(e)}}(e,t),wf(e)&&Nf(e)}async function Ef(e,t){const n=zo(e);n.asyncQueue.verifyOperationInProgress(),Oo("RemoteStore","RemoteStore received new credentials");const r=uf(n);n.L_.add(3),await nf(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await tf(n)}async function Cf(e,t){const n=zo(e);t?(n.L_.delete(2),await tf(n)):t||(n.L_.add(2),await nf(n),n.q_.set("Unknown"))}function Tf(e){return e.K_||(e.K_=function(e,t,n){const r=zo(e);return r.w_(),new $h(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:hf.bind(null,e),Ro:ff.bind(null,e),mo:mf.bind(null,e),d_:pf.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),cf(e)?lf(e):e.q_.set("Unknown")):(await e.K_.stop(),df(e))})),e.K_}function If(e){return e.U_||(e.U_=function(e,t,n){const r=zo(e);return r.w_(),new Yh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:jf.bind(null,e),mo:kf.bind(null,e),f_:Sf.bind(null,e),g_:_f.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await yf(e)):(await e.U_.stop(),e.O_.length>0&&(Oo("RemoteStore","Stopping write stream with ".concat(e.O_.length," pending writes")),e.O_=[]))})),e.U_}class Af{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Qo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new Af(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Bo(qo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rf(e,t){if(Lo("AsyncQueue","".concat(t,": ").concat(e)),bl(e))return new Bo(qo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Df{constructor(e){this.comparator=e?(t,n)=>e(t,n)||cl.comparator(t.key,n.key):(e,t)=>cl.comparator(e.key,t.key),this.keyedMap=uu(),this.sortedSet=new Rl(this.comparator)}static emptySet(e){return new Df(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Df))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Df;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Pf{constructor(){this.W_=new Rl(cl.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Uo():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class Of{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Of(e,t,Df.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Lf{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Mf{constructor(){this.queries=Ff(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=zo(e),r=n.queries;n.queries=Ff(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new Bo(qo.ABORTED,"Firestore shutting down"))}}function Ff(){return new au(e=>eu(e),Zc)}async function Uf(e,t){const n=zo(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.H_()&&t.J_()&&(r=2):(i=new Lf,r=t.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=Rf(e,"Initialization of query '".concat(tu(t.query),"' failed"));return void t.onError(n)}n.queries.set(s,i),i.j_.push(t),t.Z_(n.onlineState),i.z_&&t.X_(i.z_)&&Bf(n)}async function Vf(e,t){const n=zo(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.j_.indexOf(t);e>=0&&(i.j_.splice(e,1),0===i.j_.length?s=t.J_()?0:1:!i.H_()&&t.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function zf(e,t){const n=zo(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(s)&&(r=!0);t.z_=s}}r&&Bf(n)}function qf(e,t,n){const r=zo(e),s=r.queries.get(t);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(t)}function Bf(e){e.Y_.forEach(e=>{e.next()})}var Qf,Hf;(Hf=Qf||(Qf={})).ea="default",Hf.Cache="cache";class Wf{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Of(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=Of.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Qf.Cache}}class Kf{constructor(e){this.key=e}}class Gf{constructor(e){this.key=e}}class Xf{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=vu(),this.mutatedKeys=vu(),this.Aa=su(e),this.Ra=new Df(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new Pf,r=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=nu(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Aa(u,o)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Ra:i,fa:n,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Uo()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],o=0===this.da.size&&this.current&&!r?1:0,l=o!==this.Ea;return this.Ea=o,0!==i.length||l?{snapshot:new Of(this.query,e.Ra,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Pf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=vu(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new Gf(e))}),this.da.forEach(n=>{e.has(n)||t.push(new Kf(n))}),t}ba(e){this.Ta=e.Ts,this.da=vu();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Of.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class $f{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Yf{constructor(e){this.key=e,this.va=!1}}class Jf{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new au(e=>eu(e),Zc),this.Ma=new Map,this.xa=new Set,this.Oa=new Rl(cl.comparator),this.Na=new Map,this.La=new mh,this.Ba={},this.ka=new Map,this.qa=oh.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function Zf(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=bm(e);let s;const i=r.Fa.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await tm(r,t,n,!0),s}async function em(e,t){const n=bm(e);await tm(n,t,!0,!1)}async function tm(e,t,n,r){const s=await Rh(e.localStore,Xc(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await nm(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&rf(e.remoteStore,s),o}async function nm(e,t,n,r,s){e.Ka=(t,n,r)=>async function(e,t,n,r){let s=t.view.ma(n);s.ns&&(s=await Ph(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,s)}));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return mm(e,t.targetId,o.wa),o.snapshot}(e,t,n,r);const i=await Ph(e.localStore,t,!0),a=new Xf(t,i.Ts),o=a.ma(i.documents),l=md.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);mm(e,n,c.wa);const u=new $f(t,n,a);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function rm(e,t,n){const r=zo(e),s=r.Fa.get(t),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(e=>!Zc(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Dh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&sf(r.remoteStore,s.targetId),hm(r,s.targetId)}).catch(vl)):(hm(r,s.targetId),await Dh(r.localStore,s.targetId,!0))}async function sm(e,t){const n=zo(e),r=n.Fa.get(t),s=n.Ma.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sf(n.remoteStore,r.targetId))}async function im(e,t){const n=zo(e);try{const e=await function(e,t){const n=zo(e),r=t.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Ur.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Ul.EMPTY_BYTE_STRING,sl.min()).withLastLimboFreeSnapshotVersion(sl.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,i)&&a.push(n.Ur.updateTargetData(e,c))});let o=lu(),l=vu();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Ih(e,i,t.documentUpdates).next(e=>{o=e.Ps,l=e.Is})),!r.isEqual(sl.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return yl.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.os=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(Vo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?Vo(r.va):e.removedDocuments.size>0&&(Vo(r.va),r.va=!1))}),await vm(n,e,t)}catch(e){await vl(e)}}function am(e,t,n){const r=zo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const s=r.view.Z_(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=zo(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.j_)s.Z_(t)&&(r=!0)}),r&&Bf(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function om(e,t,n){const r=zo(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Na.get(t),i=s&&s.key;if(i){let e=new Rl(cl.comparator);e=e.insert(i,pc.newNoDocument(i,sl.min()));const n=vu().add(i),s=new fd(sl.min(),new Map,new Rl(tl),e,n);await im(r,s),r.Oa=r.Oa.remove(i),r.Na.delete(t),gm(r)}else await Dh(r.localStore,t,!1).then(()=>hm(r,t,n)).catch(vl)}async function lm(e,t){const n=zo(e),r=t.batch.batchId;try{const e=await function(e,t){const n=zo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=yl.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);Vo(null!==i),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=vu();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);dm(n,r,null),um(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await vm(n,e)}catch(e){await vl(e)}}async function cm(e,t,n){const r=zo(e);try{const e=await function(e,t){const n=zo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Vo(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);dm(r,t,n),um(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await vm(r,e)}catch(n){await vl(n)}}function um(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function dm(e,t,n){const r=zo(e);let s=r.Ba[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Ba[r.currentUser.toKey()]=s}}function hm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||fm(e,t)})}function fm(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(sf(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),gm(e))}function mm(e,t,n){for(const r of n)r instanceof Kf?(e.La.addReference(r.key,t),pm(e,r)):r instanceof Gf?(Oo("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||fm(e,r.key)):Uo()}function pm(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(Oo("SyncEngine","New document in limbo: "+n),e.xa.add(r),gm(e))}function gm(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new cl(al.fromString(t)),r=e.qa.next();e.Na.set(r,new Yf(n)),e.Oa=e.Oa.insert(n,r),rf(e.remoteStore,new eh(Xc(Hc(n.path)),r,"TargetPurposeLimboResolution",wl.oe))}}async function vm(e,t,n){const r=zo(e),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((e,o)=>{a.push(r.Ka(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=jh.Wi(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(e,t){const n=zo(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>yl.forEach(t,t=>yl.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>yl.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!bl(e))throw e;Oo("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,s)}}}(r.localStore,i))}async function ym(e,t){const n=zo(e);if(!n.currentUser.isEqual(t)){Oo("SyncEngine","User change. New user:",t.toKey());const e=await Ch(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new Bo(qo.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await vm(n,e.hs)}}function xm(e,t){const n=zo(e),r=n.Na.get(t);if(r&&r.va)return vu().add(r.key);{let e=vu();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function bm(e){const t=zo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=im.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=xm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=om.bind(null,t),t.Ca.d_=zf.bind(null,t.eventManager),t.Ca.$a=qf.bind(null,t.eventManager),t}function wm(e){const t=zo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=lm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=cm.bind(null,t),t}class Nm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Eh(this.persistence,new _h,e.initialUser,this.serializer)}Ga(e){return new bh(Nh.Zr,this.serializer)}Wa(e){return new Mh}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nm.provider={build:()=>new Nm};class jm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>am(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=ym.bind(null,this.syncEngine),await Cf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Mf}createDatastore(e){const t=Kh(e.databaseInfo.databaseId),n=function(e){return new Hh(e)}(e.databaseInfo);return function(e,t,n,r){return new Jh(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new ef(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>am(this.syncEngine,e,0),Uh.D()?new Uh:new Fh)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new Jf(e,t,n,r,s,i);return a&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=zo(e);Oo("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await nf(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}jm.provider={build:()=>new jm};class Sm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Lo("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class _m{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ao.UNAUTHENTICATED,this.clientId=el.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{Oo("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Oo("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(ze){const n=Rf(ze,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function km(e,t){e.asyncQueue.verifyOperationInProgress(),Oo("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Ch(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Em(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Cm(e);Oo("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Ef(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Ef(t.remoteStore,n)),e._onlineComponents=t}async function Cm(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Oo("FirestoreClient","Using user provided OfflineComponentProvider");try{await km(e,e._uninitializedComponentsProvider._offline)}catch(ze){const n=ze;if(!function(e){return"FirebaseError"===e.name?e.code===qo.FAILED_PRECONDITION||e.code===qo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Mo("Error using user provided cache. Falling back to memory cache: "+n),await km(e,new Nm)}}else Oo("FirestoreClient","Using default OfflineComponentProvider"),await km(e,new Nm);return e._offlineComponents}async function Tm(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Oo("FirestoreClient","Using user provided OnlineComponentProvider"),await Em(e,e._uninitializedComponentsProvider._online)):(Oo("FirestoreClient","Using default OnlineComponentProvider"),await Em(e,new jm))),e._onlineComponents}function Im(e){return Tm(e).then(e=>e.syncEngine)}async function Am(e){const t=await Tm(e),n=t.eventManager;return n.onListen=Zf.bind(null,t.syncEngine),n.onUnlisten=rm.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=em.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=sm.bind(null,t.syncEngine),n}function Rm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Qo;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Sm({next:o=>{i.Za(),t.enqueueAndForget(()=>Vf(e,a));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new Bo(qo.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new Bo(qo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),a=new Wf(Hc(n.path),i,{includeMetadataChanges:!0,_a:!0});return Uf(e,a)}(await Am(e),e.asyncQueue,t,n,r)),r.promise}function Dm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Qo;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Sm({next:n=>{i.Za(),t.enqueueAndForget(()=>Vf(e,a)),n.fromCache&&"server"===r.source?s.reject(new Bo(qo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new Wf(n,i,{includeMetadataChanges:!0,_a:!0});return Uf(e,a)}(await Am(e),e.asyncQueue,t,n,r)),r.promise}function Pm(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Om=new Map;function Lm(e,t,n){if(!n)throw new Bo(qo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Mm(e){if(!cl.isDocumentKey(e))throw new Bo(qo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Fm(e){if(cl.isDocumentKey(e))throw new Bo(qo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Um(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Uo()}function Vm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Bo(qo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Um(e);throw new Bo(qo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class zm{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Bo(qo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Bo(qo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Bo(qo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pm(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Bo(qo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Bo(qo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Bo(qo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qm{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Bo(qo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Bo(qo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zm(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Wo;switch(e.type){case"firstParty":return new $o(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Bo(qo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Om.get(e);t&&(Oo("ComponentProvider","Removing Datastore"),Om.delete(e),t.terminate())}(this),Promise.resolve()}}function Bm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;const i=(e=Vm(e,qm))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==i.host&&i.host!==a&&Mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ao.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[sn(JSON.stringify({alg:"none",type:"JWT"})),sn(JSON.stringify(i)),""].join(".")}(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Bo(qo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ao(i)}e._authCredentials=new Ko(new Ho(t,n))}}class Qm{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Qm(this.firestore,e,this._query)}}class Hm{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wm(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hm(this.firestore,e,this._key)}}class Wm extends Qm{constructor(e,t,n){super(e,t,Hc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hm(this.firestore,null,new cl(e))}withConverter(e){return new Wm(this.firestore,e,this._path)}}function Km(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=kn(e),Lm("collection","path",t),e instanceof qm){const n=al.fromString(t,...r);return Fm(n),new Wm(e,null,n)}{if(!(e instanceof Hm||e instanceof Wm))throw new Bo(qo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(al.fromString(t,...r));return Fm(n),new Wm(e.firestore,null,n)}}function Gm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=kn(e),1===arguments.length&&(t=el.newId()),Lm("doc","path",t),e instanceof qm){const n=al.fromString(t,...r);return Mm(n),new Hm(e,null,new cl(n))}{if(!(e instanceof Hm||e instanceof Wm))throw new Bo(qo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(al.fromString(t,...r));return Mm(n),new Hm(e.firestore,e instanceof Wm?e.converter:null,new cl(n))}}class Xm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Gh(this,"async_queue_retry"),this.Vu=()=>{const e=Wh();e&&Oo("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=Wh();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Wh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Qo;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(Ve){if(!bl(Ve))throw Ve;Oo("AsyncQueue","Operation failed with retryable error: "+Ve)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Lo("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=Af.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&Uo()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class $m extends qm{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Xm,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xm(e),this._firestoreClient=void 0,await e}}}function Ym(e){if(e._terminated)throw new Bo(qo.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Jm(e),e._firestoreClient}function Jm(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new Kl(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Pm(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new _m(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Zm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zm(Ul.fromBase64String(e))}catch(e){throw new Bo(qo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Zm(Ul.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ep{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Bo(qo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ll(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class tp{constructor(e){this._methodName=e}}class np{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Bo(qo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Bo(qo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return tl(this._lat,e._lat)||tl(this._long,e._long)}}class rp{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const sp=/^__.*__$/;class ip{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Wu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hu(e,this.data,t,this.fieldTransforms)}}class ap{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Wu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function op(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Uo()}}class lp{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new lp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Sp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(op(this.Cu)&&sp.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class cp{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Kh(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new lp({Cu:e,methodName:t,qu:n,path:ll.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function up(e){const t=e._freezeSettings(),n=Kh(e._databaseId);return new cp(e._databaseId,!!t.ignoreUndefinedProperties,n)}function dp(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Qu(i.merge||i.mergeFields?2:0,t,n,s);bp("Data must be an object, but it was:",a,r);const o=yp(r,a);let l,c;if(i.merge)l=new Ml(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=wp(t,r,n);if(!a.contains(s))throw new Bo(qo.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));_p(e,s)||e.push(s)}l=new Ml(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new ip(new fc(o),l,c)}class hp extends tp{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Bu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hp}}class fp extends tp{_toFieldTransform(e){return new Ou(e.path,new Eu)}isEqual(e){return e instanceof fp}}function mp(e,t,n,r){const s=e.Qu(1,t,n);bp("Data must be an object, but it was:",s,r);const i=[],a=fc.empty();Il(r,(e,r)=>{const o=jp(t,e,n);r=kn(r);const l=s.Nu(o);if(r instanceof hp)i.push(o);else{const e=vp(r,l);null!=e&&(i.push(o),a.set(o,e))}});const o=new Ml(i);return new ap(a,o,s.fieldTransforms)}function pp(e,t,n,r,s,i){const a=e.Qu(1,t,n),o=[wp(t,r,n)],l=[s];if(i.length%2!=0)throw new Bo(qo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<i.length;h+=2)o.push(wp(t,i[h])),l.push(i[h+1]);const c=[],u=fc.empty();for(let h=o.length-1;h>=0;--h)if(!_p(c,o[h])){const e=o[h];let t=l[h];t=kn(t);const n=a.Nu(e);if(t instanceof hp)c.push(e);else{const r=vp(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Ml(c);return new ap(u,d,a.fieldTransforms)}function gp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return vp(n,e.Qu(r?4:3,t))}function vp(e,t){if(xp(e=kn(e)))return bp("Unsupported field value:",t,e),yp(e,t);if(e instanceof tp)return function(e,t){if(!op(t.Cu))throw t.Bu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Bu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=vp(s,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=kn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Nu(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=rl.fromDate(e);return{timestampValue:Ed(t.serializer,n)}}if(e instanceof rl){const n=new rl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ed(t.serializer,n)}}if(e instanceof np)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Zm)return{bytesValue:Cd(t.serializer,e._byteString)};if(e instanceof Hm){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Ad(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof rp)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return bu(t.serializer,e)})}}}}}}(e,t);throw t.Bu("Unsupported field value: ".concat(Um(e)))}(e,t)}function yp(e,t){const n={};return Al(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Il(e,(e,r)=>{const s=vp(r,t.Mu(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function xp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof rl||e instanceof np||e instanceof Zm||e instanceof Hm||e instanceof tp||e instanceof rp)}function bp(e,t,n){if(!xp(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Um(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function wp(e,t,n){if((t=kn(t))instanceof ep)return t._internalPath;if("string"==typeof t)return jp(e,t);throw Sp("Field path arguments must be of type string or ",e,!1,void 0,n)}const Np=new RegExp("[~\\*/\\[\\]]");function jp(e,t,n){if(t.search(Np)>=0)throw Sp("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new ep(...t.split("."))._internalPath}catch(r){throw Sp("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Sp(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(s)),l+=")"),new Bo(qo.INVALID_ARGUMENT,o+e+l)}function _p(e,t){return e.some(e=>e.isEqual(t))}class kp{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Hm(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ep(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Cp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ep extends kp{data(){return super.data()}}function Cp(e,t){return"string"==typeof t?jp(e,t):t instanceof ep?t._internalPath:t._delegate._internalPath}function Tp(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Bo(qo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ip{}class Ap extends Ip{}function Rp(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof Ip&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof Op).length,n=e.filter(e=>e instanceof Dp).length;if(t>1||t>0&&n>0)throw new Bo(qo.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Dp extends Ap{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Dp(e,t,n)}_apply(e){const t=this._parse(e);return Fp(e._query,t),new Qm(e.firestore,e.converter,Yc(e._query,t))}_parse(e){const t=up(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new Bo(qo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){Mp(a,i);const t=[];for(const n of a)t.push(Lp(r,e,n));o={arrayValue:{values:t}}}else o=Lp(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Mp(a,i),o=gp(n,t,a,"in"===i||"not-in"===i);return Nc.create(s,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Pp(e,t,n){const r=t,s=Cp("where",e);return Dp._create(s,r,n)}class Op extends Ip{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Op(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:jc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)Fp(n,s),n=Yc(n,s)}(e._query,t),new Qm(e.firestore,e.converter,Yc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function Lp(e,t,n){if("string"==typeof(n=kn(n))){if(""===n)throw new Bo(qo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kc(t)&&-1!==n.indexOf("/"))throw new Bo(qo.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(al.fromString(n));if(!cl.isDocumentKey(r))throw new Bo(qo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return sc(e,new cl(r))}if(n instanceof Hm)return sc(e,n._key);throw new Bo(qo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Um(n),"."))}function Mp(e,t){if(!Array.isArray(e)||0===e.length)throw new Bo(qo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Fp(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Bo(qo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Bo(qo.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Up{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch($l(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ql(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Uo()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Il(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>ql(e.doubleValue));return new rp(s)}convertGeoPoint(e){return new np(ql(e.latitude),ql(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Hl(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Wl(e));default:return null}}convertTimestamp(e){const t=zl(e);return new rl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=al.fromString(e);Vo(Zd(n));const r=new Gl(n.get(1),n.get(3)),s=new cl(n.popFirst(5));return r.isEqual(t)||Lo("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function Vp(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class zp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qp extends kp{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Bp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Cp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Bp extends qp{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Qp{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new zp(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Bp(this._firestore,this._userDataWriter,n.key,n,new zp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Bo(qo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Bp(e._firestore,e._userDataWriter,n.doc.key,n.doc,new zp(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Bp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new zp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Hp(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Hp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Uo()}}function Wp(e){e=Vm(e,Hm);const t=Vm(e.firestore,$m);return Rm(Ym(t),e._key).then(n=>eg(t,e,n))}class Kp extends Up{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hm(this.firestore,null,t)}}function Gp(e){e=Vm(e,Qm);const t=Vm(e.firestore,$m),n=Ym(t),r=new Kp(t);return Tp(e._query),Dm(n,e._query).then(n=>new Qp(t,r,e,n))}function Xp(e,t,n){e=Vm(e,Hm);const r=Vm(e.firestore,$m),s=Vp(e.converter,t,n);return Zp(r,[dp(up(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,Mu.none())])}function $p(e,t,n){e=Vm(e,Hm);const r=Vm(e.firestore,$m),s=up(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return i="string"==typeof(t=kn(t))||t instanceof ep?pp(s,"updateDoc",e._key,t,n,o):mp(s,"updateDoc",e._key,t),Zp(r,[i.toMutation(e._key,Mu.exists(!0))])}function Yp(e){return Zp(Vm(e.firestore,$m),[new $u(e._key,Mu.none())])}function Jp(e,t){const n=Vm(e.firestore,$m),r=Gm(e),s=Vp(e.converter,t);return Zp(n,[dp(up(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,Mu.exists(!1))]).then(()=>r)}function Zp(e,t){return function(e,t){const n=new Qo;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=wm(e);try{const e=await function(e,t){const n=zo(e),r=rl.now(),s=t.reduce((e,t)=>e.add(t.key),vu());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=lu(),l=vu();return n.cs.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=Bu(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new Wu(e.key,t,mc(t.value.mapValue),Mu.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:du(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new Rl(tl)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await vm(r,e.changes),await yf(r.remoteStore)}catch(e){const t=Rf(e,"Failed to persist write");n.reject(t)}}(await Im(e),t,n)),n.promise}(Ym(e),t)}function eg(e,t,n){const r=n.docs.get(t._key),s=new Kp(e);return new qp(e,s,t._key,r,new zp(n.hasPendingWrites,n.fromCache),t.converter)}function tg(){return new fp("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ro=e}(zr),Lr(new En("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new $m(new Go(e.getProvider("auth-internal")),new Jo(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Bo(qo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gl(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Qr(Io,"4.7.3",e),Qr(Io,"4.7.3","esm2017")}();const ng={apiKey:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5000/api"}.REACT_APP_FIREBASE_API_KEY||"AIzaSyBccC5IPUYqTMQ6bEMy0NP2H5UqEOObGaE",authDomain:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5000/api"}.REACT_APP_FIREBASE_AUTH_DOMAIN||"websitesolutionscrm.firebaseapp.com",projectId:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5000/api"}.REACT_APP_FIREBASE_PROJECT_ID||"websitesolutionscrm",storageBucket:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5000/api"}.REACT_APP_FIREBASE_STORAGE_BUCKET||"websitesolutionscrm.appspot.com",messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5000/api"}.REACT_APP_FIREBASE_MESSAGING_SENDER_ID||"493384645576",appId:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5000/api"}.REACT_APP_FIREBASE_APP_ID||"1:493384645576:web:6ac2c785291db2c8f51efd",measurementId:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5000/api"}.REACT_APP_FIREBASE_MEASUREMENT_ID||"G-CYCJJ3BTZG"};ng.apiKey&&ng.authDomain&&ng.projectId&&ng.appId||console.error("Firebase config missing or invalid. Ensure REACT_APP_FIREBASE_* env vars are set before building.");const rg=qr(ng),sg=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Br();const t=Mr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Mr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(xn(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;os(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:lo,persistence:[ba,ra,ia]}),r=dn("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>fo)return;const r=null===t||void 0===t?void 0:t.token;mo!==r&&(mo=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){kn(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){kn(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const i=cn("auth");return i&&ji(n,"http://".concat(i)),n}(rg),ig=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Mr("object"==typeof e?e:Br(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=cn(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Bm(r,...e)}return r}(rg);function ag(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=Number(e),r=Number(t)||0;return Number.isFinite(n)?n>=249&&r>=15?"Grand Master":n>=247&&r>=10?"Master":n>=245&&r>=8?"Diamond":n>=242&&r>=6?"Platinum":n>=238&&r>=4?"Gold":"Bronze":null}var og=n(579);const lg=(0,t.createContext)(),cg={user:null,token:localStorage.getItem("token"),isLoading:!0,error:null},ug=(e,t)=>{switch(t.type){case"LOGIN_START":return Ue(Ue({},e),{},{isLoading:!0,error:null});case"LOGIN_SUCCESS":return Ue(Ue({},e),{},{user:t.payload.user,token:t.payload.token,isLoading:!1,error:null});case"LOGIN_FAILURE":return Ue(Ue({},e),{},{user:null,token:null,isLoading:!1,error:t.payload});case"LOGOUT":return Ue(Ue({},e),{},{user:null,token:null,isLoading:!1,error:null});case"UPDATE_USER":return Ue(Ue({},e),{},{user:Ue(Ue({},e.user),t.payload)});case"SET_LOADING":return Ue(Ue({},e),{},{isLoading:t.payload});default:return e}},dg=e=>{let{children:n}=e;const[r,s]=(0,t.useReducer)(ug,cg);(0,t.useEffect)(()=>{const e=function(e,t,n,r){return kn(e).onAuthStateChanged(t,n,r)}(sg,async e=>{if(e)try{const t=await e.getIdToken(),n=await Wp(Gm(ig,"users",e.uid));let r=n.exists()?n.data():{email:e.email};if(!r.classification){const t=(await Gp(Rp(Km(ig,"scores"),Pp("competitorId","==",e.uid)))).docs.map(e=>e.data()),n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!Array.isArray(e)||0===e.length)return null;const t=e.map(e=>{var t;return{score:Number(null===e||void 0===e?void 0:e.score)||0,x:Number(null===e||void 0===e||null===(t=e.tiebreakerData)||void 0===t?void 0:t.xCount)||0,ts:(()=>{const t=(null===e||void 0===e?void 0:e.createdAt)||(null===e||void 0===e?void 0:e.submittedAt)||(null===e||void 0===e?void 0:e.updatedAt);if(!t)return 0;try{if("function"===typeof(null===t||void 0===t?void 0:t.toMillis))return t.toMillis();if("function"===typeof(null===t||void 0===t?void 0:t.toDate))return t.toDate().getTime();if("number"===typeof(null===t||void 0===t?void 0:t._seconds))return 1e3*t._seconds;if("number"===typeof(null===t||void 0===t?void 0:t.seconds))return 1e3*t.seconds;const e=Date.parse(t);return Number.isFinite(e)?e:0}catch(n){return 0}})()}}),n=t.sort((e,t)=>t.ts-e.ts).slice(0,10),r=n.sort((e,t)=>t.score-e.score||t.x-e.x).slice(0,6),s=r.reduce((e,t)=>e+t.score,0)/r.length,i=r.reduce((e,t)=>e+t.x,0)/r.length;return ag(s,i)}(t);n&&(r=Ue(Ue({},r),{},{classification:n}),Xp(Gm(ig,"users",e.uid),{classification:n},{merge:!0}).catch(()=>{}))}s({type:"LOGIN_SUCCESS",payload:{user:Ue({id:e.uid},r),token:t}})}catch(Ve){s({type:"LOGIN_FAILURE",payload:Ve.message||"Failed to load profile"})}else s({type:"LOGOUT"})});return()=>e()},[]);const i={user:r.user,token:r.token,isLoading:r.isLoading,error:r.error,login:async(e,t)=>{s({type:"LOGIN_START"});try{return await Zi(sg,e,t),{success:!0}}catch(n){return s({type:"LOGIN_FAILURE",payload:n.message||"Login failed"}),{success:!1,error:n.message||"Login failed"}}},register:async e=>{s({type:"LOGIN_START"});try{const{email:t,password:n,username:r,firstName:s,lastName:i,role:a}=e,o=await Ji(sg,t,n),l={email:t,username:r||t.split("@")[0],firstName:s||"",lastName:i||"",role:a||"competitor",createdAt:tg()};return await Xp(Gm(ig,"users",o.user.uid),l,{merge:!0}),{success:!0}}catch(t){return s({type:"LOGIN_FAILURE",payload:t.message||"Registration failed"}),{success:!1,error:t.message||"Registration failed"}}},logout:async()=>{await function(e){return kn(e).signOut()}(sg),s({type:"LOGOUT"})},updateUser:e=>{s({type:"UPDATE_USER",payload:e})},isAuthenticated:!!r.user};return(0,og.jsx)(lg.Provider,{value:i,children:n})},hg=()=>{const e=(0,t.useContext)(lg);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};function fg(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}const mg=["title","titleId"];function pg(e,n){let{title:r,titleId:s}=e,i=fg(e,mg);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const gg=t.forwardRef(pg),vg=["title","titleId"];function yg(e,n){let{title:r,titleId:s}=e,i=fg(e,vg);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const xg=t.forwardRef(yg),bg=["title","titleId"];function wg(e,n){let{title:r,titleId:s}=e,i=fg(e,bg);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const Ng=t.forwardRef(wg),jg=["title","titleId"];function Sg(e,n){let{title:r,titleId:s}=e,i=fg(e,jg);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const _g=t.forwardRef(Sg),kg=["title","titleId"];function Eg(e,n){let{title:r,titleId:s}=e,i=fg(e,kg);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}const Cg=t.forwardRef(Eg),Tg=["title","titleId"];function Ig(e,n){let{title:r,titleId:s}=e,i=fg(e,Tg);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const Ag=t.forwardRef(Ig),Rg=["title","titleId"];function Dg(e,n){let{title:r,titleId:s}=e,i=fg(e,Rg);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Pg=t.forwardRef(Dg),Og=["title","titleId"];function Lg(e,n){let{title:r,titleId:s}=e,i=fg(e,Og);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const Mg=t.forwardRef(Lg),Fg=["title","titleId"];function Ug(e,n){let{title:r,titleId:s}=e,i=fg(e,Fg);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Vg=t.forwardRef(Ug),zg=["title","titleId"];function qg(e,n){let{title:r,titleId:s}=e,i=fg(e,zg);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Bg=t.forwardRef(qg),Qg=()=>{var e,n,r,s;const{user:i,logout:a,isAuthenticated:o}=hg(),l=J(),[c,u]=(0,t.useState)(!1),d=[{name:"Home",href:"/",icon:gg},{name:"Competitions",href:"/competitions",icon:xg},{name:"Leaderboard",href:"/leaderboard",icon:xg},{name:"Rulebook",href:"/rulebook",icon:Ng},{name:"Shooting Classes",href:"/shooting-classes",icon:Ng},...o?[{name:"Profile",href:"/profile",icon:_g}]:[],..."admin"===(null===i||void 0===i?void 0:i.role)?[{name:"Admin",href:"/admin",icon:Cg}]:[],..."admin"===(null===i||void 0===i?void 0:i.role)?[{name:"Range Management",href:"/admin/range-management",icon:Ag}]:[],..."admin"===(null===i||void 0===i?void 0:i.role)?[{name:"Manage Users",href:"/admin/users",icon:Ag}]:[],..."range_admin"===(null===i||void 0===i?void 0:i.role)||"admin"===(null===i||void 0===i?void 0:i.role)?[{name:"Create Competition",href:"/admin/create-competition",icon:xg}]:[],..."range_admin"===(null===i||void 0===i?void 0:i.role)||"admin"===(null===i||void 0===i?void 0:i.role)?[{name:"Enter Score",href:"/admin/enter-score",icon:Pg}]:[],..."range_admin"===(null===i||void 0===i?void 0:i.role)||"admin"===(null===i||void 0===i?void 0:i.role)?[{name:"Score Verification",href:"/admin/score-verification",icon:Pg}]:[]],h=()=>{a()};return(0,og.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,og.jsxs)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:[(0,og.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,og.jsxs)("div",{className:"flex justify-between items-center py-3",children:[(0,og.jsx)("div",{className:"flex items-center",children:(0,og.jsx)(Ie,{to:"/",className:"flex items-center space-x-3",children:(0,og.jsx)("img",{src:"".concat(".","/TheXringClassic.png"),alt:"The X-Ring Classic",className:"h-12 w-auto object-contain"})})}),(0,og.jsx)("nav",{className:"hidden md:flex flex-wrap items-center gap-4",children:d.map(e=>{const t=l.pathname===e.href;return(0,og.jsxs)(Ie,{to:e.href,className:"flex items-center space-x-1 px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(t?"text-rifle-600 bg-rifle-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,og.jsx)(e.icon,{className:"w-4 h-4"}),(0,og.jsx)("span",{children:e.name})]},e.name)})}),(0,og.jsx)("div",{className:"hidden md:flex items-center space-x-4",children:o?(0,og.jsxs)(og.Fragment,{children:[(0,og.jsxs)("div",{className:"flex items-center space-x-2",children:[null!==i&&void 0!==i&&i.classification?(0,og.jsx)("img",{src:"".concat(".","/").concat((i.classification.includes("Grand")?"GM":i.classification).replace(" ",""),".png"),alt:i.classification,className:"w-8 h-8 object-contain"}):(0,og.jsx)("div",{className:"w-8 h-8 bg-rifle-100 rounded-full flex items-center justify-center",children:(0,og.jsx)("span",{className:"text-rifle-600 font-medium text-sm",children:(null===i||void 0===i||null===(e=i.profile)||void 0===e||null===(n=e.firstName)||void 0===n?void 0:n[0])||(null===i||void 0===i||null===(r=i.username)||void 0===r?void 0:r[0])||"U"})}),(0,og.jsx)("span",{className:"text-sm text-gray-700",children:(null===i||void 0===i||null===(s=i.profile)||void 0===s?void 0:s.firstName)||(null===i||void 0===i?void 0:i.username)})]}),(0,og.jsxs)("button",{onClick:h,className:"flex items-center space-x-1 text-gray-600 hover:text-gray-900 transition-colors",children:[(0,og.jsx)(Mg,{className:"w-4 h-4"}),(0,og.jsx)("span",{className:"text-sm",children:"Logout"})]})]}):(0,og.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,og.jsx)(Ie,{to:"/login",className:"text-gray-600 hover:text-gray-900 text-sm font-medium",children:"Login"}),(0,og.jsx)(Ie,{to:"/register",className:"btn-primary text-sm",children:"Register"})]})}),(0,og.jsxs)("div",{className:"md:hidden flex items-center gap-3",children:[!o&&(0,og.jsxs)(og.Fragment,{children:[(0,og.jsx)(Ie,{to:"/login",className:"text-sm text-gray-700 hover:text-gray-900",children:"Login"}),(0,og.jsx)(Ie,{to:"/register",className:"px-3 py-1 text-sm rounded-md bg-rifle-600 text-white hover:bg-rifle-700",children:"Register"})]}),(0,og.jsx)("button",{onClick:()=>u(!c),className:"text-gray-600 hover:text-gray-900","aria-label":"Toggle menu",children:c?(0,og.jsx)(Vg,{className:"w-6 h-6"}):(0,og.jsx)(Bg,{className:"w-6 h-6"})})]})]})}),c&&(0,og.jsx)("div",{className:"md:hidden border-t border-gray-200",children:(0,og.jsxs)("nav",{className:"px-4 py-2 space-y-1",children:[d.map(e=>{const t=l.pathname===e.href;return(0,og.jsxs)(Ie,{to:e.href,onClick:()=>u(!1),className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(t?"text-rifle-600 bg-rifle-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,og.jsx)(e.icon,{className:"w-4 h-4"}),(0,og.jsx)("span",{children:e.name})]},e.name)}),o?(0,og.jsxs)("button",{onClick:()=>{h(),u(!1)},className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-50 w-full",children:[(0,og.jsx)(Mg,{className:"w-4 h-4"}),(0,og.jsx)("span",{children:"Logout"})]}):(0,og.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2",children:[(0,og.jsx)(Ie,{to:"/login",className:"text-sm text-gray-700 hover:text-gray-900",onClick:()=>u(!1),children:"Login"}),(0,og.jsx)(Ie,{to:"/register",className:"px-3 py-1 text-sm rounded-md bg-rifle-600 text-white hover:bg-rifle-700",onClick:()=>u(!1),children:"Register"})]})]})})]}),(0,og.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,og.jsx)(ye,{})}),(0,og.jsx)("footer",{className:"bg-white border-t border-gray-200 mt-auto",children:(0,og.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,og.jsxs)("div",{className:"text-center",children:[(0,og.jsx)("div",{className:"mb-6",children:(0,og.jsx)("img",{src:"".concat(".","/TheXringClassic.png"),alt:"The X-Ring Classic",className:"h-16 w-auto mx-auto object-contain"})}),(0,og.jsxs)("div",{className:"text-gray-600 text-sm",children:[(0,og.jsx)("p",{children:"\xa9 2024 The X-Ring Classic. All rights reserved."}),(0,og.jsx)("p",{className:"mt-2",children:"Powered by precision and passion"})]})]})})})]})},Hg=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Km(ig,"competitions"),n=[];null!==e&&void 0!==e&&e.status&&"all"!==e.status&&n.push(Pp("status","==",e.status)),null!==e&&void 0!==e&&e.format&&"all"!==e.format&&n.push(Pp("format","==",e.format)),null!==e&&void 0!==e&&e.type&&"all"!==e.type&&n.push(Pp("type","==",e.type));const r=n.length?Rp(t,...n):t;let s=(await Gp(r)).docs.map(e=>Ue({id:e.id},e.data()));const{dateFrom:i,dateTo:a}=e||{};(i||a)&&(s=s.filter(e=>{var t;const n=new Date((null===e||void 0===e||null===(t=e.schedule)||void 0===t?void 0:t.competitionDate)||(null===e||void 0===e?void 0:e.competitionDate)||0);return!(i&&n<new Date(i))&&!(a&&n>new Date(a))})),s.sort((e,t)=>{var n,r;return new Date((null===e||void 0===e||null===(n=e.schedule)||void 0===n?void 0:n.competitionDate)||0)-new Date((null===t||void 0===t||null===(r=t.schedule)||void 0===r?void 0:r.competitionDate)||0)});const o=Number((null===e||void 0===e?void 0:e.limit)||0);return{data:{competitions:o>0?s.slice(0,o):s,pagination:{current:1,total:1,hasNext:!1,hasPrev:!1}}}},Wg=async e=>{const t=await Wp(Gm(ig,"competitions",e));if(!t.exists())throw new Error("Competition not found");const n=(await Gp(Rp(Km(ig,"registrations"),Pp("competitionId","==",e)))).docs.map(e=>Ue({id:e.id},e.data())),r=Array.from(new Set(n.map(e=>e.userId).filter(Boolean))),s=await Promise.all(r.map(e=>Wp(Gm(ig,"users",e)))),i=new Map(s.map((e,t)=>[r[t],e.exists()?Ue({id:r[t]},e.data()):null])),a=n.map(e=>{const t=i.get(e.userId),n=t?t.firstName&&t.lastName?"".concat(t.firstName," ").concat(t.lastName):t.username||t.email||"User":"User";return{userId:e.userId,userName:n,location:(null===t||void 0===t?void 0:t.location)||"",registeredAt:e.registeredAt||e.createdAt||(new Date).toISOString()}}),o=Ue({id:t.id},t.data());return o.participants=a,o.participantCount=a.length,o.registeredCount=a.length,{data:{competition:o}}},Kg=async e=>{var t;const n=await Jp(Km(ig,"competitions"),Ue(Ue({},e),{},{createdAt:tg(),organizerId:(null===(t=sg.currentUser)||void 0===t?void 0:t.uid)||null,status:(null===e||void 0===e?void 0:e.status)||"draft"})),r=await Wp(n);return{data:{competition:Ue({id:n.id},r.data())}}},Gg=async(e,t)=>{await $p(Gm(ig,"competitions",e),Ue(Ue({},t),{},{updatedAt:tg()}));return{data:{competition:Ue({id:e},(await Wp(Gm(ig,"competitions",e))).data())}}},Xg=async e=>(await $p(Gm(ig,"competitions",e),{status:"archived",archivedAt:tg()}),{data:{message:"Competition archived"}}),$g=async e=>{var t;const n=null===(t=sg.currentUser)||void 0===t?void 0:t.uid;if(!n)throw new Error("Not authenticated");const r=await Wp(Gm(ig,"competitions",e));if(!r.exists())throw new Error("Competition not found");const s=Ue({id:r.id},r.data());if(!["published","active"].includes(s.status))throw new Error("Registration closed");if(!(await Gp(Rp(Km(ig,"registrations"),Pp("userId","==",n),Pp("competitionId","==",e)))).empty)throw new Error("Already registered");await Jp(Km(ig,"registrations"),{competitionId:e,userId:n,status:"registered",registeredAt:(new Date).toISOString()});const i=s.participantCount||s.registeredCount||(Array.isArray(s.participants)?s.participants.length:0)||0;return await $p(Gm(ig,"competitions",e),{participantCount:i+1,registeredCount:(s.registeredCount||i)+1}),{data:{message:"Successfully registered for competition"}}},Yg=async e=>{var t;const n=null===(t=sg.currentUser)||void 0===t?void 0:t.uid;if(!n)throw new Error("Not authenticated");const r=(Array.isArray(null===e||void 0===e?void 0:e.shots)?e.shots:[]).filter(e=>!0===(null===e||void 0===e?void 0:e.isX)||10===Number(null===e||void 0===e?void 0:e.value)&&(null===e||void 0===e?void 0:e.isX)).length,s=Ue(Ue({},e),{},{competitorId:n,createdAt:tg(),verificationStatus:"pending",tiebreakerData:Ue(Ue({},(null===e||void 0===e?void 0:e.tiebreakerData)||{}),{},{xCount:r,perfectShots:r})}),i=await Jp(Km(ig,"scores"),s),a=await Wp(i);return{data:{score:Ue({id:i.id},a.data())}}},Jg=async e=>{var t;const n=(null===e||void 0===e?void 0:e.competitorId)||(null===(t=sg.currentUser)||void 0===t?void 0:t.uid);if(!n)throw new Error("Not authenticated");const r=(Array.isArray(null===e||void 0===e?void 0:e.shots)?e.shots:[]).filter(e=>!0===(null===e||void 0===e?void 0:e.isX)||10===Number(null===e||void 0===e?void 0:e.value)&&(null===e||void 0===e?void 0:e.isX)).length,s=Ue(Ue({},e),{},{competitorId:n,createdAt:tg(),verificationStatus:"pending",tiebreakerData:Ue(Ue({},(null===e||void 0===e?void 0:e.tiebreakerData)||{}),{},{xCount:r,perfectShots:r})}),i=await Jp(Km(ig,"scores"),s),a=await Wp(i);return{data:{score:Ue({id:i.id},a.data())}}},Zg=async e=>{const t=(await Gp(Rp(Km(ig,"scores"),Pp("competitionId","==",e)))).docs.map(e=>Ue({id:e.id},e.data())),n=Array.from(new Set(t.map(e=>e.competitorId).filter(Boolean))),r=await Promise.all(n.map(e=>Wp(Gm(ig,"users",e)))),s=new Map(r.map((e,t)=>[n[t],e.exists()?Ue({id:n[t]},e.data()):null])),i=t.map(e=>Ue(Ue({},e),{},{competitor:s.get(e.competitorId)||null,submittedAt:(()=>{const t=e.createdAt||e.updatedAt||e.submittedAt;try{if("function"===typeof(null===t||void 0===t?void 0:t.toMillis))return new Date(t.toMillis()).toISOString();if("function"===typeof(null===t||void 0===t?void 0:t.toDate))return t.toDate().toISOString();if("number"===typeof(null===t||void 0===t?void 0:t.seconds))return new Date(1e3*t.seconds).toISOString();const e=Date.parse(t);return Number.isFinite(e)?new Date(e).toISOString():(new Date).toISOString()}catch(n){return(new Date).toISOString()}})()}));return{data:{scores:i}}},ev=async(e,t,n)=>(await $p(Gm(ig,"scores",e),{verificationStatus:t,verificationNotes:n||"",verifiedAt:tg()}),{data:{message:"Score ".concat(t)}}),tv=async()=>{const e=(await Gp(Rp(Km(ig,"scores"),Pp("verificationStatus","==","pending")))).docs.map(e=>Ue({id:e.id},e.data()));return{scores:e}},nv={getOverall:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Number((null===e||void 0===e?void 0:e.limit)||10),n=(await Gp(Rp(Km(ig,"scores")))).docs.map(e=>Ue({id:e.id},e.data())).filter(e=>"approved"===e.verificationStatus||!e.verificationStatus),r=new Map;for(const c of n){var s;const e=c.competitorId||"unknown",t=Array.isArray(c.shots)?c.shots.filter(e=>10===Number(null===e||void 0===e?void 0:e.value)&&!0===(null===e||void 0===e?void 0:e.isX)).length:0,n="number"===typeof(null===(s=c.tiebreakerData)||void 0===s?void 0:s.xCount)?c.tiebreakerData.xCount:t,i=Number(c.score)||0,a=r.get(e)||{total:0,count:0,bestScore:0,bestX:0,competitions:new Set,raw:[]};a.total+=i,a.count+=1,a.raw.push(c),(i>a.bestScore||i===a.bestScore&&n>a.bestX)&&(a.bestScore=i,a.bestX=n),c.competitionId&&a.competitions.add(c.competitionId),r.set(e,a)}const i=Array.from(r.keys()).filter(Boolean),a=await Promise.all(i.map(e=>Wp(Gm(ig,"users",e)))),o=new Map(a.map((e,t)=>[i[t],e.exists()?Ue({id:i[t]},e.data()):null]));let l=i.map(e=>{const t=r.get(e),n=o.get(e),s=n||{id:e,username:"user",firstName:"Shooter",lastName:""},i=t.count?t.total/t.count:0;let a=0;for(const r of t.raw){var l;a+="number"===typeof(null===(l=r.tiebreakerData)||void 0===l?void 0:l.xCount)?r.tiebreakerData.xCount:Array.isArray(r.shots)?r.shots.filter(e=>10===Number(null===e||void 0===e?void 0:e.value)&&!0===(null===e||void 0===e?void 0:e.isX)).length:0}const c=t.count?a/t.count:0,u=ag(i||t.bestScore,c)||s.classification||void 0;return u&&(s.classification=u),{competitor:s,score:t.bestScore,bestScore:t.bestScore,averageScore:i,competitionsCount:t.competitions.size||1,tiebreakerData:{xCount:t.bestX}}});return l.sort((e,t)=>{var n,r;return t.bestScore-e.bestScore||((null===(n=t.tiebreakerData)||void 0===n?void 0:n.xCount)||0)-((null===(r=e.tiebreakerData)||void 0===r?void 0:r.xCount)||0)}),l=l.map((e,t)=>Ue(Ue({},e),{},{rank:t+1})).slice(0,t),{data:{leaderboard:l}}},getIndoor:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return nv.getOverall(e)},getOutdoor:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return nv.getOverall(e)},getByCompetition:async e=>{let t=(await Gp(Rp(Km(ig,"scores"),Pp("competitionId","==",e)))).docs.map(e=>Ue({id:e.id},e.data())).filter(e=>"approved"===e.verificationStatus||!e.verificationStatus).sort((e,t)=>(t.score||0)-(e.score||0));const n=Array.from(new Set(t.map(e=>e.competitorId).filter(Boolean))),r=await Promise.all(n.map(e=>Wp(Gm(ig,"users",e)))),s=new Map(r.map((e,t)=>[n[t],e.exists()?Ue({id:n[t]},e.data()):null])),i=t.map((e,t)=>{var n;const r=s.get(e.competitorId),i=r||{id:e.competitorId,username:e.username||"user",firstName:"Shooter",lastName:""},a=e.averageScore||e.score||0,o=(null===(n=e.tiebreakerData)||void 0===n?void 0:n.xCount)||0,l=i.classification||ag(a,o)||void 0;return l&&(i.classification=l),{rank:t+1,competitor:i,score:e.score||0,bestScore:e.bestScore||e.score||0,averageScore:e.averageScore||e.score||0,competitionsCount:e.competitionsCount||1}});return{data:{leaderboard:i}}},getByFormat:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return nv.getOverall(t)}},rv=async()=>{const[e,t,n]=await Promise.all([Gp(Km(ig,"competitions")),Gp(Km(ig,"scores")),Gp(Km(ig,"users"))]),r=e.docs.filter(e=>{var t;return"published"===((null===(t=e.data())||void 0===t?void 0:t.status)||"")}).length;return{activeCompetitions:r,totalUsers:n.size,totalScores:t.size,rangesPartnered:0}},sv=async e=>{var t;const n=null===(t=sg.currentUser)||void 0===t?void 0:t.uid;if(!n)throw new Error("Not authenticated");return await Xp(Gm(ig,"users",n),Ue(Ue({},e),{},{updatedAt:tg()}),{merge:!0}),{data:{message:"Profile updated"}}},iv=async(e,t)=>{const n=(await Gp(Rp(Km(ig,"scores"),Pp("competitorId","==",e)))).docs.map(e=>Ue({id:e.id},e.data()));return{data:{scores:n}}},av=async(e,t)=>{const n=(await Gp(Rp(Km(ig,"registrations"),Pp("userId","==",e)))).docs.map(e=>e.data().competitionId),r=await Promise.all(n.map(async e=>{const t=await Wp(Gm(ig,"competitions",e));return t.exists()?Ue({id:t.id},t.data()):null}));return{data:{competitions:r.filter(Boolean)}}},ov=async e=>{var t;const n=sg.currentUser;if(!n)throw new Error("Not authenticated");const r=await Wp(Gm(ig,"users",n.uid));if("admin"!==(r.exists()?null===(t=r.data())||void 0===t?void 0:t.role:void 0))throw new Error("Admin only");return await $p(Gm(ig,"users",e),{isVerified:!0,verificationStatus:"verified",updatedAt:tg()}),{data:{message:"User verified"}}},lv=async e=>{var t;const n=sg.currentUser;if(!n)throw new Error("Not authenticated");const r=await Wp(Gm(ig,"users",n.uid));if("admin"!==(r.exists()?null===(t=r.data())||void 0===t?void 0:t.role:void 0))throw new Error("Admin only");return await $p(Gm(ig,"users",e),{isActive:!1,updatedAt:tg()}),{data:{message:"User deactivated"}}},cv=async(e,t)=>{var n;const r=sg.currentUser;if(!r)throw new Error("Not authenticated");const s=await Wp(Gm(ig,"users",r.uid));if("admin"!==(s.exists()?null===(n=s.data())||void 0===n?void 0:n.role:void 0))throw new Error("Admin only");if(!["competitor","range_officer","range_admin","admin"].includes(t))throw new Error("Invalid role");return await $p(Gm(ig,"users",e),{role:t,updatedAt:tg()}),{data:{message:"Role updated"}}},uv=async e=>{var t;const n=sg.currentUser;if(!n)throw new Error("Not authenticated");const r=await Wp(Gm(ig,"users",n.uid));if("admin"!==(r.exists()?null===(t=r.data())||void 0===t?void 0:t.role:void 0))throw new Error("Admin only");const s=await Gp(Rp(Km(ig,"scores"),Pp("competitorId","==",e)));for(const a of s.docs)await Yp(Gm(ig,"scores",a.id));const i=await Gp(Rp(Km(ig,"registrations"),Pp("userId","==",e)));for(const a of i.docs)await Yp(Gm(ig,"registrations",a.id));return await Yp(Gm(ig,"users",e)),{data:{message:"User and related data removed"}}},dv=async()=>{const e=await rv();return{stats:{totalUsers:e.totalUsers||0,activeCompetitions:e.activeCompetitions||0,totalCompetitions:e.activeCompetitions||0,totalScores:e.totalScores||0},recentActivity:[]}},hv=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};let t=(await Gp(Km(ig,"users"))).docs.map(e=>Ue({id:e.id},e.data()));const{role:n,search:r,page:s=1,limit:i=20}=e||{};if(n&&(t=t.filter(e=>(e.role||"competitor")===n)),r){const e=String(r).toLowerCase();t=t.filter(t=>(t.username||"").toLowerCase().includes(e)||(t.firstName||"").toLowerCase().includes(e)||(t.lastName||"").toLowerCase().includes(e)||(t.email||"").toLowerCase().includes(e))}t.sort((e,t)=>{var n,r;const s=null!==(n=e.createdAt)&&void 0!==n&&n.toMillis?e.createdAt.toMillis():new Date(e.createdAt||0).getTime();return(null!==(r=t.createdAt)&&void 0!==r&&r.toMillis?t.createdAt.toMillis():new Date(t.createdAt||0).getTime())-s});const a=t.length,o=(Number(s)-1)*Number(i),l=t.slice(o,o+Number(i)),c=Math.max(1,Math.ceil(a/Number(i)));return{users:l,pagination:{current:Number(s),total:c,hasPrev:Number(s)>1,hasNext:Number(s)<c,totalUsers:a}}},fv=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};let t=(await Gp(Km(ig,"scores"))).docs.map(e=>Ue({id:e.id},e.data()));return null!==e&&void 0!==e&&e.verificationStatus&&(t=t.filter(t=>(t.verificationStatus||"approved")===e.verificationStatus)),{scores:t}},mv=async()=>({data:[]}),pv=async()=>({data:{message:"Not implemented in static build"}}),gv=["title","titleId"];function vv(e,n){let{title:r,titleId:s}=e,i=fg(e,gv);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const yv=t.forwardRef(vv),xv=["title","titleId"];function bv(e,n){let{title:r,titleId:s}=e,i=fg(e,xv);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 3.75H6A2.25 2.25 0 0 0 3.75 6v1.5M16.5 3.75H18A2.25 2.25 0 0 1 20.25 6v1.5m0 9V18A2.25 2.25 0 0 1 18 20.25h-1.5m-9 0H6A2.25 2.25 0 0 1 3.75 18v-1.5M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const wv=t.forwardRef(bv),Nv=["title","titleId"];function jv(e,n){let{title:r,titleId:s}=e,i=fg(e,Nv);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const Sv=t.forwardRef(jv),_v=["title","titleId"];function kv(e,n){let{title:r,titleId:s}=e,i=fg(e,_v);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const Ev=t.forwardRef(kv),Cv=["title","titleId"];function Tv(e,n){let{title:r,titleId:s}=e,i=fg(e,Cv);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const Iv=t.forwardRef(Tv),Av=()=>{var e,t,n,r,s,i;const a=e=>{switch((e||"").toLowerCase()){case"grand master":return"bg-purple-50 text-purple-700 border border-purple-200";case"master":return"bg-blue-50 text-blue-700 border border-blue-200";case"diamond":return"bg-cyan-50 text-cyan-700 border border-cyan-200";case"platinum":default:return"bg-gray-50 text-gray-700 border border-gray-200";case"gold":return"bg-yellow-50 text-yellow-800 border border-yellow-200";case"bronze":return"bg-orange-50 text-orange-700 border border-orange-200"}},o=e=>{switch((e||"").toLowerCase()){case"grand master":return"Avg score \u2265 95 (elite)";case"master":return"Avg score \u2265 92";case"diamond":return"Avg score \u2265 89";case"platinum":return"Avg score \u2265 85";case"gold":return"Avg score \u2265 80";case"bronze":return"Developing shooter";default:return"Classification pending"}},l=e=>{switch((e||"").toLowerCase()){case"grand master":return"bg-purple-50";case"master":return"bg-blue-50";case"diamond":return"bg-cyan-50";case"platinum":return"bg-gray-50";case"gold":return"bg-yellow-50";case"bronze":return"bg-orange-50";default:return"bg-white"}},c=e=>{switch((e||"").toLowerCase()){case"grand master":return"249.0\u2013250.0 avg, 15+ X avg";case"master":return"247.0\u2013248.9 avg, 10+ X avg";case"diamond":return"245.0\u2013246.9 avg, 8+ X avg";case"platinum":return"242.0\u2013244.9 avg, 6+ X avg";case"gold":return"238.0\u2013241.9 avg, 4+ X avg";case"bronze":return"Below 238.0 avg";default:return"Classification pending"}},{data:u,isLoading:d}=(0,De.useQuery)(["featured-competitions"],async()=>{try{return(await Hg({status:"published",limit:3})).data}catch(e){throw console.error("Home: Competitions error:",e),e}},{staleTime:3e5}),{data:h,isLoading:f}=(0,De.useQuery)(["top-shooters"],async()=>{try{return(await nv.getOverall({limit:5})).data}catch(e){throw console.error("Home: Top shooters error:",e),e}},{staleTime:6e5}),{data:m}=(0,De.useQuery)(["landing-stats"],()=>rv(),{staleTime:12e4}),p=()=>(0,og.jsx)("div",{className:"sm:hidden mb-4",children:(0,og.jsxs)("div",{className:"bg-white border rounded-xl p-4 flex items-center justify-between",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-600",children:"Welcome to The X-Ring Classic"}),(0,og.jsx)("p",{className:"text-base font-medium text-gray-900",children:"Sign in or create an account"})]}),(0,og.jsxs)("div",{className:"flex items-center gap-2",children:[(0,og.jsx)(Ie,{to:"/login",className:"text-sm text-gray-700 hover:text-gray-900",children:"Login"}),(0,og.jsx)(Ie,{to:"/register",className:"px-3 py-1 text-sm rounded-md bg-rifle-600 text-white hover:bg-rifle-700",children:"Register"})]})]})}),g=e=>Number.isFinite(e)?e>=1e3?"".concat((e/1e3).toFixed(e%1e3===0?0:1),"k+"):e.toString():"0";return(0,og.jsxs)("div",{className:"space-y-12",children:[(0,og.jsx)(p,{}),(0,og.jsx)("section",{className:"relative overflow-hidden rounded-2xl",children:(0,og.jsxs)("div",{className:"relative",children:[(0,og.jsx)("img",{src:"".concat(".","/TheXringClassic.png"),alt:"The X-Ring Classic Banner",className:"w-full h-auto object-cover"}),(0,og.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent p-8",children:(0,og.jsxs)("div",{className:"text-center text-white",children:[(0,og.jsx)("p",{className:"text-lg md:text-xl mb-4 drop-shadow-lg font-medium",children:"The premier platform for precision .22 rifle competitions and marksmanship excellence"}),(0,og.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,og.jsx)(Ie,{to:"/competitions",className:"bg-white text-gray-900 px-6 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-colors shadow-lg text-sm",children:"Browse Competitions"}),(0,og.jsx)(Ie,{to:"/leaderboard",className:"border-2 border-white text-white px-6 py-2 rounded-lg font-semibold hover:bg-white hover:text-gray-900 transition-colors shadow-lg text-sm",children:"View Leaderboards"})]})]})})]})}),(0,og.jsxs)("section",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,og.jsxs)("div",{className:"card text-center",children:[(0,og.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 rounded-lg mx-auto mb-4",children:(0,og.jsx)(xg,{className:"w-6 h-6 text-blue-600"})}),(0,og.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:g(null!==(e=null===m||void 0===m?void 0:m.activeCompetitions)&&void 0!==e?e:0)}),(0,og.jsx)("p",{className:"text-gray-600",children:"Active Competitions"})]}),(0,og.jsxs)("div",{className:"card text-center",children:[(0,og.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-green-100 rounded-lg mx-auto mb-4",children:(0,og.jsx)(yv,{className:"w-6 h-6 text-green-600"})}),(0,og.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:g(null!==(t=null===m||void 0===m?void 0:m.totalUsers)&&void 0!==t?t:0)}),(0,og.jsx)("p",{className:"text-gray-600",children:"Registered Shooters"})]}),(0,og.jsxs)("div",{className:"card text-center",children:[(0,og.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-purple-100 rounded-lg mx-auto mb-4",children:(0,og.jsx)(wv,{className:"w-6 h-6 text-purple-600"})}),(0,og.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:g(null!==(n=null===m||void 0===m?void 0:m.totalScores)&&void 0!==n?n:0)}),(0,og.jsx)("p",{className:"text-gray-600",children:"Scores Submitted"})]}),(0,og.jsxs)("div",{className:"card text-center",children:[(0,og.jsx)("div",{className:"flex items-center justify-center w-12 h-12 bg-orange-100 rounded-lg mx-auto mb-4",children:(0,og.jsx)(Sv,{className:"w-6 h-6 text-orange-600"})}),(0,og.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:g(null!==(r=null===m||void 0===m?void 0:m.rangesPartnered)&&void 0!==r?r:0)}),(0,og.jsx)("p",{className:"text-gray-600",children:"Ranges Partnered"})]})]}),(0,og.jsxs)("section",{children:[(0,og.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,og.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Featured Competitions"}),(0,og.jsxs)(Ie,{to:"/competitions",className:"flex items-center space-x-2 text-rifle-600 hover:text-rifle-700 font-medium",children:[(0,og.jsx)("span",{children:"View All"}),(0,og.jsx)(Ev,{className:"w-4 h-4"})]})]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[((null===u||void 0===u?void 0:u.competitions)||[]).map(e=>{var t,n;return(0,og.jsxs)("div",{className:"card hover:shadow-md transition-shadow",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,og.jsx)("span",{className:"badge ".concat("indoor"===(e.competitionType||e.type)?"badge-info":"badge-success"),children:e.competitionType||e.type}),(0,og.jsx)("span",{className:"text-sm text-gray-500",children:e.maxDistance?"".concat(e.maxDistance," yards"):e.distance||"TBD"})]}),(0,og.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:e.title}),(0,og.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-2",children:e.description}),(0,og.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-4",children:[(0,og.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,og.jsx)(Iv,{className:"w-4 h-4"}),(0,og.jsx)("span",{children:null!==(t=e.schedule)&&void 0!==t&&t.competitionDate?new Date(e.schedule.competitionDate).toLocaleDateString():e.startDate?new Date(e.startDate).toLocaleDateString():"TBD"})]}),(0,og.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,og.jsx)(Sv,{className:"w-4 h-4"}),(0,og.jsx)("span",{children:(null===(n=e.range)||void 0===n?void 0:n.name)||e.location||"TBD"})]})]}),(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsxs)("span",{className:"text-lg font-semibold text-gray-900",children:["$",e.prizePool]}),(0,og.jsx)(Ie,{to:"/competitions/".concat(e.id),className:"btn-primary text-sm",children:"View Details"})]})]},e.id)}),(d||!(null!==u&&void 0!==u&&null!==(s=u.competitions)&&void 0!==s&&s.length))&&Array.from({length:3}).map((e,t)=>(0,og.jsxs)("div",{className:"card animate-pulse",children:[(0,og.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),(0,og.jsx)("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2"}),(0,og.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-4"}),(0,og.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),(0,og.jsxs)("div",{className:"flex justify-between",children:[(0,og.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/4"}),(0,og.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3"})]})]},t))]})]}),(0,og.jsxs)("section",{children:[(0,og.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,og.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Top Shooters"}),(0,og.jsxs)(Ie,{to:"/leaderboard",className:"flex items-center space-x-2 text-rifle-600 hover:text-rifle-700 font-medium",children:[(0,og.jsx)("span",{children:"View Full Leaderboard"}),(0,og.jsx)(Ev,{className:"w-4 h-4"})]})]}),(0,og.jsx)("div",{className:"card",children:(0,og.jsxs)("div",{className:"space-y-4",children:[((null===h||void 0===h?void 0:h.leaderboard)||[]).map((e,t)=>{var n,r,s,i,c;return(0,og.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-b-0 ".concat(l(null===(n=e.competitor)||void 0===n?void 0:n.classification)),children:[(0,og.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,og.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ".concat(0===t?"bg-yellow-100 text-yellow-800":1===t?"bg-gray-100 text-gray-800":2===t?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"),children:t+1}),(0,og.jsxs)("div",{children:[(0,og.jsxs)("div",{className:"flex items-center gap-2",children:[(0,og.jsxs)("h4",{className:"font-semibold text-gray-900",children:[e.competitor.firstName," ",e.competitor.lastName]}),e.competitor.classification&&(0,og.jsx)("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full ".concat(a(e.competitor.classification)),title:"".concat(e.competitor.classification," \u2013 ").concat(o(e.competitor.classification)),"aria-label":"".concat(e.competitor.classification," \u2013 ").concat(o(e.competitor.classification)),children:e.competitor.classification})]}),(0,og.jsxs)("p",{className:"text-sm text-gray-500",children:["@",e.competitor.username]})]})]}),(0,og.jsxs)("div",{className:"text-right",children:[(0,og.jsx)("div",{className:"font-semibold text-gray-900",children:null===(r=null!==(s=e.bestScore)&&void 0!==s?s:e.score)||void 0===r?void 0:r.toFixed(1)}),(0,og.jsxs)("div",{className:"text-sm text-gray-500",children:[null!==(i=e.competitionsCount)&&void 0!==i?i:1," ",1===(null!==(c=e.competitionsCount)&&void 0!==c?c:1)?"competition":"competitions"]})]})]},"".concat(e.competitor.id,"-").concat(t))}),(f||!(null!==h&&void 0!==h&&null!==(i=h.leaderboard)&&void 0!==i&&i.length))&&Array.from({length:5}).map((e,t)=>(0,og.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-b-0 animate-pulse",children:[(0,og.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,og.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-full"}),(0,og.jsxs)("div",{children:[(0,og.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32 mb-1"}),(0,og.jsx)("div",{className:"h-3 bg-gray-200 rounded w-20"})]})]}),(0,og.jsxs)("div",{className:"text-right",children:[(0,og.jsx)("div",{className:"h-4 bg-gray-200 rounded w-12 mb-1"}),(0,og.jsx)("div",{className:"h-3 bg-gray-200 rounded w-20"})]})]},t))]})}),(0,og.jsxs)("div",{className:"mt-4 bg-white rounded-lg shadow-sm border p-4",children:[(0,og.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Classification Legend"}),(0,og.jsx)("div",{className:"flex flex-wrap gap-2",children:["Grand Master","Master","Diamond","Platinum","Gold","Bronze"].map(e=>(0,og.jsxs)("div",{className:"flex items-center gap-2 mr-2",children:[(0,og.jsx)("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full ".concat(a(e)),children:e}),(0,og.jsx)("span",{className:"text-xs text-gray-500",children:c(e)})]},e))})]})]}),(0,og.jsxs)("section",{className:"text-center py-16 bg-gray-100 rounded-2xl",children:[(0,og.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Ready to Compete?"}),(0,og.jsx)("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"Join thousands of precision shooters in the ultimate .22LR rifle championship platform. Register today and start your journey to the top of the leaderboard."}),(0,og.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,og.jsx)(Ie,{to:"/register",className:"btn-primary text-lg px-8 py-3",children:"Get Started"}),(0,og.jsx)(Ie,{to:"/competitions",className:"btn-secondary text-lg px-8 py-3",children:"Browse Competitions"})]})]})]})};var Rv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Dv=["color","size","strokeWidth","absoluteStrokeWidth","className","children"],Pv=(e,n)=>{const r=(0,t.forwardRef)((r,s)=>{let{color:i="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:u}=r,d=fg(r,Dv);return(0,t.createElement)("svg",Ue(Ue({ref:s},Rv),{},{width:a,height:a,stroke:i,strokeWidth:l?24*Number(o)/Number(a):o,className:["lucide","lucide-".concat((h=e,h.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim())),c].join(" ")},d),[...n.map(e=>{let[n,r]=e;return(0,t.createElement)(n,r)}),...Array.isArray(u)?u:[u]]);var h});return r.displayName="".concat(e),r},Ov=Pv("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Lv=Pv("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Mv=Pv("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Fv=Pv("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Uv=Pv("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),Vv=Pv("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),zv=()=>{var e;const n=ee(),r=(0,De.useQueryClient)(),[s,i]=(0,t.useState)({search:"",type:"all",status:"all",location:"all"}),{data:a,isLoading:o,error:l}=(0,De.useQuery)(["competitions",s],async()=>(await Hg(s)).data,{keepPreviousData:!0,staleTime:3e5}),c=(0,De.useMutation)(e=>$g(e),{onSuccess:()=>{en.success("Successfully registered for competition!"),r.invalidateQueries(["competitions"])},onError:e=>{var t,n;en.error((null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Failed to register for competition")}}),u=(e,t)=>{i(n=>Ue(Ue({},n),{},{[e]:t}))},d=e=>{switch(e){case"draft":default:return"bg-gray-100 text-gray-800";case"published":return"bg-green-100 text-green-800";case"active":return"bg-blue-100 text-blue-800";case"completed":return"bg-purple-100 text-purple-800"}},h=e=>{switch(e.competitionType||e.type){case"indoor":return"\ud83c\udfe0";case"outdoor":return"\ud83c\udf32";case"precision":return"\ud83c\udfaf";case"speed":return"\u26a1";default:return"\ud83c\udfc6"}};return o?(0,og.jsx)("div",{className:"flex items-center justify-center min-h-64",children:(0,og.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):l?(console.error("Competitions error:",l),(0,og.jsxs)("div",{className:"text-center py-8",children:[(0,og.jsxs)("div",{className:"text-red-600 mb-4",children:["Error loading competitions: ",l.message]}),(0,og.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Try Again"})]})):(0,og.jsxs)("div",{className:"space-y-6",children:[(0,og.jsxs)("div",{className:"text-center",children:[(0,og.jsx)("div",{className:"mb-6",children:(0,og.jsx)("img",{src:"".concat(".","/TheXringClassic.png"),alt:"The X-Ring Classic",className:"h-20 w-auto mx-auto object-contain"})}),(0,og.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Competitions"}),(0,og.jsx)("p",{className:"text-gray-600",children:"Browse and join .22LR rifle competitions"})]}),(0,og.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,og.jsxs)("div",{className:"relative",children:[(0,og.jsx)(Ov,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,og.jsx)("input",{type:"text",placeholder:"Search competitions...",value:s.search,onChange:e=>u("search",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,og.jsxs)("select",{value:s.type,onChange:e=>u("type",e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,og.jsx)("option",{value:"all",children:"All Types"}),(0,og.jsx)("option",{value:"indoor",children:"Indoor"}),(0,og.jsx)("option",{value:"outdoor",children:"Outdoor"}),(0,og.jsx)("option",{value:"precision",children:"Precision"}),(0,og.jsx)("option",{value:"speed",children:"Speed"})]}),(0,og.jsxs)("select",{value:s.status,onChange:e=>u("status",e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,og.jsx)("option",{value:"all",children:"All Status"}),(0,og.jsx)("option",{value:"published",children:"Published"}),(0,og.jsx)("option",{value:"active",children:"Active"}),(0,og.jsx)("option",{value:"completed",children:"Completed"})]}),(0,og.jsxs)("select",{value:s.location,onChange:e=>u("location",e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,og.jsx)("option",{value:"all",children:"All Locations"}),(0,og.jsx)("option",{value:"local",children:"Local"}),(0,og.jsx)("option",{value:"regional",children:"Regional"}),(0,og.jsx)("option",{value:"national",children:"National"})]})]})}),(0,og.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:null===a||void 0===a||null===(e=a.competitions)||void 0===e?void 0:e.map(e=>{var t,r;return(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow",children:[(0,og.jsxs)("div",{className:"p-6 border-b border-gray-100",children:[(0,og.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,og.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,og.jsx)("span",{className:"text-2xl",children:h(e)}),(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title})]}),(0,og.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(d(e.status)),children:e.status})]}),(0,og.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:e.description}),(0,og.jsxs)("div",{className:"space-y-2 text-sm text-gray-500",children:[(0,og.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,og.jsx)(Lv,{className:"h-4 w-4"}),(0,og.jsx)("span",{children:null!==(t=e.schedule)&&void 0!==t&&t.competitionDate?new Date(e.schedule.competitionDate).toLocaleDateString():e.startDate?new Date(e.startDate).toLocaleDateString():"TBD"})]}),(0,og.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,og.jsx)(Mv,{className:"h-4 w-4"}),(0,og.jsx)("span",{children:(null===(r=e.range)||void 0===r?void 0:r.name)||e.location||"TBD"})]}),(0,og.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,og.jsx)(Fv,{className:"h-4 w-4"}),(0,og.jsxs)("span",{children:[e.participantCount||e.registeredCount||0," / ",e.maxParticipants," participants"]})]})]})]}),(0,og.jsxs)("div",{className:"p-6",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,og.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,og.jsx)(Uv,{className:"h-4 w-4 text-yellow-500"}),(0,og.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["$",e.prizePool||0]})]}),(0,og.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,og.jsx)(Vv,{className:"h-4 w-4 text-gray-400"}),(0,og.jsx)("span",{className:"text-sm text-gray-500",children:e.duration||"TBD"})]})]}),(0,og.jsxs)("div",{className:"flex space-x-3",children:[(0,og.jsx)("button",{onClick:()=>n("/competitions/".concat(e.id)),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"View Details"}),"published"===e.status&&(0,og.jsx)("button",{onClick:()=>c.mutate(e.id),disabled:c.isLoading,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c.isLoading?"Registering...":"Register"})]})]})]},e.id)})}),(!(null!==a&&void 0!==a&&a.competitions)||0===a.competitions.length)&&(0,og.jsxs)("div",{className:"text-center py-12",children:[(0,og.jsx)("div",{className:"text-gray-400 mb-4",children:(0,og.jsx)(Uv,{className:"h-16 w-16 mx-auto"})}),(0,og.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No competitions found"}),(0,og.jsx)("p",{className:"text-gray-600",children:"Try adjusting your filters or check back later for new competitions."})]})]})},qv=Pv("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Bv=Pv("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Qv=Pv("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]),Hv=Pv("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Wv=Pv("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Kv=Pv("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Gv=Pv("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Xv=Pv("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),$v=()=>{var e,n,r,s,i,a,o;const{id:l}=ne(),c=ee(),{user:u}=hg(),d=(0,De.useQueryClient)(),[h,f]=(0,t.useState)(!1),[m,p]=(0,t.useState)("overview"),{data:g,isLoading:v,error:y}=(0,De.useQuery)(["competition",l],async()=>{var e;return null===(e=(await Wg(l)).data)||void 0===e?void 0:e.competition},{staleTime:3e5}),{data:x}=(0,De.useQuery)(["competition-scores",l],async()=>{var e;return(null===(e=(await Zg(l)).data)||void 0===e?void 0:e.scores)||[]},{staleTime:12e4}),b=(x||[]).map(e=>{var t,n;return{id:e.id,userName:e.userName||(e.competitor?e.competitor.firstName&&e.competitor.lastName?"".concat(e.competitor.firstName," ").concat(e.competitor.lastName):e.competitor.username:"Unknown"),totalScore:null!==(t=e.totalScore)&&void 0!==t?t:e.score,status:null!==(n=e.status)&&void 0!==n?n:"approved"===e.verificationStatus?"verified":e.verificationStatus||"pending",submittedAt:e.submittedAt||e.createdAt||e.updatedAt||(new Date).toISOString()}}),w=(0,De.useMutation)(()=>$g(l),{onSuccess:()=>{en.success("Successfully registered for competition!"),d.invalidateQueries(["competition",l]),f(!0)},onError:e=>{var t,n;en.error((null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to register")}}),N=(0,De.useMutation)(()=>Xg(l),{onSuccess:()=>{en.success("Competition deleted successfully"),c("/competitions")},onError:e=>{var t,n;en.error((null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to delete competition")}}),j=null===g||void 0===g||null===(e=g.participants)||void 0===e?void 0:e.some(e=>e.userId===(null===u||void 0===u?void 0:u.id)),S="admin"===(null===u||void 0===u?void 0:u.role)||"range_admin"===(null===u||void 0===u?void 0:u.role);null===g||void 0===g||g.createdBy,null===u||void 0===u||u.id;return v?(0,og.jsx)("div",{className:"flex items-center justify-center min-h-64",children:(0,og.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):y?(0,og.jsxs)("div",{className:"text-center py-8",children:[(0,og.jsx)("div",{className:"text-red-600 mb-4",children:"Error loading competition"}),(0,og.jsx)("button",{onClick:()=>c("/competitions"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Back to Competitions"})]}):g?(0,og.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,og.jsxs)("div",{className:"flex-1",children:[(0,og.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,og.jsx)("span",{className:"text-3xl",children:"indoor"===(g.competitionType||g.type)?"\ud83c\udfe0":"outdoor"===(g.competitionType||g.type)?"\ud83c\udf32":"\ud83c\udfc6"}),(0,og.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:g.title}),(0,og.jsx)("span",{className:"px-3 py-1 text-sm font-medium rounded-full ".concat("draft"===g.status?"bg-gray-100 text-gray-800":"published"===g.status?"bg-green-100 text-green-800":"active"===g.status?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),children:g.status})]}),(0,og.jsx)("p",{className:"text-gray-600 text-lg",children:g.description})]}),(0,og.jsxs)("div",{className:"flex space-x-2",children:[S&&(0,og.jsxs)(og.Fragment,{children:[(0,og.jsx)("button",{onClick:()=>c("/competitions/".concat(l,"/edit")),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Competition",children:(0,og.jsx)(qv,{className:"h-5 w-5"})}),(0,og.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to delete this competition? This action cannot be undone.")&&N.mutate()},className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Competition",children:(0,og.jsx)(Bv,{className:"h-5 w-5"})})]}),(0,og.jsx)("button",{onClick:()=>{var e,t;return null===(e=(t=navigator).share)||void 0===e?void 0:e.call(t,{title:g.title,url:window.location.href})},className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Share Competition",children:(0,og.jsx)(Qv,{className:"h-5 w-5"})})]})]}),(0,og.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,og.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,og.jsx)(Lv,{className:"h-5 w-5 text-gray-400"}),(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-600",children:"Date"}),(0,og.jsx)("p",{className:"font-medium",children:null!==(n=g.schedule)&&void 0!==n&&n.competitionDate?new Date(g.schedule.competitionDate).toLocaleDateString():g.startDate?new Date(g.startDate).toLocaleDateString():"TBD"})]})]}),(0,og.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,og.jsx)(Mv,{className:"h-5 w-5 text-gray-400"}),(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-600",children:"Location"}),(0,og.jsx)("p",{className:"font-medium",children:(null===(r=g.range)||void 0===r?void 0:r.name)||g.location||"TBD"})]})]}),(0,og.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,og.jsx)(Fv,{className:"h-5 w-5 text-gray-400"}),(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-600",children:"Participants"}),(0,og.jsxs)("p",{className:"font-medium",children:[g.participantCount||g.registeredCount||0," / ",g.maxParticipants]})]})]}),(0,og.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,og.jsx)(Uv,{className:"h-5 w-5 text-gray-400"}),(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-600",children:"Prize Pool"}),(0,og.jsxs)("p",{className:"font-medium",children:["$",g.prizePool||0]})]})]})]})]}),("published"===g.status||"active"===g.status)&&!j&&!h&&(0,og.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("h3",{className:"text-lg font-medium text-blue-900",children:"Ready to compete?"}),(0,og.jsx)("p",{className:"text-blue-700",children:"Register now to participate in this competition"})]}),(0,og.jsx)("button",{onClick:()=>{u?w.mutate():en.error("Please log in to register for competitions")},disabled:w.isLoading,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:w.isLoading?"Registering...":"Register Now"})]})}),(j||h)&&(0,og.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,og.jsx)(Hv,{className:"h-5 w-5 text-green-600"}),(0,og.jsx)("span",{className:"text-green-800 font-medium",children:"You are registered for this competition"})]}),(0,og.jsx)("button",{onClick:()=>c("/submit-score/".concat(l)),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Report Score"})]})}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,og.jsx)("div",{className:"border-b border-gray-200",children:(0,og.jsx)("nav",{className:"flex space-x-8 px-6",children:[{key:"overview",label:"Overview",icon:Wv},{key:"participants",label:"Participants",icon:Fv},{key:"scores",label:"Scores",icon:Uv},{key:"rules",label:"Rules",icon:Kv}].map(e=>(0,og.jsxs)("button",{onClick:()=>p(e.key),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat(m===e.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,og.jsx)(e.icon,{className:"h-4 w-4"}),(0,og.jsx)("span",{children:e.label})]},e.key))})}),(0,og.jsxs)("div",{className:"p-6",children:["overview"===m&&(0,og.jsxs)("div",{className:"space-y-6",children:[(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Competition Details"}),(0,og.jsxs)("div",{className:"space-y-3",children:[(0,og.jsxs)("div",{className:"flex justify-between",children:[(0,og.jsx)("span",{className:"text-gray-600",children:"Type:"}),(0,og.jsx)("span",{className:"font-medium capitalize",children:g.competitionType||g.type||"TBD"})]}),(0,og.jsxs)("div",{className:"flex justify-between",children:[(0,og.jsx)("span",{className:"text-gray-600",children:"Duration:"}),(0,og.jsx)("span",{className:"font-medium",children:g.duration||"TBD"})]}),(0,og.jsxs)("div",{className:"flex justify-between",children:[(0,og.jsx)("span",{className:"text-gray-600",children:"Distance:"}),(0,og.jsx)("span",{className:"font-medium",children:g.maxDistance?"".concat(g.maxDistance," yards"):g.distance||"TBD"})]}),(0,og.jsxs)("div",{className:"flex justify-between",children:[(0,og.jsx)("span",{className:"text-gray-600",children:"Format:"}),(0,og.jsx)("span",{className:"font-medium capitalize",children:g.format||"TBD"})]}),(0,og.jsxs)("div",{className:"flex justify-between",children:[(0,og.jsx)("span",{className:"text-gray-600",children:"Shots per Target:"}),(0,og.jsx)("span",{className:"font-medium",children:g.shotsPerTarget||"TBD"})]})]})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Schedule"}),(0,og.jsxs)("div",{className:"space-y-3",children:[(0,og.jsxs)("div",{className:"flex justify-between",children:[(0,og.jsx)("span",{className:"text-gray-600",children:"Registration Deadline:"}),(0,og.jsx)("span",{className:"font-medium",children:null!==(s=g.schedule)&&void 0!==s&&s.registrationDeadline?new Date(g.schedule.registrationDeadline).toLocaleDateString():g.registrationDeadline?new Date(g.registrationDeadline).toLocaleDateString():"TBD"})]}),(0,og.jsxs)("div",{className:"flex justify-between",children:[(0,og.jsx)("span",{className:"text-gray-600",children:"Start Time:"}),(0,og.jsx)("span",{className:"font-medium",children:(null===(i=g.schedule)||void 0===i?void 0:i.startTime)||g.startTime||"TBD"})]}),(0,og.jsxs)("div",{className:"flex justify-between",children:[(0,og.jsx)("span",{className:"text-gray-600",children:"End Time:"}),(0,og.jsx)("span",{className:"font-medium",children:(null===(a=g.schedule)||void 0===a?void 0:a.endTime)||g.endTime||"TBD"})]})]})]})]}),g.additionalInfo&&(0,og.jsxs)("div",{children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Additional Information"}),(0,og.jsx)("p",{className:"text-gray-700",children:g.additionalInfo})]})]}),"participants"===m&&(0,og.jsxs)("div",{children:[(0,og.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Registered Participants"}),(0,og.jsxs)("span",{className:"text-sm text-gray-500",children:[(null===(o=g.participants)||void 0===o?void 0:o.length)||0," of ",g.maxParticipants]})]}),g.participants&&g.participants.length>0?(0,og.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.participants.map(e=>{var t;return(0,og.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,og.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,og.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,og.jsx)("span",{className:"text-sm font-medium text-gray-700",children:null===(t=e.userName)||void 0===t?void 0:t.charAt(0).toUpperCase()})}),(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"font-medium text-gray-900",children:e.userName}),(0,og.jsx)("p",{className:"text-sm text-gray-500",children:e.location})]})]}),(0,og.jsxs)("div",{className:"mt-3 text-sm text-gray-600",children:["Registered: ",new Date(e.registeredAt).toLocaleDateString()]})]},e.userId)})}):(0,og.jsxs)("div",{className:"text-center py-8",children:[(0,og.jsx)(Fv,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,og.jsx)("p",{className:"text-gray-600",children:"No participants registered yet"})]})]}),"scores"===m&&(0,og.jsxs)("div",{children:[(0,og.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Competition Scores"}),b&&b.length>0&&(0,og.jsxs)("button",{className:"flex items-center space-x-2 px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,og.jsx)(Gv,{className:"h-4 w-4"}),(0,og.jsx)("span",{children:"Export Scores"})]})]}),b&&b.length>0?(0,og.jsx)("div",{className:"overflow-x-auto",children:(0,og.jsxs)("table",{className:"w-full",children:[(0,og.jsx)("thead",{className:"bg-gray-50",children:(0,og.jsxs)("tr",{children:[(0,og.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rank"}),(0,og.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Shooter"}),(0,og.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Score"}),(0,og.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,og.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Submitted"})]})}),(0,og.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map((e,t)=>{var n,r;return(0,og.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,og.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",t+1]}),(0,og.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,og.jsxs)("div",{className:"flex items-center",children:[(0,og.jsx)("div",{className:"h-8 w-8 rounded-full bg-gray-300 flex items-center justify-center mr-3",children:(0,og.jsx)("span",{className:"text-xs font-medium text-gray-700",children:null===(n=e.userName)||void 0===n?void 0:n.charAt(0).toUpperCase()})}),(0,og.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.userName})]})}),(0,og.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:null===(r=e.totalScore)||void 0===r?void 0:r.toFixed(1)}),(0,og.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,og.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("verified"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:["verified"===e.status?(0,og.jsx)(Hv,{className:"h-3 w-3 mr-1"}):"rejected"===e.status?(0,og.jsx)(Xv,{className:"h-3 w-3 mr-1"}):null,e.status]})}),(0,og.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.submittedAt).toLocaleDateString()})]},e.id)})})]})}):(0,og.jsxs)("div",{className:"text-center py-8",children:[(0,og.jsx)(Uv,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,og.jsx)("p",{className:"text-gray-600",children:"No scores submitted yet"})]})]}),"rules"===m&&(0,og.jsxs)("div",{className:"space-y-4",children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Competition Rules"}),g.rules?(0,og.jsx)("div",{className:"prose max-w-none",children:(0,og.jsx)("div",{dangerouslySetInnerHTML:{__html:g.rules}})}):(0,og.jsx)("p",{className:"text-gray-600",children:"No specific rules have been defined for this competition."})]})]})]})]}):(0,og.jsxs)("div",{className:"text-center py-8",children:[(0,og.jsx)("div",{className:"text-gray-600 mb-4",children:"Competition not found"}),(0,og.jsx)("button",{onClick:()=>c("/competitions"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Back to Competitions"})]})},Yv=e=>{let{classification:n,size:r=24,className:s=""}=e;const i=(0,t.useMemo)(()=>{const e=(e=>{if(!e)return null;const t=String(e).trim().toLowerCase();return"gm"===t||t.includes("grand")?"GM.png":t.includes("master")?"Master.png":t.includes("diamond")?"Diamond.png":t.includes("platinum")?"Platinum.png":t.includes("gold")?"Gold.png":t.includes("bronze")?"Bronze.png":null})(n);if(!e)return null;return"".concat(".","/").concat(e)},[n]);if(!i)return null;const a={width:r,height:r};return(0,og.jsx)("img",{src:i,alt:"".concat(n," logo"),title:n,style:a,className:"inline-block object-contain ".concat(s),onError:e=>{e.currentTarget.style.display="none"}})},Jv=()=>{var e,n,r,s;const[i,a]=(0,t.useState)("overall"),[o,l]=(0,t.useState)("all-time"),{data:c,isLoading:u,error:d}=(0,De.useQuery)(["leaderboard",i,o],async()=>{try{let e;switch(i){case"indoor":e=await nv.getIndoor({timeFrame:o});break;case"outdoor":e=await nv.getOutdoor({timeFrame:o});break;default:e=await nv.getOverall({timeFrame:o})}return e.data}catch(e){throw console.error("API Error:",e),e}},{keepPreviousData:!0,staleTime:12e4}),h=e=>{switch(e){case 1:return"\ud83e\udd47";case 2:return"\ud83e\udd48";case 3:return"\ud83e\udd49";default:return null}},f=e=>{const t=(e||"").toLowerCase();return"grand master"===t?"bg-purple-50 text-purple-700 border border-purple-200":"master"===t?"bg-blue-50 text-blue-700 border border-blue-200":"diamond"===t?"bg-cyan-50 text-cyan-700 border border-cyan-200":"platinum"===t?"bg-gray-50 text-gray-700 border border-gray-200":"gold"===t?"bg-yellow-50 text-yellow-800 border border-yellow-200":"bronze"===t?"bg-orange-50 text-orange-700 border border-orange-200":"bg-gray-50 text-gray-700 border border-gray-200"},m=e=>{const t=(e||"").toLowerCase();return"grand master"===t?"bg-purple-50":"master"===t?"bg-blue-50":"diamond"===t?"bg-cyan-50":"platinum"===t?"bg-gray-50":"gold"===t?"bg-yellow-50":"bronze"===t?"bg-orange-50":"bg-white"};return u?(0,og.jsx)("div",{className:"flex items-center justify-center min-h-64",children:(0,og.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):d?(0,og.jsxs)("div",{className:"text-center py-8",children:[(0,og.jsx)("div",{className:"text-red-600 mb-4",children:"Error loading leaderboard"}),(0,og.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Try Again"})]}):(0,og.jsxs)("div",{className:"space-y-6",children:[(0,og.jsxs)("div",{className:"text-center",children:[(0,og.jsx)("div",{className:"mb-6",children:(0,og.jsx)("img",{src:"".concat(".","/TheXringClassic.png"),alt:"The X-Ring Classic",className:"h-20 w-auto mx-auto object-contain"})}),(0,og.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-4 flex items-center justify-center",children:[(0,og.jsx)("span",{className:"mr-3",children:(e=>{switch(e){case"indoor":return"\ud83c\udfe0";case"outdoor":return"\ud83c\udf32";default:return"\ud83c\udfc6"}})(i)}),(e=>{switch(e){case"indoor":return"Indoor Leaderboard";case"outdoor":return"Outdoor Leaderboard";case"overall":return"Overall Leaderboard";default:return"Leaderboard"}})(i)]}),(0,og.jsx)("p",{className:"text-gray-600",children:"Top performers in .22LR rifle competitions"})]}),(0,og.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,og.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{key:"overall",label:"Overall",icon:"\ud83c\udfc6"},{key:"indoor",label:"Indoor",icon:"\ud83c\udfe0"},{key:"outdoor",label:"Outdoor",icon:"\ud83c\udf32"}].map(e=>(0,og.jsx)("button",{onClick:()=>a(e.key),className:"p-3 rounded-lg border transition-colors ".concat(i===e.key?"bg-blue-50 border-blue-200 text-blue-700":"bg-white border-gray-200 text-gray-700 hover:bg-gray-50"),children:(0,og.jsxs)("div",{className:"text-center",children:[(0,og.jsx)("div",{className:"text-lg mb-1",children:e.icon}),(0,og.jsx)("div",{className:"text-sm font-medium",children:e.label})]})},e.key))})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Frame"}),(0,og.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,og.jsx)("option",{value:"all-time",children:"All Time"}),(0,og.jsx)("option",{value:"this-year",children:"This Year"}),(0,og.jsx)("option",{value:"this-month",children:"This Month"}),(0,og.jsx)("option",{value:"last-30-days",children:"Last 30 Days"})]})]})]})}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,og.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:(0,og.jsxs)("div",{className:"flex items-center",children:[(0,og.jsx)(Fv,{className:"h-8 w-8 text-blue-600 mr-3"}),(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-600",children:"Total Participants"}),(0,og.jsx)("p",{className:"text-xl font-bold text-gray-900",children:(null===c||void 0===c||null===(e=c.leaderboard)||void 0===e?void 0:e.length)||0})]})]})}),(0,og.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:(0,og.jsxs)("div",{className:"flex items-center",children:[(0,og.jsx)(Wv,{className:"h-8 w-8 text-green-600 mr-3"}),(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-600",children:"Average Score"}),(0,og.jsx)("p",{className:"text-xl font-bold text-gray-900",children:(null===c||void 0===c||null===(n=c.leaderboard)||void 0===n?void 0:n.length)>0?(c.leaderboard.reduce((e,t)=>{var n;return e+(null!==(n=t.averageScore)&&void 0!==n?n:t.score)},0)/c.leaderboard.length).toFixed(1):"0.0"})]})]})}),(0,og.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:(0,og.jsxs)("div",{className:"flex items-center",children:[(0,og.jsx)(Uv,{className:"h-8 w-8 text-yellow-600 mr-3"}),(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-600",children:"Top Score"}),(0,og.jsx)("p",{className:"text-xl font-bold text-gray-900",children:(null===c||void 0===c||null===(r=c.leaderboard)||void 0===r?void 0:r.length)>0?Math.max(...c.leaderboard.map(e=>{var t;return null!==(t=e.bestScore)&&void 0!==t?t:e.score})).toFixed(1):"0.0"})]})]})}),(0,og.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:(0,og.jsxs)("div",{className:"flex items-center",children:[(0,og.jsx)(Lv,{className:"h-8 w-8 text-purple-600 mr-3"}),(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-600",children:"Competitions"}),(0,og.jsx)("p",{className:"text-xl font-bold text-gray-900",children:"1"})]})]})})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[(0,og.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,og.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Rankings"})}),(0,og.jsx)("div",{className:"overflow-x-auto",children:(0,og.jsxs)("table",{className:"w-full",children:[(0,og.jsx)("thead",{className:"bg-gray-50",children:(0,og.jsxs)("tr",{children:[(0,og.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),(0,og.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shooter"}),(0,og.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Average Score"}),(0,og.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Best Score"}),(0,og.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"X Count"}),(0,og.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Competitions"}),(0,og.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trend"})]})}),(0,og.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:null===c||void 0===c||null===(s=c.leaderboard)||void 0===s?void 0:s.map((e,t)=>{var n,r,s,i,a,o,l,c,u,d;return(0,og.jsxs)("tr",{className:"transition-colors ".concat(m(null===(n=e.competitor)||void 0===n?void 0:n.classification)," hover:opacity-95"),children:[(0,og.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,og.jsxs)("div",{className:"flex items-center",children:[h(e.rank)&&(0,og.jsx)("span",{className:"text-xl mr-2",children:h(e.rank)}),(0,og.jsxs)("span",{className:"text-sm font-medium ".concat(e.rank<=3?"text-gray-900":"text-gray-500"),children:["#",e.rank]})]})}),(0,og.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,og.jsxs)("div",{className:"flex items-center",children:[(0,og.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center mr-3",children:(0,og.jsx)("span",{className:"text-sm font-medium text-gray-700",children:null===(r=e.competitor.firstName)||void 0===r?void 0:r.charAt(0).toUpperCase()})}),(0,og.jsxs)("div",{children:[(0,og.jsxs)("div",{className:"text-sm font-medium text-gray-900 flex items-center gap-2",children:[(0,og.jsx)(Yv,{classification:e.competitor.classification,size:24}),(0,og.jsxs)("span",{children:[e.competitor.firstName," ",e.competitor.lastName]}),e.competitor.classification&&(0,og.jsx)("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full ".concat(f(e.competitor.classification)),title:e.competitor.classification,"aria-label":e.competitor.classification,children:e.competitor.classification})]}),(0,og.jsxs)("div",{className:"text-sm text-gray-500",children:["@",e.competitor.username]})]})]})}),(0,og.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,og.jsx)("div",{className:"text-sm font-medium text-gray-900",children:null!==(s=null===(i=e.averageScore)||void 0===i?void 0:i.toFixed(1))&&void 0!==s?s:null===(a=e.score)||void 0===a?void 0:a.toFixed(1)})}),(0,og.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,og.jsx)("div",{className:"text-sm text-gray-900",children:null===(o=null!==(l=e.bestScore)&&void 0!==l?l:e.score)||void 0===o?void 0:o.toFixed(1)})}),(0,og.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,og.jsx)("div",{className:"text-sm text-gray-900",children:null!==(c=null===(u=e.tiebreakerData)||void 0===u?void 0:u.xCount)&&void 0!==c?c:0})}),(0,og.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,og.jsx)("div",{className:"text-sm text-gray-900",children:null!==(d=e.competitionsCount)&&void 0!==d?d:1})}),(0,og.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,og.jsx)("div",{className:"flex items-center",children:(0,og.jsx)("div",{className:"h-4 w-4 text-gray-400",children:"\u2014"})})})]},"".concat(e.competitor.id,"-").concat(e.rank,"-").concat(t))})})]})}),(!(null!==c&&void 0!==c&&c.leaderboard)||0===c.leaderboard.length)&&(0,og.jsxs)("div",{className:"text-center py-12",children:[(0,og.jsx)(Uv,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,og.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No rankings available"}),(0,og.jsx)("p",{className:"text-gray-600",children:"No scores have been submitted for this category yet."})]})]}),(null===c||void 0===c?void 0:c.recentActivity)&&c.recentActivity.length>0&&(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),(0,og.jsx)("div",{className:"space-y-3",children:c.recentActivity.map((e,t)=>(0,og.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,og.jsx)("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center",children:(0,og.jsx)(Uv,{className:"h-4 w-4 text-blue-600"})}),(0,og.jsxs)("div",{className:"flex-1",children:[(0,og.jsxs)("p",{className:"text-sm text-gray-900",children:[(0,og.jsx)("span",{className:"font-medium",children:e.userName})," scored ",e.score," in ",e.competitionName]}),(0,og.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.date).toLocaleDateString()})]})]},t))})]})]})},Zv=["_f"],ey=["name"],ty=["_f"],ny=["ref","message","type"],ry=["formControl"];var sy=e=>"checkbox"===e.type,iy=e=>e instanceof Date,ay=e=>null==e;const oy=e=>"object"===typeof e;var ly=e=>!ay(e)&&!Array.isArray(e)&&oy(e)&&!iy(e),cy=e=>ly(e)&&e.target?sy(e.target)?e.target.checked:e.target.value:e,uy=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),dy="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function hy(e){let t;const n=Array.isArray(e),r="undefined"!==typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else{if(dy&&(e instanceof Blob||r)||!n&&!ly(e))return e;if(t=n?[]:Object.create(Object.getPrototypeOf(e)),n||(e=>{const t=e.constructor&&e.constructor.prototype;return ly(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const n in e)e.hasOwnProperty(n)&&(t[n]=hy(e[n]));else t=e}return t}var fy=e=>/^\w*$/.test(e),my=e=>void 0===e,py=e=>Array.isArray(e)?e.filter(Boolean):[],gy=e=>py(e.replace(/["|']|\]/g,"").split(/\.|\[/)),vy=(e,t,n)=>{if(!t||!ly(e))return n;const r=(fy(t)?[t]:gy(t)).reduce((e,t)=>ay(e)?e:e[t],e);return my(r)||r===e?my(e[t])?n:e[t]:r},yy=e=>"boolean"===typeof e,xy=(e,t,n)=>{let r=-1;const s=fy(t)?[t]:gy(t),i=s.length,a=i-1;for(;++r<i;){const t=s[r];let i=n;if(r!==a){const n=e[t];i=ly(n)||Array.isArray(n)?n:isNaN(+s[r+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=i,e=e[t]}};const by="blur",wy="focusout",Ny="onBlur",jy="onChange",Sy="onSubmit",_y="onTouched",ky="all",Ey="max",Cy="min",Ty="maxLength",Iy="minLength",Ay="pattern",Ry="required",Dy="validate",Py=t.createContext(null);Py.displayName="HookFormContext";var Oy=function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const s=i;return t._proxyFormState[s]!==ky&&(t._proxyFormState[s]=!r||ky),n&&(n[s]=!0),e[s]}});return s};const Ly="undefined"!==typeof window?t.useLayoutEffect:t.useEffect;var My=e=>"string"===typeof e,Fy=(e,t,n,r,s)=>My(e)?(r&&t.watch.add(e),vy(n,e,s)):Array.isArray(e)?e.map(e=>(r&&t.watch.add(e),vy(n,e))):(r&&(t.watchAll=!0),n),Uy=e=>ay(e)||!oy(e);function Vy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new WeakSet;if(Uy(e)||Uy(t))return e===t;if(iy(e)&&iy(t))return e.getTime()===t.getTime();const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const i of r){const r=e[i];if(!s.includes(i))return!1;if("ref"!==i){const e=t[i];if(iy(r)&&iy(e)||ly(r)&&ly(e)||Array.isArray(r)&&Array.isArray(e)?!Vy(r,e,n):r!==e)return!1}}return!0}var zy=(e,t,n,r,s)=>t?Ue(Ue({},n[e]),{},{types:Ue(Ue({},n[e]&&n[e].types?n[e].types:{}),{},{[r]:s||!0})}):{},qy=e=>Array.isArray(e)?e:[e],By=()=>{let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next&&n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}},Qy=e=>ly(e)&&!Object.keys(e).length,Hy=e=>"file"===e.type,Wy=e=>"function"===typeof e,Ky=e=>{if(!dy)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Gy=e=>"select-multiple"===e.type,Xy=e=>"radio"===e.type,$y=e=>Ky(e)&&e.isConnected;function Yy(e,t){const n=Array.isArray(t)?t:fy(t)?[t]:gy(t),r=1===n.length?e:function(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=my(e)?r++:e[t[r++]];return e}(e,n),s=n.length-1,i=n[s];return r&&delete r[i],0!==s&&(ly(r)&&Qy(r)||Array.isArray(r)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!my(e[t]))return!1;return!0}(r))&&Yy(e,n.slice(0,-1)),e}var Jy=e=>{for(const t in e)if(Wy(e[t]))return!0;return!1};function Zy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Array.isArray(e);if(ly(e)||n)for(const r in e)Array.isArray(e[r])||ly(e[r])&&!Jy(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Zy(e[r],t[r])):ay(e[r])||(t[r]=!0);return t}function ex(e,t,n){const r=Array.isArray(e);if(ly(e)||r)for(const s in e)Array.isArray(e[s])||ly(e[s])&&!Jy(e[s])?my(t)||Uy(n[s])?n[s]=Array.isArray(e[s])?Zy(e[s],[]):Ue({},Zy(e[s])):ex(e[s],ay(t)?{}:t[s],n[s]):n[s]=!Vy(e[s],t[s]);return n}var tx=(e,t)=>ex(e,t,Zy(t));const nx={value:!1,isValid:!1},rx={value:!0,isValid:!0};var sx=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!my(e[0].attributes.value)?my(e[0].value)||""===e[0].value?rx:{value:e[0].value,isValid:!0}:rx:nx}return nx},ix=(e,t)=>{let{valueAsNumber:n,valueAsDate:r,setValueAs:s}=t;return my(e)?e:n?""===e?NaN:e?+e:e:r&&My(e)?new Date(e):s?s(e):e};const ax={isValid:!1,value:null};var ox=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,ax):ax;function lx(e){const t=e.ref;return Hy(t)?t.files:Xy(t)?ox(e.refs).value:Gy(t)?[...t.selectedOptions].map(e=>{let{value:t}=e;return t}):sy(t)?sx(e.refs).value:ix(my(t.value)?e.ref.value:t.value,e)}var cx=e=>e instanceof RegExp,ux=e=>my(e)?e:cx(e)?e.source:ly(e)?cx(e.value)?e.value.source:e.value:e,dx=e=>({isOnSubmit:!e||e===Sy,isOnBlur:e===Ny,isOnChange:e===jy,isOnAll:e===ky,isOnTouch:e===_y});const hx="AsyncFunction";var fx=e=>!!e&&!!e.validate&&!!(Wy(e.validate)&&e.validate.constructor.name===hx||ly(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===hx)),mx=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const px=(e,t,n,r)=>{for(const s of n||Object.keys(e)){const n=vy(e,s);if(n){const{_f:e}=n,i=fg(n,Zv);if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],s)&&!r)return!0;if(e.ref&&t(e.ref,e.name)&&!r)return!0;if(px(i,t))break}else if(ly(i)&&px(i,t))break}}};function gx(e,t,n){const r=vy(e,n);if(r||fy(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const r=s.join("."),i=vy(t,r),a=vy(e,r);if(i&&!Array.isArray(i)&&n!==r)return{name:n};if(a&&a.type)return{name:r,error:a};if(a&&a.root&&a.root.type)return{name:"".concat(r,".root"),error:a.root};s.pop()}return{name:n}}var vx=(e,t,n)=>{const r=qy(vy(e,n));return xy(r,"root",t[n]),xy(e,n,r),e},yx=e=>My(e);function xx(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(yx(e)||Array.isArray(e)&&e.every(yx)||yy(e)&&!e)return{type:n,message:yx(e)?e:"",ref:t}}var bx=e=>ly(e)&&!cx(e)?e:{value:e,message:""},wx=async(e,t,n,r,s,i)=>{const{ref:a,refs:o,required:l,maxLength:c,minLength:u,min:d,max:h,pattern:f,validate:m,name:p,valueAsNumber:g,mount:v}=e._f,y=vy(n,p);if(!v||t.has(p))return{};const x=o?o[0]:a,b=e=>{s&&x.reportValidity&&(x.setCustomValidity(yy(e)?"":e||""),x.reportValidity())},w={},N=Xy(a),j=sy(a),S=N||j,_=(g||Hy(a))&&my(a.value)&&my(y)||Ky(a)&&""===a.value||""===y||Array.isArray(y)&&!y.length,k=zy.bind(null,p,r,w),E=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ty,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Iy;const i=e?t:n;w[p]=Ue({type:e?r:s,message:i,ref:a},k(e?r:s,i))};if(i?!Array.isArray(y)||!y.length:l&&(!S&&(_||ay(y))||yy(y)&&!y||j&&!sx(o).isValid||N&&!ox(o).isValid)){const{value:e,message:t}=yx(l)?{value:!!l,message:l}:bx(l);if(e&&(w[p]=Ue({type:Ry,message:t,ref:x},k(Ry,t)),!r))return b(t),w}if(!_&&(!ay(d)||!ay(h))){let e,t;const n=bx(h),s=bx(d);if(ay(y)||isNaN(y)){const r=a.valueAsDate||new Date(y),i=e=>new Date((new Date).toDateString()+" "+e),o="time"==a.type,l="week"==a.type;My(n.value)&&y&&(e=o?i(y)>i(n.value):l?y>n.value:r>new Date(n.value)),My(s.value)&&y&&(t=o?i(y)<i(s.value):l?y<s.value:r<new Date(s.value))}else{const r=a.valueAsNumber||(y?+y:y);ay(n.value)||(e=r>n.value),ay(s.value)||(t=r<s.value)}if((e||t)&&(E(!!e,n.message,s.message,Ey,Cy),!r))return b(w[p].message),w}if((c||u)&&!_&&(My(y)||i&&Array.isArray(y))){const e=bx(c),t=bx(u),n=!ay(e.value)&&y.length>+e.value,s=!ay(t.value)&&y.length<+t.value;if((n||s)&&(E(n,e.message,t.message),!r))return b(w[p].message),w}if(f&&!_&&My(y)){const{value:e,message:t}=bx(f);if(cx(e)&&!y.match(e)&&(w[p]=Ue({type:Ay,message:t,ref:a},k(Ay,t)),!r))return b(t),w}if(m)if(Wy(m)){const e=xx(await m(y,n),x);if(e&&(w[p]=Ue(Ue({},e),k(Dy,e.message)),!r))return b(e.message),w}else if(ly(m)){let e={};for(const t in m){if(!Qy(e)&&!r)break;const s=xx(await m[t](y,n),x,t);s&&(e=Ue(Ue({},s),k(t,s.message)),b(s.message),r&&(w[p]=e))}if(!Qy(e)&&(w[p]=Ue({ref:x},e),!r))return w}return b(!0),w};const Nx={mode:Sy,reValidateMode:jy,shouldFocusError:!0};function jx(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Ue(Ue({},Nx),t),r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Wy(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1},s={},i=(ly(n.defaultValues)||ly(n.values))&&hy(n.defaultValues||n.values)||{},a=n.shouldUnregister?{}:hy(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let d=Ue({},u);const h={array:By(),state:By()},f=n.criteriaMode===ky,m=async e=>{if(!n.disabled&&(u.isValid||d.isValid||e)){const e=n.resolver?Qy((await x()).errors):await b(s,!0);e!==r.isValid&&h.state.next({isValid:e})}},p=(e,t)=>{!n.disabled&&(u.isValidating||u.validatingFields||d.isValidating||d.validatingFields)&&((e||Array.from(l.mount)).forEach(e=>{e&&(t?xy(r.validatingFields,e,t):Yy(r.validatingFields,e))}),h.state.next({validatingFields:r.validatingFields,isValidating:!Qy(r.validatingFields)}))},g=(e,t,n,r)=>{const l=vy(s,e);if(l){const s=vy(a,e,my(n)?vy(i,e):n);my(s)||r&&r.defaultChecked||t?xy(a,e,t?s:lx(l._f)):j(e,s),o.mount&&m()}},v=(e,t,s,a,o)=>{let l=!1,c=!1;const f={name:e};if(!n.disabled){if(!s||a){(u.isDirty||d.isDirty)&&(c=r.isDirty,r.isDirty=f.isDirty=w(),l=c!==f.isDirty);const n=Vy(vy(i,e),t);c=!!vy(r.dirtyFields,e),n?Yy(r.dirtyFields,e):xy(r.dirtyFields,e,!0),f.dirtyFields=r.dirtyFields,l=l||(u.dirtyFields||d.dirtyFields)&&c!==!n}if(s){const t=vy(r.touchedFields,e);t||(xy(r.touchedFields,e,s),f.touchedFields=r.touchedFields,l=l||(u.touchedFields||d.touchedFields)&&t!==s)}l&&o&&h.state.next(f)}return l?f:{}},y=(t,s,i,a)=>{const o=vy(r.errors,t),l=(u.isValid||d.isValid)&&yy(s)&&r.isValid!==s;if(n.delayError&&i?(e=(e=>t=>{clearTimeout(c),c=setTimeout(e,t)})(()=>((e,t)=>{xy(r.errors,e,t),h.state.next({errors:r.errors})})(t,i)),e(n.delayError)):(clearTimeout(c),e=null,i?xy(r.errors,t,i):Yy(r.errors,t)),(i?!Vy(o,i):o)||!Qy(a)||l){const e=Ue(Ue(Ue({},a),l&&yy(s)?{isValid:s}:{}),{},{errors:r.errors,name:t});r=Ue(Ue({},r),e),h.state.next(e)}},x=async e=>{p(e,!0);const t=await n.resolver(a,n.context,((e,t,n,r)=>{const s={};for(const i of e){const e=vy(t,i);e&&xy(s,i,e._f)}return{criteriaMode:n,names:[...e],fields:s,shouldUseNativeValidation:r}})(e||l.mount,s,n.criteriaMode,n.shouldUseNativeValidation));return p(e),t},b=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{valid:!0};for(const i in e){const o=e[i];if(o){const{_f:e}=o,c=fg(o,ty);if(e){const c=l.array.has(e.name),d=o._f&&fx(o._f);d&&u.validatingFields&&p([i],!0);const h=await wx(o,l.disabled,a,f,n.shouldUseNativeValidation&&!t,c);if(d&&u.validatingFields&&p([i]),h[e.name]&&(s.valid=!1,t))break;!t&&(vy(h,e.name)?c?vx(r.errors,h,e.name):xy(r.errors,e.name,h[e.name]):Yy(r.errors,e.name))}!Qy(c)&&await b(c,t,s)}}return s.valid},w=(e,t)=>!n.disabled&&(e&&t&&xy(a,e,t),!Vy(T(),i)),N=(e,t,n)=>Fy(e,l,Ue({},o.mount?a:my(t)?i:My(e)?{[e]:t}:t),n,t),j=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=vy(s,e);let i=t;if(r){const n=r._f;n&&(!n.disabled&&xy(a,e,ix(t,n)),i=Ky(n.ref)&&ay(t)?"":t,Gy(n.ref)?[...n.ref.options].forEach(e=>e.selected=i.includes(e.value)):n.refs?sy(n.ref)?n.refs.forEach(e=>{e.defaultChecked&&e.disabled||(Array.isArray(i)?e.checked=!!i.find(t=>t===e.value):e.checked=i===e.value||!!i)}):n.refs.forEach(e=>e.checked=e.value===i):Hy(n.ref)?n.ref.value="":(n.ref.value=i,n.ref.type||h.state.next({name:e,values:hy(a)})))}(n.shouldDirty||n.shouldTouch)&&v(e,i,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&C(e)},S=(e,t,n)=>{for(const r in t){if(!t.hasOwnProperty(r))return;const i=t[r],a=e+"."+r,o=vy(s,a);(l.array.has(e)||ly(i)||o&&!o._f)&&!iy(i)?S(a,i,n):j(a,i,n)}},_=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const c=vy(s,e),f=l.array.has(e),m=hy(t);xy(a,e,m),f?(h.array.next({name:e,values:hy(a)}),(u.isDirty||u.dirtyFields||d.isDirty||d.dirtyFields)&&n.shouldDirty&&h.state.next({name:e,dirtyFields:tx(i,a),isDirty:w(e,m)})):!c||c._f||ay(m)?j(e,m,n):S(e,m,n),mx(e,l)&&h.state.next(Ue(Ue({},r),{},{name:e})),h.state.next({name:o.mount?e:void 0,values:hy(a)})},k=async t=>{o.mount=!0;const i=t.target;let c=i.name,g=!0;const w=vy(s,c),N=e=>{g=Number.isNaN(e)||iy(e)&&isNaN(e.getTime())||Vy(e,vy(a,c,e))},j=dx(n.mode),S=dx(n.reValidateMode);if(w){let o,k;const E=i.type?lx(w._f):cy(t),T=t.type===by||t.type===wy,I=!((_=w._f).mount&&(_.required||_.min||_.max||_.maxLength||_.minLength||_.pattern||_.validate))&&!n.resolver&&!vy(r.errors,c)&&!w._f.deps||((e,t,n,r,s)=>!s.isOnAll&&(!n&&s.isOnTouch?!(t||e):(n?r.isOnBlur:s.isOnBlur)?!e:!(n?r.isOnChange:s.isOnChange)||e))(T,vy(r.touchedFields,c),r.isSubmitted,S,j),A=mx(c,l,T);xy(a,c,E),T?i&&i.readOnly||(w._f.onBlur&&w._f.onBlur(t),e&&e(0)):w._f.onChange&&w._f.onChange(t);const R=v(c,E,T),D=!Qy(R)||A;if(!T&&h.state.next({name:c,type:t.type,values:hy(a)}),I)return(u.isValid||d.isValid)&&("onBlur"===n.mode?T&&m():T||m()),D&&h.state.next(Ue({name:c},A?{}:R));if(!T&&A&&h.state.next(Ue({},r)),n.resolver){const{errors:e}=await x([c]);if(N(E),g){const t=gx(r.errors,s,c),n=gx(e,s,t.name||c);o=n.error,c=n.name,k=Qy(e)}}else p([c],!0),o=(await wx(w,l.disabled,a,f,n.shouldUseNativeValidation))[c],p([c]),N(E),g&&(o?k=!1:(u.isValid||d.isValid)&&(k=await b(s,!0)));g&&(w._f.deps&&C(w._f.deps),y(c,k,o,R))}var _},E=(e,t)=>{if(vy(r.errors,t)&&e.focus)return e.focus(),1},C=async function(e){let t,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=qy(e);if(n.resolver){const n=await(async e=>{const{errors:t}=await x(e);if(e)for(const n of e){const e=vy(t,n);e?xy(r.errors,n,e):Yy(r.errors,n)}else r.errors=t;return t})(my(e)?e:o);t=Qy(n),i=e?!o.some(e=>vy(n,e)):t}else e?(i=(await Promise.all(o.map(async e=>{const t=vy(s,e);return await b(t&&t._f?{[e]:t}:t)}))).every(Boolean),(i||r.isValid)&&m()):i=t=await b(s);return h.state.next(Ue(Ue(Ue({},!My(e)||(u.isValid||d.isValid)&&t!==r.isValid?{}:{name:e}),n.resolver||!e?{isValid:t}:{}),{},{errors:r.errors})),a.shouldFocus&&!i&&px(s,E,e?o:l.mount),i},T=e=>{const t=Ue({},o.mount?a:i);return my(e)?t:My(e)?vy(t,e):e.map(e=>vy(t,e))},I=(e,t)=>({invalid:!!vy((t||r).errors,e),isDirty:!!vy((t||r).dirtyFields,e),error:vy((t||r).errors,e),isValidating:!!vy(r.validatingFields,e),isTouched:!!vy((t||r).touchedFields,e)}),A=(e,t,n)=>{const i=(vy(s,e,{_f:{}})._f||{}).ref,a=vy(r.errors,e)||{},{ref:o,message:l,type:c}=a,u=fg(a,ny);xy(r.errors,e,Ue(Ue(Ue({},u),t),{},{ref:i})),h.state.next({name:e,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&i&&i.focus&&i.focus()},R=e=>h.state.subscribe({next:t=>{var n,s,o;n=e.name,s=t.name,o=e.exact,n&&s&&n!==s&&!qy(n).some(e=>e&&(o?e===s:e.startsWith(s)||s.startsWith(e)))||!((e,t,n,r)=>{n(e);const{name:s}=e,i=fg(e,ey);return Qy(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(e=>t[e]===(!r||ky))})(t,e.formState||u,V,e.reRenderRoot)||e.callback(Ue(Ue(Ue({values:Ue({},a)},r),t),{},{defaultValues:i}))}}).unsubscribe,D=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const o of e?qy(e):l.mount)l.mount.delete(o),l.array.delete(o),t.keepValue||(Yy(s,o),Yy(a,o)),!t.keepError&&Yy(r.errors,o),!t.keepDirty&&Yy(r.dirtyFields,o),!t.keepTouched&&Yy(r.touchedFields,o),!t.keepIsValidating&&Yy(r.validatingFields,o),!n.shouldUnregister&&!t.keepDefaultValue&&Yy(i,o);h.state.next({values:hy(a)}),h.state.next(Ue(Ue({},r),t.keepDirty?{isDirty:w()}:{})),!t.keepIsValid&&m()},P=e=>{let{disabled:t,name:n}=e;(yy(t)&&o.mount||t||l.disabled.has(n))&&(t?l.disabled.add(n):l.disabled.delete(n))},O=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=vy(s,e);const a=yy(t.disabled)||yy(n.disabled);return xy(s,e,Ue(Ue({},r||{}),{},{_f:Ue(Ue({},r&&r._f?r._f:{ref:{name:e}}),{},{name:e,mount:!0},t)})),l.mount.add(e),r?P({disabled:yy(t.disabled)?t.disabled:n.disabled,name:e}):g(e,!0,t.value),Ue(Ue(Ue({},a?{disabled:t.disabled||n.disabled}:{}),n.progressive?{required:!!t.required,min:ux(t.min),max:ux(t.max),minLength:ux(t.minLength),maxLength:ux(t.maxLength),pattern:ux(t.pattern)}:{}),{},{name:e,onChange:k,onBlur:k,ref:a=>{if(a){O(e,t),r=vy(s,e);const n=my(a.value)&&a.querySelectorAll&&a.querySelectorAll("input,select,textarea")[0]||a,o=(e=>Xy(e)||sy(e))(n),l=r._f.refs||[];if(o?l.find(e=>e===n):n===r._f.ref)return;xy(s,e,{_f:Ue(Ue({},r._f),o?{refs:[...l.filter($y),n,...Array.isArray(vy(i,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n})}),g(e,!1,void 0,n)}else r=vy(s,e,{}),r._f&&(r._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!uy(l.array,e)||!o.action)&&l.unMount.add(e)}})},L=()=>n.shouldFocusError&&px(s,E,l.mount),M=(e,t)=>async i=>{let o;i&&(i.preventDefault&&i.preventDefault(),i.persist&&i.persist());let c=hy(a);if(h.state.next({isSubmitting:!0}),n.resolver){const{errors:e,values:t}=await x();r.errors=e,c=hy(t)}else await b(s);if(l.disabled.size)for(const e of l.disabled)Yy(c,e);if(Yy(r.errors,"root"),Qy(r.errors)){h.state.next({errors:{}});try{await e(c,i)}catch(u){o=u}}else t&&await t(Ue({},r.errors),i),L(),setTimeout(L);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Qy(r.errors)&&!o,submitCount:r.submitCount+1,errors:r.errors}),o)throw o},F=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const c=e?hy(e):i,d=hy(c),f=Qy(e),m=f?i:d;if(t.keepDefaultValues||(i=c),!t.keepValues){if(t.keepDirtyValues){const e=new Set([...l.mount,...Object.keys(tx(i,a))]);for(const t of Array.from(e))vy(r.dirtyFields,t)?xy(m,t,vy(a,t)):_(t,vy(m,t))}else{if(dy&&my(e))for(const e of l.mount){const t=vy(s,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(Ky(e)){const t=e.closest("form");if(t){t.reset();break}}}}if(t.keepFieldsRef)for(const e of l.mount)_(e,vy(m,e));else s={}}a=n.shouldUnregister?t.keepDefaultValues?hy(i):{}:hy(m),h.array.next({values:Ue({},m)}),h.state.next({values:Ue({},m)})}l={mount:t.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!t.keepIsValid||!!t.keepDirtyValues,o.watch=!!n.shouldUnregister,h.state.next({submitCount:t.keepSubmitCount?r.submitCount:0,isDirty:!f&&(t.keepDirty?r.isDirty:!(!t.keepDefaultValues||Vy(e,i))),isSubmitted:!!t.keepIsSubmitted&&r.isSubmitted,dirtyFields:f?{}:t.keepDirtyValues?t.keepDefaultValues&&a?tx(i,a):r.dirtyFields:t.keepDefaultValues&&e?tx(i,e):t.keepDirty?r.dirtyFields:{},touchedFields:t.keepTouched?r.touchedFields:{},errors:t.keepErrors?r.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&r.isSubmitSuccessful,isSubmitting:!1,defaultValues:i})},U=(e,t)=>F(Wy(e)?e(a):e,t),V=e=>{r=Ue(Ue({},r),e)},z={control:{register:O,unregister:D,getFieldState:I,handleSubmit:M,setError:A,_subscribe:R,_runSchema:x,_focusError:L,_getWatch:N,_getDirty:w,_setValid:m,_setFieldArray:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,f=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],m=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(c&&l&&!n.disabled){if(o.action=!0,m&&Array.isArray(vy(s,e))){const t=l(vy(s,e),c.argA,c.argB);f&&xy(s,e,t)}if(m&&Array.isArray(vy(r.errors,e))){const t=l(vy(r.errors,e),c.argA,c.argB);f&&xy(r.errors,e,t),((e,t)=>{!py(vy(e,t)).length&&Yy(e,t)})(r.errors,e)}if((u.touchedFields||d.touchedFields)&&m&&Array.isArray(vy(r.touchedFields,e))){const t=l(vy(r.touchedFields,e),c.argA,c.argB);f&&xy(r.touchedFields,e,t)}(u.dirtyFields||d.dirtyFields)&&(r.dirtyFields=tx(i,a)),h.state.next({name:e,isDirty:w(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else xy(a,e,t)},_setDisabledField:P,_setErrors:e=>{r.errors=e,h.state.next({errors:r.errors,isValid:!1})},_getFieldArray:e=>py(vy(o.mount?a:i,e,n.shouldUnregister?vy(i,e,[]):[])),_reset:F,_resetDefaultValues:()=>Wy(n.defaultValues)&&n.defaultValues().then(e=>{U(e,n.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(const e of l.unMount){const t=vy(s,e);t&&(t._f.refs?t._f.refs.every(e=>!$y(e)):!$y(t._f.ref))&&D(e)}l.unMount=new Set},_disableForm:e=>{yy(e)&&(h.state.next({disabled:e}),px(s,(t,n)=>{const r=vy(s,n);r&&(t.disabled=r._f.disabled||e,Array.isArray(r._f.refs)&&r._f.refs.forEach(t=>{t.disabled=r._f.disabled||e}))},0,!1))},_subjects:h,_proxyFormState:u,get _fields(){return s},get _formValues(){return a},get _state(){return o},set _state(e){o=e},get _defaultValues(){return i},get _names(){return l},set _names(e){l=e},get _formState(){return r},get _options(){return n},set _options(e){n=Ue(Ue({},n),e)}},subscribe:e=>(o.mount=!0,d=Ue(Ue({},d),e.formState),R(Ue(Ue({},e),{},{formState:d}))),trigger:C,register:O,handleSubmit:M,watch:(e,t)=>Wy(e)?h.state.subscribe({next:n=>"values"in n&&e(N(void 0,t),n)}):N(e,t,!0),setValue:_,getValues:T,reset:U,resetField:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};vy(s,e)&&(my(t.defaultValue)?_(e,hy(vy(i,e))):(_(e,t.defaultValue),xy(i,e,hy(t.defaultValue))),t.keepTouched||Yy(r.touchedFields,e),t.keepDirty||(Yy(r.dirtyFields,e),r.isDirty=t.defaultValue?w(e,hy(vy(i,e))):w()),t.keepError||(Yy(r.errors,e),u.isValid&&m()),h.state.next(Ue({},r)))},clearErrors:e=>{e&&qy(e).forEach(e=>Yy(r.errors,e)),h.state.next({errors:e?r.errors:{}})},unregister:D,setError:A,setFocus:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=vy(s,e),r=n&&n._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&Wy(e.select)&&e.select())}},getFieldState:I};return Ue(Ue({},z),{},{formControl:z})}function Sx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.useRef(void 0),r=t.useRef(void 0),[s,i]=t.useState({isDirty:!1,isValidating:!1,isLoading:Wy(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Wy(e.defaultValues)?void 0:e.defaultValues});if(!n.current)if(e.formControl)n.current=Ue(Ue({},e.formControl),{},{formState:s}),e.defaultValues&&!Wy(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const t=jx(e),{formControl:r}=t,i=fg(t,ry);n.current=Ue(Ue({},i),{},{formState:s})}const a=n.current.control;return a._options=e,Ly(()=>{const e=a._subscribe({formState:a._proxyFormState,callback:()=>i(Ue({},a._formState)),reRenderRoot:!0});return i(e=>Ue(Ue({},e),{},{isReady:!0})),a._formState.isReady=!0,e},[a]),t.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),t.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),t.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),t.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),t.useEffect(()=>{if(a._proxyFormState.isDirty){const e=a._getDirty();e!==s.isDirty&&a._subjects.state.next({isDirty:e})}},[a,s.isDirty]),t.useEffect(()=>{e.values&&!Vy(e.values,r.current)?(a._reset(e.values,Ue({keepFieldsRef:!0},a._options.resetOptions)),r.current=e.values,i(e=>Ue({},e))):a._resetDefaultValues()},[a,e.values]),t.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next(Ue({},a._formState))),a._removeUnmounted()}),n.current.formState=Oy(s,a),n.current}const _x=["title","titleId"];function kx(e,n){let{title:r,titleId:s}=e,i=fg(e,_x);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const Ex=t.forwardRef(kx),Cx=["title","titleId"];function Tx(e,n){let{title:r,titleId:s}=e,i=fg(e,Cx);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const Ix=t.forwardRef(Tx),Ax=["title","titleId"];function Rx(e,n){let{title:r,titleId:s}=e,i=fg(e,Ax);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const Dx=t.forwardRef(Rx),Px=["title","titleId"];function Ox(e,n){let{title:r,titleId:s}=e,i=fg(e,Px);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const Lx=t.forwardRef(Ox),Mx=["title","titleId"];function Fx(e,n){let{title:r,titleId:s}=e,i=fg(e,Mx);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const Ux=t.forwardRef(Fx),Vx=()=>{const{user:e,updateUser:n}=hg(),[r,s]=(0,t.useState)(!1),[i,a]=(0,t.useState)("overview"),[o,l]=(0,t.useState)(null);console.log("Profile component - user:",e);const c=e=>{switch((e||"").toLowerCase()){case"grand master":return"bg-purple-50 text-purple-700 border border-purple-200";case"master":return"bg-blue-50 text-blue-700 border border-blue-200";case"diamond":return"bg-cyan-50 text-cyan-700 border border-cyan-200";case"platinum":default:return"bg-gray-50 text-gray-700 border border-gray-200";case"gold":return"bg-yellow-50 text-yellow-800 border border-yellow-200";case"bronze":return"bg-orange-50 text-orange-700 border border-orange-200"}},{register:u,handleSubmit:d,formState:{errors:h},reset:f}=Sx(),{data:m,isLoading:p}=(0,De.useQuery)(["user-stats",null===e||void 0===e?void 0:e.id],async()=>{if(null===e||void 0===e||!e.id)return null;return(await iv(e.id)).data},{enabled:!(null===e||void 0===e||!e.id)}),{data:g,isLoading:v}=(0,De.useQuery)(["user-competitions",null===e||void 0===e?void 0:e.id],async()=>{if(null===e||void 0===e||!e.id)return null;return(await av(e.id)).data},{enabled:!(null===e||void 0===e||!e.id)}),y=async e=>{try{const t=await sv(e);n(t.user),s(!1),en.success("Profile updated successfully!")}catch(t){en.error("Failed to update profile")}},x=()=>{s(!1),f()},b=[{id:"overview",name:"Overview",icon:_g},{id:"statistics",name:"Statistics",icon:Ex},{id:"history",name:"Competition History",icon:Iv},{id:"settings",name:"Settings",icon:Cg}],w=()=>{var t;return(0,og.jsxs)("div",{className:"space-y-6",children:[(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,og.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,og.jsx)("div",{className:"w-20 h-20 bg-rifle-600 rounded-full flex items-center justify-center",children:(0,og.jsx)(_g,{className:"w-10 h-10 text-white"})}),(0,og.jsxs)("div",{children:[(0,og.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:[null===e||void 0===e?void 0:e.firstName," ",null===e||void 0===e?void 0:e.lastName]}),(0,og.jsxs)("p",{className:"text-gray-600",children:["@",null===e||void 0===e?void 0:e.username]}),(null===e||void 0===e?void 0:e.classification)&&"Unclassified"!==e.classification&&(0,og.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,og.jsx)(Yv,{classification:e.classification,size:24}),(0,og.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(c(e.classification)),children:e.classification})]}),(0,og.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,og.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("competitor"===(null===e||void 0===e?void 0:e.role)?"bg-blue-100 text-blue-800":"range_officer"===(null===e||void 0===e?void 0:e.role)?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"),children:null===e||void 0===e||null===(t=e.role)||void 0===t?void 0:t.replace("_"," ")}),(0,og.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(null!==e&&void 0!==e&&e.isVerified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:null!==e&&void 0!==e&&e.isVerified?"Verified":"Pending Verification"})]})]})]}),(0,og.jsxs)("button",{onClick:()=>s(!0),className:"btn-secondary flex items-center space-x-2",children:[(0,og.jsx)(Ix,{className:"w-4 h-4"}),(0,og.jsx)("span",{children:"Edit Profile"})]})]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,og.jsxs)("div",{className:"space-y-4",children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Personal Information"}),(0,og.jsxs)("div",{className:"space-y-3",children:[(0,og.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,og.jsx)(Dx,{className:"w-5 h-5 text-gray-400"}),(0,og.jsx)("span",{className:"text-gray-900",children:null===e||void 0===e?void 0:e.email})]}),(null===e||void 0===e?void 0:e.phone)&&(0,og.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,og.jsx)(Lx,{className:"w-5 h-5 text-gray-400"}),(0,og.jsx)("span",{className:"text-gray-900",children:null===e||void 0===e?void 0:e.phone})]}),(null===e||void 0===e?void 0:e.location)&&(0,og.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,og.jsx)(Sv,{className:"w-5 h-5 text-gray-400"}),(0,og.jsx)("span",{className:"text-gray-900",children:null===e||void 0===e?void 0:e.location})]}),(null===e||void 0===e?void 0:e.dateOfBirth)&&(0,og.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,og.jsx)(Iv,{className:"w-5 h-5 text-gray-400"}),(0,og.jsx)("span",{className:"text-gray-900",children:j(e.dateOfBirth)})]})]})]}),(0,og.jsxs)("div",{className:"space-y-4",children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Stats"}),(0,og.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,og.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[(0,og.jsx)("div",{className:"text-2xl font-bold text-rifle-600",children:E||(null===e||void 0===e?void 0:e.totalCompetitions)||0}),(0,og.jsx)("div",{className:"text-sm text-gray-600",children:"Competitions"})]}),(0,og.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[(0,og.jsx)("div",{className:"text-2xl font-bold text-rifle-600",children:k||(null===e||void 0===e?void 0:e.totalScores)||0}),(0,og.jsx)("div",{className:"text-sm text-gray-600",children:"Scores"})]}),(0,og.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[(0,og.jsx)("div",{className:"text-2xl font-bold text-rifle-600",children:T||(null===e||void 0===e?void 0:e.personalBestIndoor)||0}),(0,og.jsx)("div",{className:"text-sm text-gray-600",children:"Best Indoor"})]}),(0,og.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[(0,og.jsx)("div",{className:"text-2xl font-bold text-rifle-600",children:I||(null===e||void 0===e?void 0:e.personalBestOutdoor)||0}),(0,og.jsx)("div",{className:"text-sm text-gray-600",children:"Best Outdoor"})]})]}),(null===e||void 0===e?void 0:e.classification)&&"Unclassified"!==e.classification&&(0,og.jsx)("div",{className:"mt-4 p-4 bg-gradient-to-r from-rifle-50 to-rifle-100 rounded-lg border border-rifle-200",children:(0,og.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,og.jsx)(Yv,{classification:e.classification,size:32}),(0,og.jsxs)("div",{className:"text-center",children:[(0,og.jsx)("div",{className:"text-lg font-semibold text-rifle-800",children:"Current Rank"}),(0,og.jsx)("div",{className:"text-2xl font-bold text-rifle-900",children:e.classification}),(null===e||void 0===e?void 0:e.averageScore)&&(0,og.jsxs)("div",{className:"text-sm text-rifle-700",children:["Avg Score: ",e.averageScore.toFixed(1)]})]})]})})]})]})]}),r&&(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit Profile"}),(0,og.jsxs)("form",{onSubmit:d(y),className:"space-y-4",children:[(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"First Name"}),(0,og.jsx)("input",Ue(Ue({type:"text",defaultValue:null===e||void 0===e?void 0:e.firstName},u("firstName",{required:"First name is required"})),{},{className:"input-field mt-1"})),h.firstName&&(0,og.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.firstName.message})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),(0,og.jsx)("input",Ue(Ue({type:"text",defaultValue:null===e||void 0===e?void 0:e.lastName},u("lastName",{required:"Last name is required"})),{},{className:"input-field mt-1"})),h.lastName&&(0,og.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.lastName.message})]})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),(0,og.jsx)("input",Ue(Ue({type:"tel",defaultValue:null===e||void 0===e?void 0:e.phone},u("phone")),{},{className:"input-field mt-1"}))]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Location"}),(0,og.jsx)("input",Ue(Ue({type:"text",defaultValue:null===e||void 0===e?void 0:e.location},u("location")),{},{className:"input-field mt-1"}))]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bio"}),(0,og.jsx)("textarea",Ue(Ue({defaultValue:null===e||void 0===e?void 0:e.bio},u("bio")),{},{rows:3,className:"input-field mt-1",placeholder:"Tell us about yourself..."}))]}),(0,og.jsxs)("div",{className:"flex space-x-3",children:[(0,og.jsxs)("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[(0,og.jsx)(Ux,{className:"w-4 h-4"}),(0,og.jsx)("span",{children:"Save Changes"})]}),(0,og.jsxs)("button",{type:"button",onClick:x,className:"btn-secondary flex items-center space-x-2",children:[(0,og.jsx)(Vg,{className:"w-4 h-4"}),(0,og.jsx)("span",{children:"Cancel"})]})]})]})]})]})},N=e=>{if(!e)return 0;const t="number"===typeof e.score?e.score:"number"===typeof e.totalScore?e.totalScore:parseInt(e.score,10);return Number.isFinite(t)?t:0},j=e=>{if(!e)return"N/A";try{if("object"===typeof e){if("function"===typeof e.toDate)return e.toDate().toLocaleDateString();if("function"===typeof e.toMillis)return new Date(e.toMillis()).toLocaleDateString();if("number"===typeof e._seconds)return new Date(1e3*e._seconds).toLocaleDateString();if("number"===typeof e.seconds)return new Date(1e3*e.seconds).toLocaleDateString()}const t=new Date(e);return isNaN(t.getTime())?"N/A":t.toLocaleDateString()}catch(kt){return"N/A"}},S=(null===m||void 0===m?void 0:m.scores)||[],_=[...S].sort((e,t)=>{const n=new Date((null===e||void 0===e?void 0:e.createdAt)||(null===e||void 0===e?void 0:e.submittedAt)||(null===e||void 0===e?void 0:e.date)||0).getTime();return new Date((null===t||void 0===t?void 0:t.createdAt)||(null===t||void 0===t?void 0:t.submittedAt)||(null===t||void 0===t?void 0:t.date)||0).getTime()-n}),k=S.length,E=new Set(S.map(e=>e.competitionId)).size,C=k>0?Math.round(S.reduce((e,t)=>e+N(t),0)/k):0,T=S.filter(e=>{var t;return"indoor"===(null===e||void 0===e||null===(t=e.competition)||void 0===t?void 0:t.competitionType)}).reduce((e,t)=>Math.max(e,N(t)),0),I=S.filter(e=>{var t;return"outdoor"===(null===e||void 0===e||null===(t=e.competition)||void 0===t?void 0:t.competitionType)}).reduce((e,t)=>Math.max(e,N(t)),0);return e?(0,og.jsxs)("div",{className:"space-y-6",children:[(0,og.jsxs)("div",{className:"text-center",children:[(0,og.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Profile"}),(0,og.jsx)("p",{className:"text-gray-600",children:"Manage your account and view your statistics"})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,og.jsx)("div",{className:"border-b border-gray-200",children:(0,og.jsx)("nav",{className:"flex space-x-8 px-6",children:b.map(e=>{const t=e.icon;return(0,og.jsxs)("button",{onClick:()=>a(e.id),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat(i===e.id?"border-rifle-500 text-rifle-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,og.jsx)(t,{className:"w-4 h-4"}),(0,og.jsx)("span",{children:e.name})]},e.id)})})}),(0,og.jsx)("div",{className:"p-6",children:(()=>{switch(i){case"overview":default:return w();case"statistics":return(()=>{var t,n,r,s,i,a,c,u;return(0,og.jsxs)("div",{className:"space-y-6",children:[(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Overview"}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,og.jsxs)("div",{className:"text-center",children:[(0,og.jsx)("div",{className:"text-3xl font-bold text-rifle-600",children:C||(null===e||void 0===e?void 0:e.averageScore)||0}),(0,og.jsx)("div",{className:"text-sm text-gray-600",children:"Average Score"})]}),(0,og.jsxs)("div",{className:"text-center",children:[(0,og.jsx)("div",{className:"text-3xl font-bold text-rifle-600",children:T||(null===e||void 0===e?void 0:e.personalBestIndoor)||0}),(0,og.jsx)("div",{className:"text-sm text-gray-600",children:"Personal Best (Indoor)"})]}),(0,og.jsxs)("div",{className:"text-center",children:[(0,og.jsx)("div",{className:"text-3xl font-bold text-rifle-600",children:I||(null===e||void 0===e?void 0:e.personalBestOutdoor)||0}),(0,og.jsx)("div",{className:"text-sm text-gray-600",children:"Personal Best (Outdoor)"})]}),(0,og.jsx)("div",{className:"text-center",children:null!==e&&void 0!==e&&e.classification&&"Unclassified"!==e.classification?(0,og.jsxs)(og.Fragment,{children:[(0,og.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,og.jsx)(Yv,{classification:e.classification,size:32})}),(0,og.jsx)("div",{className:"text-lg font-bold text-rifle-600",children:e.classification}),(0,og.jsx)("div",{className:"text-sm text-gray-600",children:"Current Rank"})]}):(0,og.jsxs)(og.Fragment,{children:[(0,og.jsx)("div",{className:"text-2xl font-bold text-gray-400",children:"\u2014"}),(0,og.jsx)("div",{className:"text-sm text-gray-600",children:"No Rank Yet"})]})})]})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Performance"}),p?(0,og.jsxs)("div",{className:"text-center py-8",children:[(0,og.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-rifle-600 mx-auto"}),(0,og.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading statistics..."})]}):S.length>0?(0,og.jsx)("div",{className:"space-y-4",children:_.map(e=>{var t;return(0,og.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("div",{className:"font-semibold text-gray-900",children:null===(t=e.competition)||void 0===t?void 0:t.title}),(0,og.jsx)("div",{className:"text-sm text-gray-600",children:j(e.createdAt)})]}),(0,og.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,og.jsx)("button",{onClick:()=>l(e),className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-100",children:"View Shots"}),(0,og.jsxs)("div",{className:"text-right",children:[(0,og.jsx)("div",{className:"text-2xl font-bold text-rifle-600",children:N(e)}),(0,og.jsx)("div",{className:"text-sm text-gray-600",children:"approved"===(e.verificationStatus||"approved")?"Approved":e.verificationStatus||"Pending"})]})]})]},e.id)})}):(0,og.jsxs)("div",{className:"text-center py-8",children:[(0,og.jsx)(xg,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,og.jsx)("p",{className:"text-gray-600",children:"No scores submitted yet"}),(0,og.jsx)("p",{className:"text-sm text-gray-500",children:"Participate in competitions to see your statistics"})]})]}),o&&(0,og.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,og.jsx)("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:(0,og.jsxs)("div",{className:"p-6",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,og.jsxs)("h4",{className:"text-xl font-semibold text-gray-900",children:["Shots \u2014 ",null===(t=o.competition)||void 0===t?void 0:t.title]}),(0,og.jsx)("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-gray-600",children:(0,og.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,og.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,og.jsx)("div",{className:"grid grid-cols-5 md:grid-cols-10 gap-3 mb-4",children:(o.shots||[]).map((e,t)=>(0,og.jsxs)("div",{className:"text-center",children:[(0,og.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:t+1}),(0,og.jsx)("div",{className:"w-10 h-10 rounded-full border-2 flex items-center justify-center text-sm font-medium ".concat(!0===(null===e||void 0===e?void 0:e.isX)||10===parseInt(null===e||void 0===e?void 0:e.value,10)?"border-blue-500 text-blue-600":"border-gray-300"),children:!0===(null===e||void 0===e?void 0:e.isX)?"X":parseInt(null===e||void 0===e?void 0:e.value,10)||0})]},t))}),(0,og.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-4",children:[(0,og.jsxs)("div",{className:"text-gray-700",children:["Date: ",(0,og.jsx)("span",{className:"font-medium",children:j(o.createdAt||o.submittedAt)})]}),(0,og.jsxs)("div",{className:"text-lg font-semibold text-rifle-700",children:["Total: ",N(o)," (",null!==(n=null===(r=o.tiebreakerData)||void 0===r?void 0:r.xCount)&&void 0!==n?n:(null===(s=o.shots)||void 0===s?void 0:s.filter(e=>!0===(null===e||void 0===e?void 0:e.isX)).length)||0,"X)"]})]}),((null===o||void 0===o||null===(i=o.evidence)||void 0===i?void 0:i.photoUrl)||(null===o||void 0===o||null===(a=o.evidence)||void 0===a?void 0:a.videoUrl))&&(0,og.jsxs)("div",{className:"mt-4",children:[(0,og.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Evidence"}),(0,og.jsxs)("div",{className:"space-x-4",children:[(null===o||void 0===o||null===(c=o.evidence)||void 0===c?void 0:c.photoUrl)&&(0,og.jsx)("a",{href:o.evidence.photoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:"View Photo"}),(null===o||void 0===o||null===(u=o.evidence)||void 0===u?void 0:u.videoUrl)&&(0,og.jsx)("a",{href:o.evidence.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:"View Video"})]})]})]})})}),(null===e||void 0===e?void 0:e.classification)&&"Unclassified"!==e.classification&&(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rank Information"}),(0,og.jsx)("div",{className:"flex items-center justify-center p-6 bg-gradient-to-r from-rifle-50 to-rifle-100 rounded-lg border border-rifle-200",children:(0,og.jsxs)("div",{className:"text-center",children:[(0,og.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,og.jsx)(Yv,{classification:e.classification,size:48})}),(0,og.jsx)("div",{className:"text-3xl font-bold text-rifle-900 mb-2",children:e.classification}),(0,og.jsx)("div",{className:"text-lg text-rifle-700 mb-4",children:"Current Classification"}),(null===e||void 0===e?void 0:e.averageScore)&&(0,og.jsxs)("div",{className:"text-sm text-rifle-600",children:["Based on average score of ",e.averageScore.toFixed(1)]}),(0,og.jsx)("div",{className:"mt-4 text-xs text-rifle-600",children:"Classification is automatically calculated based on your performance"})]})})]})]})})();case"history":return(()=>{var e;return(0,og.jsx)("div",{className:"space-y-6",children:(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Competition History"}),v?(0,og.jsxs)("div",{className:"text-center py-8",children:[(0,og.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-rifle-600 mx-auto"}),(0,og.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading competitions..."})]}):(null===g||void 0===g||null===(e=g.competitions)||void 0===e?void 0:e.length)>0?(0,og.jsx)("div",{className:"space-y-4",children:g.competitions.map(e=>{var t,n;return(0,og.jsx)("div",{className:"border rounded-lg p-4",children:(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("h4",{className:"font-semibold text-gray-900",children:e.title}),(0,og.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),(0,og.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,og.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("indoor"===e.competitionType?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:e.competitionType}),(0,og.jsx)("span",{className:"text-sm text-gray-600",children:new Date(null===(t=e.schedule)||void 0===t?void 0:t.competitionDate).toLocaleDateString()})]})]}),(0,og.jsxs)("div",{className:"text-right",children:[(0,og.jsxs)("div",{className:"text-lg font-semibold text-gray-900",children:["$",null===(n=e.entryFee)||void 0===n?void 0:n.amount]}),(0,og.jsx)("div",{className:"text-sm text-gray-600",children:e.status})]})]})},e.id)})}):(0,og.jsxs)("div",{className:"text-center py-8",children:[(0,og.jsx)(Iv,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,og.jsx)("p",{className:"text-gray-600",children:"No competitions participated in yet"}),(0,og.jsx)("p",{className:"text-sm text-gray-500",children:"Join competitions to build your history"})]})]})})})();case"settings":return(()=>{var t;return(0,og.jsx)("div",{className:"space-y-6",children:(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Settings"}),(0,og.jsxs)("div",{className:"space-y-4",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Account Information"}),(0,og.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,og.jsxs)("div",{children:["Username: ",(0,og.jsx)("span",{className:"font-medium",children:null===e||void 0===e?void 0:e.username})]}),(0,og.jsxs)("div",{children:["Email: ",(0,og.jsx)("span",{className:"font-medium",children:null===e||void 0===e?void 0:e.email})]}),(0,og.jsxs)("div",{children:["Role: ",(0,og.jsx)("span",{className:"font-medium capitalize",children:null===e||void 0===e||null===(t=e.role)||void 0===t?void 0:t.replace("_"," ")})]}),(0,og.jsxs)("div",{children:["Member since: ",(0,og.jsx)("span",{className:"font-medium",children:null!==e&&void 0!==e&&e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"})]})]})]}),(0,og.jsxs)("div",{className:"border-t pt-4",children:[(0,og.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Security"}),(0,og.jsx)("button",{className:"btn-secondary",children:"Change Password"})]}),(0,og.jsxs)("div",{className:"border-t pt-4",children:[(0,og.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Preferences"}),(0,og.jsxs)("div",{className:"space-y-2",children:[(0,og.jsxs)("label",{className:"flex items-center",children:[(0,og.jsx)("input",{type:"checkbox",className:"rounded border-gray-300 text-rifle-600 focus:ring-rifle-500"}),(0,og.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Email notifications for new competitions"})]}),(0,og.jsxs)("label",{className:"flex items-center",children:[(0,og.jsx)("input",{type:"checkbox",className:"rounded border-gray-300 text-rifle-600 focus:ring-rifle-500"}),(0,og.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Score verification notifications"})]})]})]})]})]})})})()}})()})]})]}):(0,og.jsxs)("div",{className:"space-y-6",children:[(0,og.jsxs)("div",{className:"text-center",children:[(0,og.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Profile"}),(0,og.jsx)("p",{className:"text-gray-600",children:"Manage your account and view your statistics"})]}),(0,og.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,og.jsxs)("div",{className:"text-center py-8",children:[(0,og.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-rifle-600 mx-auto"}),(0,og.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading profile..."})]})})]})},zx=["title","titleId"];function qx(e,n){let{title:r,titleId:s}=e,i=fg(e,zx);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const Bx=t.forwardRef(qx),Qx=["title","titleId"];function Hx(e,n){let{title:r,titleId:s}=e,i=fg(e,Qx);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},i),r?t.createElement("title",{id:s},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Wx=t.forwardRef(Hx),Kx=()=>{var e,n;const{login:r}=hg(),s=ee(),i=J(),[a,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),u=(null===(e=i.state)||void 0===e||null===(n=e.from)||void 0===n?void 0:n.pathname)||"/",{register:d,handleSubmit:h,formState:{errors:f}}=Sx();return(0,og.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,og.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("div",{className:"flex justify-center mb-6",children:(0,og.jsx)("img",{src:"".concat(".","/TheXringClassic.png"),alt:"The X-Ring Classic",className:"h-16 w-auto object-contain"})}),(0,og.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),(0,og.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",(0,og.jsx)(Ie,{to:"/register",className:"font-medium text-rifle-600 hover:text-rifle-500",children:"create a new account"})]})]}),(0,og.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:h(async e=>{c(!0);try{const t=await r(e.email,e.password);t.success?(en.success("Login successful!"),s(u,{replace:!0})):en.error(t.error||"Login failed")}catch(t){en.error("An error occurred during login")}finally{c(!1)}}),children:[(0,og.jsxs)("div",{className:"space-y-4",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,og.jsx)("input",Ue(Ue({id:"email",type:"email",autoComplete:"email"},d("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}})),{},{className:"input-field mt-1 ".concat(f.email?"border-red-500":""),placeholder:"Enter your email"})),f.email&&(0,og.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.email.message})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,og.jsxs)("div",{className:"relative mt-1",children:[(0,og.jsx)("input",Ue(Ue({id:"password",type:a?"text":"password",autoComplete:"current-password"},d("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})),{},{className:"input-field pr-10 ".concat(f.password?"border-red-500":""),placeholder:"Enter your password"})),(0,og.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>o(!a),children:a?(0,og.jsx)(Bx,{className:"h-5 w-5 text-gray-400"}):(0,og.jsx)(Wx,{className:"h-5 w-5 text-gray-400"})})]}),f.password&&(0,og.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.password.message})]})]}),(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsxs)("div",{className:"flex items-center",children:[(0,og.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-rifle-600 focus:ring-rifle-500 border-gray-300 rounded"}),(0,og.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),(0,og.jsx)("div",{className:"text-sm",children:(0,og.jsx)(Ie,{to:"/forgot-password",className:"font-medium text-rifle-600 hover:text-rifle-500",children:"Forgot your password?"})})]}),(0,og.jsx)("div",{children:(0,og.jsx)("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-rifle-600 hover:bg-rifle-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rifle-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?(0,og.jsxs)("div",{className:"flex items-center",children:[(0,og.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign in"})}),(0,og.jsx)("div",{className:"text-center",children:(0,og.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,og.jsx)(Ie,{to:"/register",className:"font-medium text-rifle-600 hover:text-rifle-500",children:"Sign up here"})]})})]})]})})},Gx=()=>{const{register:e}=hg(),n=ee(),[r,s]=(0,t.useState)(!1),[i,a]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),{register:c,handleSubmit:u,watch:d,formState:{errors:h}}=Sx(),f=d("password");return(0,og.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,og.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("div",{className:"flex justify-center mb-6",children:(0,og.jsx)("img",{src:"".concat(".","/TheXringClassic.png"),alt:"The X-Ring Classic",className:"h-16 w-auto object-contain"})}),(0,og.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),(0,og.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",(0,og.jsx)(Ie,{to:"/login",className:"font-medium text-rifle-600 hover:text-rifle-500",children:"sign in to your existing account"})]})]}),(0,og.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:u(async t=>{l(!0);try{const r={username:t.username,email:t.email,password:t.password,firstName:t.firstName,lastName:t.lastName,dateOfBirth:t.dateOfBirth,phone:t.phone,role:t.role||"competitor"},s=await e(r);s.success?(en.success("Registration successful! Welcome to 22LR Championship!"),n("/")):en.error(s.error||"Registration failed")}catch(r){en.error("An error occurred during registration")}finally{l(!1)}}),children:[(0,og.jsxs)("div",{className:"space-y-4",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),(0,og.jsx)("input",Ue(Ue({id:"username",type:"text"},c("username",{required:"Username is required",minLength:{value:3,message:"Username must be at least 3 characters"},pattern:{value:/^[a-zA-Z0-9_]+$/,message:"Username can only contain letters, numbers, and underscores"}})),{},{className:"input-field mt-1 ".concat(h.username?"border-red-500":""),placeholder:"Choose a username"})),h.username&&(0,og.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.username.message})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,og.jsx)("input",Ue(Ue({id:"email",type:"email",autoComplete:"email"},c("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}})),{},{className:"input-field mt-1 ".concat(h.email?"border-red-500":""),placeholder:"Enter your email"})),h.email&&(0,og.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.email.message})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"First Name"}),(0,og.jsx)("input",Ue(Ue({id:"firstName",type:"text"},c("firstName",{required:"First name is required"})),{},{className:"input-field mt-1 ".concat(h.firstName?"border-red-500":""),placeholder:"Enter your first name"})),h.firstName&&(0,og.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.firstName.message})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Last Name"}),(0,og.jsx)("input",Ue(Ue({id:"lastName",type:"text"},c("lastName",{required:"Last name is required"})),{},{className:"input-field mt-1 ".concat(h.lastName?"border-red-500":""),placeholder:"Enter your last name"})),h.lastName&&(0,og.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.lastName.message})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{htmlFor:"dateOfBirth",className:"block text-sm font-medium text-gray-700",children:"Date of Birth"}),(0,og.jsx)("input",Ue(Ue({id:"dateOfBirth",type:"date"},c("dateOfBirth",{required:"Date of birth is required"})),{},{className:"input-field mt-1 ".concat(h.dateOfBirth?"border-red-500":"")})),h.dateOfBirth&&(0,og.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.dateOfBirth.message})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number (Optional)"}),(0,og.jsx)("input",Ue(Ue({id:"phone",type:"tel"},c("phone")),{},{className:"input-field mt-1",placeholder:"Enter your phone number"}))]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"Role"}),(0,og.jsxs)("select",Ue(Ue({id:"role"},c("role")),{},{className:"input-field mt-1",defaultValue:"competitor",children:[(0,og.jsx)("option",{value:"competitor",children:"Competitor"}),(0,og.jsx)("option",{value:"range_officer",children:"Range Officer"})]}))]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,og.jsxs)("div",{className:"relative mt-1",children:[(0,og.jsx)("input",Ue(Ue({id:"password",type:r?"text":"password"},c("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})),{},{className:"input-field pr-10 ".concat(h.password?"border-red-500":""),placeholder:"Create a password"})),(0,og.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>s(!r),children:r?(0,og.jsx)(Bx,{className:"h-5 w-5 text-gray-400"}):(0,og.jsx)(Wx,{className:"h-5 w-5 text-gray-400"})})]}),h.password&&(0,og.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.password.message})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),(0,og.jsxs)("div",{className:"relative mt-1",children:[(0,og.jsx)("input",Ue(Ue({id:"confirmPassword",type:i?"text":"password"},c("confirmPassword",{required:"Please confirm your password",validate:e=>e===f||"Passwords do not match"})),{},{className:"input-field pr-10 ".concat(h.confirmPassword?"border-red-500":""),placeholder:"Confirm your password"})),(0,og.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>a(!i),children:i?(0,og.jsx)(Bx,{className:"h-5 w-5 text-gray-400"}):(0,og.jsx)(Wx,{className:"h-5 w-5 text-gray-400"})})]}),h.confirmPassword&&(0,og.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.confirmPassword.message})]})]}),(0,og.jsx)("div",{children:(0,og.jsx)("button",{type:"submit",disabled:o,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-rifle-600 hover:bg-rifle-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rifle-500 disabled:opacity-50 disabled:cursor-not-allowed",children:o?(0,og.jsxs)("div",{className:"flex items-center",children:[(0,og.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating account..."]}):"Create account"})}),(0,og.jsx)("div",{className:"text-center",children:(0,og.jsxs)("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",(0,og.jsx)(Ie,{to:"/login",className:"font-medium text-rifle-600 hover:text-rifle-500",children:"Sign in here"})]})})]})]})})},Xx=Pv("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),$x=Pv("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Yx=Pv("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Jx=Pv("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Zx=Pv("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),eb=Pv("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),tb=Pv("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),nb=Pv("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),rb=()=>{var e,n;const r=ee(),[s,i]=(0,t.useState)("30-days"),{data:a,isLoading:o,error:l}=(0,De.useQuery)(["admin-dashboard",s],()=>dv({period:s}),{staleTime:3e5}),{data:c,isLoading:u}=(0,De.useQuery)("recent-users",()=>hv({limit:5}),{staleTime:6e5}),{data:d,isLoading:h}=(0,De.useQuery)("pending-scores",()=>fv({verificationStatus:"pending",limit:5}),{staleTime:12e4});if(o)return(0,og.jsx)("div",{className:"flex items-center justify-center min-h-64",children:(0,og.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(l)return(0,og.jsxs)("div",{className:"text-center py-8",children:[(0,og.jsx)("div",{className:"text-red-600 mb-4",children:"Error loading dashboard"}),(0,og.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Try Again"})]});const f=(null===a||void 0===a?void 0:a.stats)||{},m=(null===a||void 0===a?void 0:a.recentActivity)||[];return(0,og.jsxs)("div",{className:"space-y-6",children:[(0,og.jsxs)("div",{className:"text-center mb-8",children:[(0,og.jsx)("div",{className:"mb-6",children:(0,og.jsx)("img",{src:"".concat(".","/TheXringClassic.png"),alt:"The X-Ring Classic",className:"h-20 w-auto mx-auto object-contain"})}),(0,og.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),(0,og.jsx)("p",{className:"text-gray-600",children:"Platform overview and management"})]}),(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsx)("div",{}),(0,og.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,og.jsxs)("button",{onClick:()=>r("/admin/create-competition"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[(0,og.jsx)(Xx,{className:"w-4 h-4 mr-2"}),"Create Competition"]}),(0,og.jsxs)("select",{value:s,onChange:e=>i(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,og.jsx)("option",{value:"7-days",children:"Last 7 Days"}),(0,og.jsx)("option",{value:"30-days",children:"Last 30 Days"}),(0,og.jsx)("option",{value:"90-days",children:"Last 90 Days"}),(0,og.jsx)("option",{value:"1-year",children:"Last Year"})]})]})]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("div",{className:"flex items-center",children:[(0,og.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,og.jsx)(Fv,{className:"h-6 w-6 text-blue-600"})}),(0,og.jsxs)("div",{className:"ml-4",children:[(0,og.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),(0,og.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:f.totalUsers||0})]})]}),(0,og.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,og.jsx)($x,{className:"h-4 w-4 text-green-500"}),(0,og.jsxs)("span",{className:"ml-2 text-sm text-green-600",children:["+",f.newUsersThisPeriod||0," this period"]})]})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("div",{className:"flex items-center",children:[(0,og.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,og.jsx)(Uv,{className:"h-6 w-6 text-green-600"})}),(0,og.jsxs)("div",{className:"ml-4",children:[(0,og.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Competitions"}),(0,og.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:f.activeCompetitions||0})]})]}),(0,og.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,og.jsx)(Wv,{className:"h-4 w-4 text-blue-500"}),(0,og.jsxs)("span",{className:"ml-2 text-sm text-blue-600",children:[f.totalCompetitions||0," total"]})]})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("div",{className:"flex items-center",children:[(0,og.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,og.jsx)(Vv,{className:"h-6 w-6 text-yellow-600"})}),(0,og.jsxs)("div",{className:"ml-4",children:[(0,og.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending Scores"}),(0,og.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:f.pendingScores||0})]})]}),(0,og.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,og.jsx)(Yx,{className:"h-4 w-4 text-yellow-500"}),(0,og.jsx)("span",{className:"ml-2 text-sm text-yellow-600",children:"Need verification"})]})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("div",{className:"flex items-center",children:[(0,og.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,og.jsx)(Jx,{className:"h-6 w-6 text-purple-600"})}),(0,og.jsxs)("div",{className:"ml-4",children:[(0,og.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),(0,og.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",f.totalRevenue||0]})]})]}),(0,og.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,og.jsx)($x,{className:"h-4 w-4 text-green-500"}),(0,og.jsxs)("span",{className:"ml-2 text-sm text-green-600",children:["+$",f.revenueThisPeriod||0," this period"]})]})]})]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"User Growth"}),(0,og.jsx)(Zx,{className:"h-5 w-5 text-gray-400"})]}),(0,og.jsx)("div",{className:"h-64 flex items-center justify-center bg-gray-50 rounded-lg",children:(0,og.jsxs)("div",{className:"text-center",children:[(0,og.jsx)(eb,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),(0,og.jsx)("p",{className:"text-gray-600",children:"Chart visualization coming soon"})]})})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Competition Activity"}),(0,og.jsx)(Wv,{className:"h-5 w-5 text-gray-400"})]}),(0,og.jsxs)("div",{className:"space-y-4",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsx)("span",{className:"text-sm text-gray-600",children:"Published"}),(0,og.jsx)("span",{className:"text-sm font-medium",children:f.publishedCompetitions||0})]}),(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsx)("span",{className:"text-sm text-gray-600",children:"Draft"}),(0,og.jsx)("span",{className:"text-sm font-medium",children:f.draftCompetitions||0})]}),(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsx)("span",{className:"text-sm text-gray-600",children:"Completed"}),(0,og.jsx)("span",{className:"text-sm font-medium",children:f.completedCompetitions||0})]}),(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsx)("span",{className:"text-sm text-gray-600",children:"Cancelled"}),(0,og.jsx)("span",{className:"text-sm font-medium",children:f.cancelledCompetitions||0})]})]})]})]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Users"}),(0,og.jsx)(Fv,{className:"h-5 w-5 text-gray-400"})]}),(0,og.jsx)("div",{className:"space-y-3",children:u?(0,og.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,og.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):(0,og.jsxs)(og.Fragment,{children:[null===c||void 0===c||null===(e=c.users)||void 0===e?void 0:e.map(e=>{var t,n;return(0,og.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,og.jsx)("div",{className:"h-8 w-8 rounded-full bg-gray-300 flex items-center justify-center",children:(0,og.jsx)("span",{className:"text-sm font-medium text-gray-700",children:(null===(t=e.firstName)||void 0===t?void 0:t.charAt(0).toUpperCase())||(null===(n=e.username)||void 0===n?void 0:n.charAt(0).toUpperCase())})}),(0,og.jsxs)("div",{className:"flex-1",children:[(0,og.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.firstName&&e.lastName?"".concat(e.firstName," ").concat(e.lastName):e.username}),(0,og.jsx)("p",{className:"text-xs text-gray-500",children:e.email})]}),(0,og.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("admin"===e.role?"bg-red-100 text-red-800":"range_officer"===e.role?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:e.role})]},e.id)}),(!(null!==c&&void 0!==c&&c.users)||0===c.users.length)&&(0,og.jsx)("p",{className:"text-gray-500 text-sm",children:"No recent users"})]})})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Pending Scores"}),(0,og.jsx)(Vv,{className:"h-5 w-5 text-gray-400"})]}),(0,og.jsx)("div",{className:"space-y-3",children:h?(0,og.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,og.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):(0,og.jsxs)(og.Fragment,{children:[null===d||void 0===d||null===(n=d.scores)||void 0===n?void 0:n.map(e=>{var t,n,s;return(0,og.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-yellow-50 rounded-lg",children:[(0,og.jsx)("div",{className:"h-8 w-8 rounded-full bg-yellow-100 flex items-center justify-center",children:(0,og.jsx)(Wv,{className:"h-4 w-4 text-yellow-600"})}),(0,og.jsxs)("div",{className:"flex-1",children:[(0,og.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null!==(t=e.competitor)&&void 0!==t&&t.firstName&&null!==(n=e.competitor)&&void 0!==n&&n.lastName?"".concat(e.competitor.firstName," ").concat(e.competitor.lastName):null===(s=e.competitor)||void 0===s?void 0:s.username}),(0,og.jsxs)("p",{className:"text-xs text-gray-500",children:["Score: ",e.totalScore]})]}),(0,og.jsx)("button",{onClick:()=>r("/admin/score-verification"),className:"px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700",children:"Review"})]},e.id)}),(!(null!==d&&void 0!==d&&d.scores)||0===d.scores.length)&&(0,og.jsx)("p",{className:"text-gray-500 text-sm",children:"No pending scores"})]})})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"}),(0,og.jsx)(tb,{className:"h-5 w-5 text-gray-400"})]}),(0,og.jsxs)("div",{className:"space-y-3",children:[(0,og.jsx)("button",{onClick:()=>r("/admin/create-competition"),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Competition"}),(0,og.jsx)("button",{onClick:()=>r("/admin/score-verification"),className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Review Scores"}),(0,og.jsx)("button",{onClick:()=>r("/admin/users"),className:"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Manage Users"}),(0,og.jsx)("button",{onClick:()=>r("/admin/settings"),className:"w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"System Settings"})]})]})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),(0,og.jsx)(eb,{className:"h-5 w-5 text-gray-400"})]}),(0,og.jsxs)("div",{className:"space-y-4",children:[m.map((e,t)=>(0,og.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,og.jsx)("div",{className:"h-8 w-8 rounded-full flex items-center justify-center ".concat("user"===e.type?"bg-blue-100":"competition"===e.type?"bg-green-100":"score"===e.type?"bg-yellow-100":"bg-gray-100"),children:"user"===e.type?(0,og.jsx)(Fv,{className:"h-4 w-4 text-blue-600"}):"competition"===e.type?(0,og.jsx)(Uv,{className:"h-4 w-4 text-green-600"}):"score"===e.type?(0,og.jsx)(Wv,{className:"h-4 w-4 text-yellow-600"}):(0,og.jsx)(eb,{className:"h-4 w-4 text-gray-600"})}),(0,og.jsxs)("div",{className:"flex-1",children:[(0,og.jsx)("p",{className:"text-sm text-gray-900",children:e.message}),(0,og.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()})]})]},t)),0===m.length&&(0,og.jsx)("p",{className:"text-gray-500 text-sm",children:"No recent activity"})]})]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"System Health"}),(0,og.jsx)(nb,{className:"h-5 w-5 text-green-600"})]}),(0,og.jsxs)("div",{className:"space-y-3",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsx)("span",{className:"text-sm text-gray-600",children:"Database"}),(0,og.jsxs)("div",{className:"flex items-center",children:[(0,og.jsx)("div",{className:"h-2 w-2 bg-green-500 rounded-full mr-2"}),(0,og.jsx)("span",{className:"text-sm text-green-600",children:"Healthy"})]})]}),(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsx)("span",{className:"text-sm text-gray-600",children:"API"}),(0,og.jsxs)("div",{className:"flex items-center",children:[(0,og.jsx)("div",{className:"h-2 w-2 bg-green-500 rounded-full mr-2"}),(0,og.jsx)("span",{className:"text-sm text-green-600",children:"Online"})]})]}),(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsx)("span",{className:"text-sm text-gray-600",children:"Storage"}),(0,og.jsxs)("div",{className:"flex items-center",children:[(0,og.jsx)("div",{className:"h-2 w-2 bg-yellow-500 rounded-full mr-2"}),(0,og.jsx)("span",{className:"text-sm text-yellow-600",children:"75% Used"})]})]})]})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Performance"}),(0,og.jsx)(Zx,{className:"h-5 w-5 text-blue-600"})]}),(0,og.jsxs)("div",{className:"space-y-3",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsx)("span",{className:"text-sm text-gray-600",children:"Response Time"}),(0,og.jsx)("span",{className:"text-sm font-medium",children:"120ms"})]}),(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsx)("span",{className:"text-sm text-gray-600",children:"Uptime"}),(0,og.jsx)("span",{className:"text-sm font-medium",children:"99.9%"})]}),(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsx)("span",{className:"text-sm text-gray-600",children:"Active Sessions"}),(0,og.jsx)("span",{className:"text-sm font-medium",children:f.activeSessions||0})]})]})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Security"}),(0,og.jsx)(nb,{className:"h-5 w-5 text-purple-600"})]}),(0,og.jsxs)("div",{className:"space-y-3",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsx)("span",{className:"text-sm text-gray-600",children:"Failed Logins"}),(0,og.jsx)("span",{className:"text-sm font-medium",children:f.failedLogins||0})]}),(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsx)("span",{className:"text-sm text-gray-600",children:"Suspicious Activity"}),(0,og.jsx)("span",{className:"text-sm font-medium",children:f.suspiciousActivity||0})]}),(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsx)("span",{className:"text-sm text-gray-600",children:"Last Scan"}),(0,og.jsx)("span",{className:"text-sm font-medium",children:"2 hours ago"})]})]})]})]})]})},sb=Pv("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),ib=Pv("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),ab=()=>{const e=ee(),n=(0,De.useQueryClient)(),[r,s]=(0,t.useState)(!1),{user:i}=hg(),{register:a,handleSubmit:o,formState:{errors:l},watch:c,reset:u,setValue:d}=Sx({defaultValues:{title:"",description:"",type:"indoor",status:"draft",rangeName:"",rangeLocation:"",startDate:"",endDate:"",maxParticipants:50,prizePool:0,duration:"4 hours",distance:"25 yards",shotsPerTarget:10,format:"precision",rules:"",equipment:"",registrationDeadline:""}}),h=(0,De.useMutation)(e=>Kg(e),{onSuccess:t=>{en.success("Competition created successfully!"),n.invalidateQueries("competitions"),e("/competitions/".concat(t.competition.id))},onError:e=>{var t,n;en.error((null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to create competition"),s(!1)}}),f=(c("type"),c("status"));(0,t.useEffect)(()=>{"range_admin"===(null===i||void 0===i?void 0:i.role)&&(null!==i&&void 0!==i&&i.rangeName&&d("rangeName",i.rangeName),null!==i&&void 0!==i&&i.rangeLocation&&d("rangeLocation",i.rangeLocation))},[i,d]);const{data:m}=(0,De.useQuery)(["range-admins-for-competition"],()=>mv(),{enabled:"admin"===(null===i||void 0===i?void 0:i.role),staleTime:3e5}),p=(null===m||void 0===m?void 0:m.rangeAdmins)||[];return(0,og.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Create Competition"}),(0,og.jsx)("p",{className:"text-gray-600",children:"Set up a new .22LR rifle competition"})]}),(0,og.jsx)("div",{className:"flex items-center space-x-2",children:(0,og.jsx)("div",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("draft"===f?"bg-yellow-100 text-yellow-800":"published"===f?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:"draft"===f?"Draft":"published"===f?"Published":f})})]}),(0,og.jsxs)("form",{onSubmit:o(async e=>{s(!0);try{const t={title:e.title,description:e.description,competitionType:"speed"===e.type||"precision"===e.type?"indoor":e.type,maxDistance:"speed"===e.type?25:50,format:"speed"===e.type?"standing":"precision"===e.type?"benchrest":"prone",schedule:{competitionDate:new Date(e.startDate).toISOString(),startTime:e.startTime||"09:00",endTime:e.endTime||"17:00",registrationDeadline:new Date(e.registrationDeadline).toISOString()},range:{name:e.rangeName,address:e.rangeLocation,location:e.rangeLocation},maxParticipants:parseInt(e.maxParticipants)||100,prizePool:parseFloat(e.prizePool)||0,shotsPerTarget:parseInt(e.shotsPerTarget)||10,status:e.status||"draft",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),registeredCount:0,participants:[]};await h.mutateAsync(t)}catch(t){console.error("Error creating competition:",t)}}),className:"space-y-8",children:[(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,og.jsx)(Wv,{className:"w-5 h-5 mr-2"}),"Basic Information"]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Competition Title *"}),(0,og.jsx)("input",Ue(Ue({type:"text"},a("title",{required:"Title is required"})),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Spring Indoor Championship"})),l.title&&(0,og.jsx)("p",{className:"text-red-600 text-sm mt-1",children:l.title.message})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Competition Type *"}),(0,og.jsxs)("select",Ue(Ue({},a("type",{required:"Type is required"})),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,og.jsx)("option",{value:"indoor",children:"Indoor"}),(0,og.jsx)("option",{value:"outdoor",children:"Outdoor"}),(0,og.jsx)("option",{value:"speed",children:"Speed Shooting"}),(0,og.jsx)("option",{value:"precision",children:"Precision"})]}))]}),(0,og.jsxs)("div",{className:"md:col-span-2",children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),(0,og.jsx)("textarea",Ue(Ue({},a("description",{required:"Description is required"})),{},{rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe the competition format, rules, and what participants can expect..."})),l.description&&(0,og.jsx)("p",{className:"text-red-600 text-sm mt-1",children:l.description.message})]})]})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,og.jsx)(Mv,{className:"w-5 h-5 mr-2"}),"Location & Schedule"]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:["admin"===(null===i||void 0===i?void 0:i.role)&&(0,og.jsxs)("div",{className:"md:col-span-2",children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Range"}),(0,og.jsxs)("select",{onChange:e=>{const t=p.find(t=>t.id===e.target.value);t&&(d("rangeName",t.rangeName||""),d("rangeLocation",t.rangeLocation||""))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,og.jsx)("option",{value:"",children:"Choose a range admin\u2026 (optional)"}),p.map(e=>(0,og.jsxs)("option",{value:e.id,children:[e.rangeName," \u2014 ",e.rangeLocation," (by ",e.firstName," ",e.lastName,")"]},e.id))]}),(0,og.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Selecting a range fills the fields below. You can still edit them."})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Range Name *"}),(0,og.jsx)("input",Ue(Ue({type:"text"},a("rangeName",{required:"Range name is required"})),{},{defaultValue:"range_admin"===(null===i||void 0===i?void 0:i.role)&&(null===i||void 0===i?void 0:i.rangeName)||"",disabled:"range_admin"===(null===i||void 0===i?void 0:i.role)&&!(null===i||void 0===i||!i.rangeName),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Central Range Complex"})),l.rangeName&&(0,og.jsx)("p",{className:"text-red-600 text-sm mt-1",children:l.rangeName.message})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Range Location / Address *"}),(0,og.jsx)("input",Ue(Ue({type:"text"},a("rangeLocation",{required:"Range location is required"})),{},{defaultValue:"range_admin"===(null===i||void 0===i?void 0:i.role)&&(null===i||void 0===i?void 0:i.rangeLocation)||"",disabled:"range_admin"===(null===i||void 0===i?void 0:i.role)&&!(null===i||void 0===i||!i.rangeLocation),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"City, State or full address"})),l.rangeLocation&&(0,og.jsx)("p",{className:"text-red-600 text-sm mt-1",children:l.rangeLocation.message})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date *"}),(0,og.jsx)("input",Ue(Ue({type:"date"},a("startDate",{required:"Start date is required"})),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),l.startDate&&(0,og.jsx)("p",{className:"text-red-600 text-sm mt-1",children:l.startDate.message})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time *"}),(0,og.jsx)("input",Ue(Ue({type:"time"},a("startTime",{required:"Start time is required"})),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",defaultValue:"09:00"})),l.startTime&&(0,og.jsx)("p",{className:"text-red-600 text-sm mt-1",children:l.startTime.message})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date *"}),(0,og.jsx)("input",Ue(Ue({type:"date"},a("endDate",{required:"End date is required"})),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),l.endDate&&(0,og.jsx)("p",{className:"text-red-600 text-sm mt-1",children:l.endDate.message})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time *"}),(0,og.jsx)("input",Ue(Ue({type:"time"},a("endTime",{required:"End time is required"})),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",defaultValue:"17:00"})),l.endTime&&(0,og.jsx)("p",{className:"text-red-600 text-sm mt-1",children:l.endTime.message})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Registration Deadline *"}),(0,og.jsx)("input",Ue(Ue({type:"date"},a("registrationDeadline",{required:"Registration deadline is required"})),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),l.registrationDeadline&&(0,og.jsx)("p",{className:"text-red-600 text-sm mt-1",children:l.registrationDeadline.message})]})]})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,og.jsx)(Wv,{className:"w-5 h-5 mr-2"}),"Competition Details"]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Distance *"}),(0,og.jsx)("input",Ue(Ue({type:"text"},a("distance",{required:"Distance is required"})),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 25 yards"})),l.distance&&(0,og.jsx)("p",{className:"text-red-600 text-sm mt-1",children:l.distance.message})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shots Per Target *"}),(0,og.jsx)("input",Ue(Ue({type:"number"},a("shotsPerTarget",{required:"Shots per target is required",min:{value:1,message:"Must be at least 1"}})),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"10"})),l.shotsPerTarget&&(0,og.jsx)("p",{className:"text-red-600 text-sm mt-1",children:l.shotsPerTarget.message})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration *"}),(0,og.jsx)("input",Ue(Ue({type:"text"},a("duration",{required:"Duration is required"})),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 4 hours"})),l.duration&&(0,og.jsx)("p",{className:"text-red-600 text-sm mt-1",children:l.duration.message})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Format *"}),(0,og.jsxs)("select",Ue(Ue({},a("format",{required:"Format is required"})),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,og.jsx)("option",{value:"precision",children:"Precision"}),(0,og.jsx)("option",{value:"speed",children:"Speed"}),(0,og.jsx)("option",{value:"multi-stage",children:"Multi-Stage"}),(0,og.jsx)("option",{value:"team",children:"Team"})]}))]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Participants *"}),(0,og.jsx)("input",Ue(Ue({type:"number"},a("maxParticipants",{required:"Max participants is required",min:{value:1,message:"Must be at least 1"}})),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"50"})),l.maxParticipants&&(0,og.jsx)("p",{className:"text-red-600 text-sm mt-1",children:l.maxParticipants.message})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prize Pool ($) *"}),(0,og.jsx)("input",Ue(Ue({type:"number"},a("prizePool",{required:"Prize pool is required",min:{value:0,message:"Must be 0 or greater"}})),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"1000"})),l.prizePool&&(0,og.jsx)("p",{className:"text-red-600 text-sm mt-1",children:l.prizePool.message})]})]})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,og.jsx)(sb,{className:"w-5 h-5 mr-2"}),"Rules & Equipment"]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Competition Rules"}),(0,og.jsx)("textarea",Ue(Ue({},a("rules")),{},{rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Specify competition rules, scoring methods, and any special requirements..."}))]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Equipment Requirements"}),(0,og.jsx)("textarea",Ue(Ue({},a("equipment")),{},{rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"List required equipment, allowed modifications, and any restrictions..."}))]})]})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,og.jsx)(Hv,{className:"w-5 h-5 mr-2"}),"Status & Actions"]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Competition Status *"}),(0,og.jsxs)("select",Ue(Ue({},a("status",{required:"Status is required"})),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,og.jsx)("option",{value:"draft",children:"Draft (Not visible to public)"}),(0,og.jsx)("option",{value:"published",children:"Published (Visible to public)"}),(0,og.jsx)("option",{value:"active",children:"Active (Registration open)"}),(0,og.jsx)("option",{value:"closed",children:"Closed (Registration closed)"}),(0,og.jsx)("option",{value:"completed",children:"Completed"})]}))]}),(0,og.jsx)("div",{className:"flex items-end",children:(0,og.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,og.jsxs)("p",{children:["\u2022 ",(0,og.jsx)("strong",{children:"Draft:"})," Save for later editing"]}),(0,og.jsxs)("p",{children:["\u2022 ",(0,og.jsx)("strong",{children:"Published:"})," Make visible to all users"]}),(0,og.jsxs)("p",{children:["\u2022 ",(0,og.jsx)("strong",{children:"Active:"})," Allow registrations"]})]})})]})]}),(0,og.jsxs)("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[(0,og.jsx)("button",{type:"button",onClick:()=>e("/admin/competitions"),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,og.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,og.jsx)("button",{type:"button",onClick:()=>{u(),en.success("Form reset to defaults")},className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Reset"}),(0,og.jsx)("button",{type:"submit",disabled:r,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:r?(0,og.jsxs)(og.Fragment,{children:[(0,og.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):(0,og.jsxs)(og.Fragment,{children:[(0,og.jsx)(ib,{className:"w-4 h-4 mr-2"}),"Create Competition"]})})]})]})]})]})},ob=()=>{const{id:e}=ne(),n=ee(),r=(0,De.useQueryClient)(),[s,i]=(0,t.useState)(!1),{register:a,handleSubmit:o,formState:{errors:l},reset:c,watch:u}=Sx(),{data:d,isLoading:h,error:f}=(0,De.useQuery)(["competition",e],()=>Wg(e),{onSuccess:e=>{var t,n,r,s,i,a,o;const l=(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.competition)||{};c({title:l.title||"",description:l.description||"",type:l.competitionType||l.type||"indoor",status:l.status||"draft",location:(null===(n=l.range)||void 0===n?void 0:n.name)||l.location||"",startDate:null!==(r=l.schedule)&&void 0!==r&&r.competitionDate?new Date(l.schedule.competitionDate).toISOString().slice(0,10):"",endDate:null!==(s=l.schedule)&&void 0!==s&&s.competitionDate?new Date(l.schedule.competitionDate).toISOString().slice(0,10):"",startTime:(null===(i=l.schedule)||void 0===i?void 0:i.startTime)||"09:00",endTime:(null===(a=l.schedule)||void 0===a?void 0:a.endTime)||"17:00",registrationDeadline:null!==(o=l.schedule)&&void 0!==o&&o.registrationDeadline?new Date(l.schedule.registrationDeadline).toISOString().slice(0,10):"",distance:l.distance||(l.maxDistance?"".concat(l.maxDistance," yards"):""),shotsPerTarget:l.shotsPerTarget||10,duration:l.duration||"4 hours",format:l.format||"precision",maxParticipants:l.maxParticipants||l.registeredCount||50,prizePool:l.prizePool||0,rules:l.rules||"",equipment:l.equipment||""})}}),m=(0,De.useMutation)(t=>Gg(e,t),{onSuccess:t=>{en.success("Competition updated"),r.invalidateQueries(["competition",e]),r.invalidateQueries(["featured-competitions"]),n("/competitions/".concat(e))},onError:e=>{var t,n;en.error((null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Failed to update competition"),i(!1)}}),p=u("status");return h?(0,og.jsx)("div",{className:"flex items-center justify-center min-h-64",children:(0,og.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):f?(0,og.jsx)("div",{className:"text-center py-8",children:(0,og.jsx)("div",{className:"text-red-600 mb-4",children:"Error loading competition"})}):(0,og.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Competition"}),(0,og.jsx)("p",{className:"text-gray-600",children:"Update competition details"})]}),(0,og.jsx)("div",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("draft"===p?"bg-yellow-100 text-yellow-800":"published"===p?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:p})]}),(0,og.jsxs)("form",{onSubmit:o(async e=>{i(!0);const t={title:e.title,description:e.description,competitionType:e.type,format:e.format,status:e.status,range:{name:e.location,address:e.location,location:e.location},schedule:{competitionDate:e.startDate?new Date(e.startDate).toISOString():void 0,startTime:e.startTime||"09:00",endTime:e.endTime||"17:00",registrationDeadline:e.registrationDeadline?new Date(e.registrationDeadline).toISOString():void 0},distance:e.distance,shotsPerTarget:parseInt(e.shotsPerTarget)||10,maxParticipants:parseInt(e.maxParticipants)||50,prizePool:parseFloat(e.prizePool)||0,rules:e.rules,equipment:e.equipment};t.schedule.competitionDate||delete t.schedule.competitionDate,t.schedule.registrationDeadline||delete t.schedule.registrationDeadline,await m.mutateAsync(t)}),className:"space-y-8",children:[(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,og.jsx)(Wv,{className:"w-5 h-5 mr-2"}),"Basic Information"]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),(0,og.jsx)("input",Ue(Ue({type:"text"},a("title",{required:"Title is required"})),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),l.title&&(0,og.jsx)("p",{className:"text-red-600 text-sm mt-1",children:l.title.message})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type *"}),(0,og.jsxs)("select",Ue(Ue({},a("type",{required:"Type is required"})),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,og.jsx)("option",{value:"indoor",children:"Indoor"}),(0,og.jsx)("option",{value:"outdoor",children:"Outdoor"}),(0,og.jsx)("option",{value:"speed",children:"Speed"}),(0,og.jsx)("option",{value:"precision",children:"Precision"})]}))]}),(0,og.jsxs)("div",{className:"md:col-span-2",children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),(0,og.jsx)("textarea",Ue(Ue({rows:3},a("description",{required:"Description is required"})),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),l.description&&(0,og.jsx)("p",{className:"text-red-600 text-sm mt-1",children:l.description.message})]})]})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,og.jsx)(Mv,{className:"w-5 h-5 mr-2"}),"Location & Schedule"]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location *"}),(0,og.jsx)("input",Ue(Ue({type:"text"},a("location",{required:"Location is required"})),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),l.location&&(0,og.jsx)("p",{className:"text-red-600 text-sm mt-1",children:l.location.message})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),(0,og.jsx)("input",Ue(Ue({type:"date"},a("startDate")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time"}),(0,og.jsx)("input",Ue(Ue({type:"time"},a("startTime")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time"}),(0,og.jsx)("input",Ue(Ue({type:"time"},a("endTime")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Registration Deadline"}),(0,og.jsx)("input",Ue(Ue({type:"date"},a("registrationDeadline")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]})]})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,og.jsx)(Wv,{className:"w-5 h-5 mr-2"}),"Competition Details"]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Distance"}),(0,og.jsx)("input",Ue(Ue({type:"text"},a("distance")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shots Per Target"}),(0,og.jsx)("input",Ue(Ue({type:"number"},a("shotsPerTarget",{min:{value:1,message:"Must be at least 1"}})),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),l.shotsPerTarget&&(0,og.jsx)("p",{className:"text-red-600 text-sm mt-1",children:l.shotsPerTarget.message})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration"}),(0,og.jsx)("input",Ue(Ue({type:"text"},a("duration")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Format"}),(0,og.jsxs)("select",Ue(Ue({},a("format")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,og.jsx)("option",{value:"precision",children:"Precision"}),(0,og.jsx)("option",{value:"speed",children:"Speed"}),(0,og.jsx)("option",{value:"multi-stage",children:"Multi-Stage"}),(0,og.jsx)("option",{value:"team",children:"Team"})]}))]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Participants"}),(0,og.jsx)("input",Ue(Ue({type:"number"},a("maxParticipants",{min:{value:1,message:"Must be at least 1"}})),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),l.maxParticipants&&(0,og.jsx)("p",{className:"text-red-600 text-sm mt-1",children:l.maxParticipants.message})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prize Pool ($)"}),(0,og.jsx)("input",Ue(Ue({type:"number"},a("prizePool",{min:{value:0,message:"Must be 0 or greater"}})),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]})]})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,og.jsx)(sb,{className:"w-5 h-5 mr-2"}),"Rules & Status"]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Competition Rules"}),(0,og.jsx)("textarea",Ue(Ue({rows:4},a("rules")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Equipment Requirements"}),(0,og.jsx)("textarea",Ue(Ue({rows:4},a("equipment")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Competition Status"}),(0,og.jsxs)("select",Ue(Ue({},a("status")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,og.jsx)("option",{value:"draft",children:"Draft"}),(0,og.jsx)("option",{value:"published",children:"Published"}),(0,og.jsx)("option",{value:"active",children:"Active"}),(0,og.jsx)("option",{value:"closed",children:"Closed"}),(0,og.jsx)("option",{value:"completed",children:"Completed"})]}))]})]})]}),(0,og.jsxs)("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[(0,og.jsx)("button",{type:"button",onClick:()=>n(-1),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,og.jsx)("button",{type:"submit",disabled:s,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:s?(0,og.jsxs)(og.Fragment,{children:[(0,og.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):(0,og.jsxs)(og.Fragment,{children:[(0,og.jsx)(ib,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]})]})},lb=Pv("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),cb=Pv("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ub=()=>{const{competitionId:e}=ne(),{user:n}=hg(),[r,s]=(0,t.useState)(""),[i,a]=(0,t.useState)(Array(10).fill({value:"",isX:!1})),[o,l]=(0,t.useState)([]),[c,u]=(0,t.useState)(""),[d,h]=(0,t.useState)(""),f=(0,De.useQueryClient)(),{register:m,handleSubmit:p,formState:{errors:g},reset:v,watch:y,setValue:x}=Sx(),{data:b}=(0,De.useQuery)("competitions",async()=>(await Hg()).data,{staleTime:3e5}),{data:w}=(0,De.useQuery)(["user-competitions",null===n||void 0===n?void 0:n.id],async()=>{if(null===n||void 0===n||!n.id)return null;return(await av(n.id)).data},{enabled:!(null===n||void 0===n||!n.id),staleTime:12e4});(0,t.useEffect)(()=>{e&&s(e)},[e]);const N=(null!==w&&void 0!==w&&w.registered&&w.registered.length>0?w.registered:(null===b||void 0===b?void 0:b.competitions)||[]).filter(e=>["published","active"].includes(e.status));(0,t.useEffect)(()=>{r||1!==N.length||s(N[0].id)},[N,r]);const{data:j}=(0,De.useQuery)(["competition",r],async()=>{var e;if(!r)return null;return(null===(e=(await Wg(r)).data)||void 0===e?void 0:e.competition)||null},{enabled:!!r,staleTime:12e4});(0,t.useEffect)(()=>{const e=(null===j||void 0===j?void 0:j.shotsPerTarget)||10;e&&i.length!==e&&a(Array(e).fill({value:"",isX:!1}))},[j]),(0,t.useEffect)(()=>{var e;const t=(e=>{if(!e)return"";try{let t;if(t="object"===typeof e&&e.seconds?1e3*e.seconds:"number"===typeof e?e:Date.parse(e),Number.isNaN(t))return"";const n=new Date(t),r=n.getFullYear(),s=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0");return"".concat(r,"-").concat(s,"-").concat(i)}catch(kt){return""}})((null===j||void 0===j||null===(e=j.schedule)||void 0===e?void 0:e.competitionDate)||(null===j||void 0===j?void 0:j.startDate));x("competitionDate",t)},[j,x]);const S=(0,De.useMutation)(e=>Yg(e),{onSuccess:()=>{en.success("Score submitted successfully!"),v(),a(Array(10).fill({value:"",isX:!1})),l([]),f.invalidateQueries("scores")},onError:e=>{var t,n;en.error((null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to submit score")}}),_=()=>i.reduce((e,t)=>e+(parseInt(t.value,10)||0),0);return(0,og.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:[(0,og.jsxs)("div",{className:"text-center",children:[(0,og.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Submit Score"}),(0,og.jsx)("p",{className:"text-gray-600",children:"Submit your competition score with verification"})]}),(0,og.jsxs)("form",{onSubmit:p(e=>{if(!r)return void en.error("Please select a competition");const t=_(),n=(null===j||void 0===j?void 0:j.shotsPerTarget)||10,s=i.filter(e=>e&&""!==e.value&&null!==e.value&&void 0!==e.value);if(s.length!==n)return void en.error("This competition requires ".concat(n," shots. You entered ").concat(s.length,"."));if(0===t)return void en.error("Please enter at least one shot score");const a={competitionId:r,score:Math.round(t),shots:i.map(e=>{var t;return{value:parseInt(null!==(t=null===e||void 0===e?void 0:e.value)&&void 0!==t?t:"0",10)||0,isX:!0===(null===e||void 0===e?void 0:e.isX)}}).filter(e=>Number.isInteger(e.value)).slice(0,n),equipment:{rifle:e.rifle,scope:e.scope,ammunition:e.ammunition,rest:e.rest},conditions:{weather:e.weather,temperature:e.temperature,wind:e.wind,notes:e.notes},evidence:Ue(Ue({},c?{photoUrl:c}:{}),d?{videoUrl:d}:{})};S.mutate(a)}),className:"space-y-8",children:[(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,og.jsx)(Wv,{className:"h-5 w-5 mr-2"}),"Competition Details"]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Competition *"}),(0,og.jsxs)("select",{value:r,onChange:e=>s(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,og.jsx)("option",{value:"",children:"Choose a competition..."}),N.map(e=>{var t;return(0,og.jsxs)("option",{value:e.id,children:[e.title," - ",null!==(t=e.schedule)&&void 0!==t&&t.competitionDate?new Date(e.schedule.competitionDate).toLocaleDateString():e.startDate?new Date(e.startDate).toLocaleDateString():"TBD"]},e.id)})]})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Competition"}),(0,og.jsx)("input",Ue(Ue({type:"date"},m("competitionDate")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}))]})]})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Evidence Links (optional)"}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Photo URL (optional)"}),(0,og.jsx)("input",{type:"url",value:c,onChange:e=>u(e.target.value),placeholder:"https://example.com/target.jpg",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video URL (optional)"}),(0,og.jsx)("input",{type:"url",value:d,onChange:e=>h(e.target.value),placeholder:"https://example.com/video.mp4",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,og.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Optional: add links to photos or videos for quicker verification."})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,og.jsx)(Wv,{className:"h-5 w-5 mr-2"}),"Shot-by-Shot Scoring"]}),(0,og.jsxs)("p",{className:"text-sm text-gray-600 mb-3",children:["Required shots for this competition: ",(null===j||void 0===j?void 0:j.shotsPerTarget)||10]}),(0,og.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-5 md:grid-cols-10 gap-3 mb-4",children:i.map((e,t)=>(0,og.jsxs)("div",{className:"text-center",children:[(0,og.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Shot ",t+1]}),(0,og.jsxs)("div",{className:"flex flex-col items-center gap-1 sm:flex-row sm:gap-2 sm:justify-center",children:[(0,og.jsxs)("select",{value:e.value,onChange:e=>((e,t)=>{var n;const r=[...i],s=""===t?"":Math.max(0,Math.min(10,parseInt(t,10)||0));r[e]={value:s,isX:10===s&&(null===(n=r[e])||void 0===n?void 0:n.isX)||!1},a(r)})(t,e.target.value),className:"w-14 sm:w-16 px-2 py-1 text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,og.jsx)("option",{value:"",children:"--"}),Array.from({length:11},(e,t)=>t).map(e=>(0,og.jsx)("option",{value:e,children:e},e))]}),(0,og.jsxs)("label",{className:"flex items-center gap-1 text-xs",children:[(0,og.jsx)("input",{type:"checkbox",checked:!!e.isX,onChange:e=>((e,t)=>{const n=[...i],r=n[e]||{value:"",isX:!1};n[e]=t?{value:10,isX:!0}:{value:r.value,isX:!1},a(n)})(t,e.target.checked)}),(0,og.jsx)("span",{children:"X"})]})]})]},t))}),(0,og.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,og.jsxs)("div",{className:"flex justify-between items-center",children:[(0,og.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:"Total Score:"}),(0,og.jsxs)("span",{className:"text-2xl font-bold text-blue-600",children:[_()," (",i.filter(e=>10===parseInt(e.value,10)&&e.isX).length,"X)"]})]})})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,og.jsx)(Kv,{className:"h-5 w-5 mr-2"}),"Equipment Information"]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rifle Model"}),(0,og.jsx)("input",Ue(Ue({type:"text"},m("rifle")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Ruger 10/22"}))]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scope/Optics"}),(0,og.jsx)("input",Ue(Ue({type:"text"},m("scope")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Leupold VX-3i 3-9x40"}))]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ammunition"}),(0,og.jsx)("input",Ue(Ue({type:"text"},m("ammunition")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., CCI Standard Velocity"}))]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rest/Support"}),(0,og.jsx)("input",Ue(Ue({type:"text"},m("rest")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Caldwell Lead Sled"}))]})]})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,og.jsx)(Kv,{className:"h-5 w-5 mr-2"}),"Shooting Conditions"]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weather"}),(0,og.jsxs)("select",Ue(Ue({},m("weather")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,og.jsx)("option",{value:"",children:"Select weather..."}),(0,og.jsx)("option",{value:"sunny",children:"Sunny"}),(0,og.jsx)("option",{value:"cloudy",children:"Cloudy"}),(0,og.jsx)("option",{value:"rainy",children:"Rainy"}),(0,og.jsx)("option",{value:"windy",children:"Windy"}),(0,og.jsx)("option",{value:"indoor",children:"Indoor"})]}))]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temperature (\xb0F)"}),(0,og.jsx)("input",Ue(Ue({type:"number"},m("temperature")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"72"}))]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wind Speed (mph)"}),(0,og.jsx)("input",Ue(Ue({type:"number"},m("wind")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"5"}))]})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),(0,og.jsx)("textarea",Ue(Ue({},m("notes")),{},{rows:"3",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Any additional notes about shooting conditions, equipment setup, etc."}))]})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,og.jsx)(lb,{className:"h-5 w-5 mr-2"}),"Evidence Upload"]}),(0,og.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,og.jsx)(cb,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,og.jsx)("p",{className:"text-gray-600 mb-4",children:"Upload photos or videos of your target, setup, or shooting process"}),(0,og.jsx)("input",{type:"file",multiple:!0,accept:"image/*,video/*",onChange:e=>{const t=Array.from(e.target.files).map(e=>({id:Date.now()+Math.random(),file:e,type:e.type.startsWith("image/")?"image":"video",preview:URL.createObjectURL(e)}));l(e=>[...e,...t])},className:"hidden",id:"file-upload"}),(0,og.jsx)("label",{htmlFor:"file-upload",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors",children:"Choose Files"})]}),o.length>0&&(0,og.jsxs)("div",{className:"mt-6",children:[(0,og.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Uploaded Files"}),(0,og.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:o.map(e=>(0,og.jsxs)("div",{className:"relative",children:["image"===e.type?(0,og.jsx)("img",{src:e.preview,alt:"Uploaded evidence",className:"w-full h-24 object-cover rounded-lg"}):(0,og.jsx)("video",{src:e.preview,className:"w-full h-24 object-cover rounded-lg",controls:!0}),(0,og.jsx)("button",{type:"button",onClick:()=>{return t=e.id,void l(e=>e.filter(e=>e.id!==t));var t},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600",children:"\xd7"})]},e.id))})]})]}),(0,og.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,og.jsx)("button",{type:"button",onClick:()=>{v();const e=(null===j||void 0===j?void 0:j.shotsPerTarget)||10;a(Array(e).fill({value:"",isX:!1})),l([])},className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset Form"}),(0,og.jsx)("button",{type:"submit",disabled:S.isLoading,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:S.isLoading?(0,og.jsxs)(og.Fragment,{children:[(0,og.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):(0,og.jsxs)(og.Fragment,{children:[(0,og.jsx)(ib,{className:"h-4 w-4 mr-2"}),"Submit Score"]})})]})]})]})},db=()=>{const{data:e,isLoading:t,error:n}=(0,De.useQuery)("test-competitions",async()=>{console.log("Testing competitions API...");const e=await Hg({status:"published",limit:3});return console.log("Competitions API response:",e),e}),{data:r,isLoading:s,error:i}=(0,De.useQuery)("test-leaderboard",async()=>{console.log("Testing leaderboard API...");const e=await nv.getOverall({limit:5});return console.log("Leaderboard API response:",e),e});return(0,og.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-8",children:[(0,og.jsx)("h1",{className:"text-3xl font-bold",children:"API Test Page"}),(0,og.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,og.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Competitions API Test"}),(0,og.jsxs)("div",{className:"mb-4",children:[(0,og.jsxs)("p",{children:[(0,og.jsx)("strong",{children:"Loading:"})," ",t?"Yes":"No"]}),(0,og.jsxs)("p",{children:[(0,og.jsx)("strong",{children:"Error:"})," ",n?n.message:"None"]})]}),(0,og.jsx)("div",{className:"bg-gray-100 p-4 rounded",children:(0,og.jsx)("pre",{className:"text-sm overflow-auto",children:JSON.stringify(e,null,2)})})]}),(0,og.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,og.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Leaderboard API Test"}),(0,og.jsxs)("div",{className:"mb-4",children:[(0,og.jsxs)("p",{children:[(0,og.jsx)("strong",{children:"Loading:"})," ",s?"Yes":"No"]}),(0,og.jsxs)("p",{children:[(0,og.jsx)("strong",{children:"Error:"})," ",i?i.message:"None"]})]}),(0,og.jsx)("div",{className:"bg-gray-100 p-4 rounded",children:(0,og.jsx)("pre",{className:"text-sm overflow-auto",children:JSON.stringify(r,null,2)})})]})]})},hb=Pv("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),fb=Pv("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),mb=()=>{const[e,n]=(0,t.useState)(null);return(0,og.jsxs)("div",{className:"space-y-8",children:[(0,og.jsxs)("div",{className:"text-center",children:[(0,og.jsx)("div",{className:"mb-6",children:(0,og.jsx)("img",{src:"".concat(".","/TheXringClassic.png"),alt:"The X-Ring Classic",className:"h-20 w-auto mx-auto object-contain"})}),(0,og.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Shooting Classes"}),(0,og.jsx)("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"The X-Ring Classic features a comprehensive classification system designed to recognize skill progression and create fair competition across all levels of marksmanship."})]}),(0,og.jsx)("div",{className:"text-center",children:(0,og.jsx)("img",{src:"".concat(".","/GrandMasterClasses.png"),alt:"Grand Master Classes Classification System",className:"w-full max-w-4xl mx-auto rounded-lg shadow-lg"})}),(0,og.jsxs)("div",{className:"space-y-6",children:[(0,og.jsx)("h2",{className:"text-3xl font-bold text-gray-900 text-center mb-8",children:"\ud83d\udcca Classification Tiers"}),(0,og.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[{id:"grand-master",name:"Grand Master",icon:"\ud83d\udc51",color:"from-purple-600 to-purple-800",bgColor:"bg-purple-50",borderColor:"border-purple-200",average:"249.0 \u2013 250.0",xCount:"15+ average per card",description:"The elite \u2014 consistently near-perfect shooters.",requirements:"Consistently achieving near-perfect scores with exceptional X-count consistency."},{id:"master",name:"Master",icon:"\ud83c\udfc6",color:"from-blue-600 to-blue-800",bgColor:"bg-blue-50",borderColor:"border-blue-200",average:"247.0 \u2013 248.9",xCount:"10+ average per card",description:"State/national-level competitive shooters.",requirements:"High-level competitive shooters with excellent consistency and precision."},{id:"diamond",name:"Diamond",icon:"\ud83d\udc8e",color:"from-cyan-600 to-cyan-800",bgColor:"bg-cyan-50",borderColor:"border-cyan-200",average:"245.0 \u2013 246.9",xCount:"8+ average per card",description:"High-level, highly consistent shooters \u2014 usually in the running locally.",requirements:"Highly consistent shooters capable of competing at local championship levels."},{id:"platinum",name:"Platinum",icon:"\u26aa",color:"from-gray-600 to-gray-800",bgColor:"bg-gray-50",borderColor:"border-gray-200",average:"242.0 \u2013 244.9",xCount:"6+ average per card",description:"Skilled shooters with potential to move up with fine-tuning.",requirements:"Skilled shooters with strong fundamentals and potential for advancement."},{id:"gold",name:"Gold",icon:"\ud83e\udd47",color:"from-yellow-600 to-yellow-800",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",average:"238.0 \u2013 241.9",xCount:"4+ average per card",description:"Developing shooters, capable of mid-pack performance.",requirements:"Developing shooters with solid fundamentals and competitive potential."},{id:"bronze",name:"Bronze",icon:"\ud83e\udd49",color:"from-orange-600 to-orange-800",bgColor:"bg-orange-50",borderColor:"border-orange-200",average:"Below 238.0",xCount:"Variable",description:"Beginner or learning shooter. Emphasis on improvement and fundamentals.",requirements:"Beginner shooters focused on learning fundamentals and continuous improvement."}].map(e=>(0,og.jsxs)("div",{className:"".concat(e.bgColor," ").concat(e.borderColor," border-2 rounded-lg p-6 hover:shadow-lg transition-shadow cursor-pointer"),onClick:()=>n(e),children:[(0,og.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,og.jsx)("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br ".concat(e.color," flex items-center justify-center"),children:(0,og.jsx)(Yv,{classification:e.name,size:36})}),(0,og.jsxs)("div",{children:[(0,og.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:e.name}),(0,og.jsx)("p",{className:"text-gray-600",children:e.description})]})]}),(0,og.jsxs)("div",{className:"space-y-3",children:[(0,og.jsxs)("div",{className:"flex justify-between items-center",children:[(0,og.jsx)("span",{className:"font-medium text-gray-700",children:"Average Score:"}),(0,og.jsx)("span",{className:"font-bold text-gray-900",children:e.average})]}),(0,og.jsxs)("div",{className:"flex justify-between items-center",children:[(0,og.jsx)("span",{className:"font-medium text-gray-700",children:"X-Count:"}),(0,og.jsx)("span",{className:"font-bold text-gray-900",children:e.xCount})]})]})]},e.id))})]}),e&&(0,og.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,og.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,og.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,og.jsx)(Yv,{classification:e.name,size:40}),(0,og.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:e.name})]}),(0,og.jsx)("button",{onClick:()=>n(null),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,og.jsxs)("div",{className:"space-y-4",children:[(0,og.jsx)("p",{className:"text-gray-600 text-lg",children:e.description}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,og.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,og.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Score Requirements"}),(0,og.jsxs)("p",{className:"text-gray-700",children:["Average: ",(0,og.jsx)("span",{className:"font-bold",children:e.average})]}),(0,og.jsxs)("p",{className:"text-gray-700",children:["X-Count: ",(0,og.jsx)("span",{className:"font-bold",children:e.xCount})]})]}),(0,og.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,og.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Class Requirements"}),(0,og.jsx)("p",{className:"text-gray-700",children:e.requirements})]})]})]})]})}),(0,og.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-8",children:[(0,og.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"\ud83d\udcdd Additional Rules"}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,og.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,og.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,og.jsx)($x,{className:"w-6 h-6 text-green-600"}),(0,og.jsx)("h3",{className:"font-semibold text-gray-900",children:"Promotion"})]}),(0,og.jsx)("p",{className:"text-gray-600 text-sm",children:"When a shooter's average exceeds the threshold for a higher class, they are promoted at the end of the scoring cycle."})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,og.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,og.jsx)(Fv,{className:"w-6 h-6 text-blue-600"}),(0,og.jsx)("h3",{className:"font-semibold text-gray-900",children:"Provisional Classification"})]}),(0,og.jsx)("p",{className:"text-gray-600 text-sm",children:"New shooters are placed in Gold class by default until 5 official cards are scored."})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,og.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,og.jsx)(hb,{className:"w-6 h-6 text-purple-600"}),(0,og.jsx)("h3",{className:"font-semibold text-gray-900",children:"Season Awards"})]}),(0,og.jsx)("p",{className:"text-gray-600 text-sm",children:"Recognition given for Top Overall, Top X-Count, and Most Improved in addition to class winners."})]})]})]}),(0,og.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-8",children:[(0,og.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"\u2705 Why This Works"}),(0,og.jsxs)("div",{className:"space-y-4",children:[(0,og.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,og.jsx)("div",{className:"w-2 h-2 bg-green-600 rounded-full mt-2 flex-shrink-0"}),(0,og.jsxs)("p",{className:"text-gray-700",children:[(0,og.jsx)("strong",{children:"Fair Competition:"})," Keeps competition fair \u2014 new shooters don't get discouraged, while top shooters still face real competition."]})]}),(0,og.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,og.jsx)("div",{className:"w-2 h-2 bg-green-600 rounded-full mt-2 flex-shrink-0"}),(0,og.jsxs)("p",{className:"text-gray-700",children:[(0,og.jsx)("strong",{children:"Clear Progression Path:"})," Creates a progression path (Bronze \u2192 Gold \u2192 Platinum \u2192 Diamond \u2192 Master \u2192 Grand Master)."]})]}),(0,og.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,og.jsx)("div",{className:"w-2 h-2 bg-green-600 rounded-full mt-2 flex-shrink-0"}),(0,og.jsxs)("p",{className:"text-gray-700",children:[(0,og.jsx)("strong",{children:"Comprehensive Recognition:"})," Recognizes not just point totals, but X-count consistency."]})]})]})]}),(0,og.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6",children:[(0,og.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,og.jsx)(fb,{className:"w-6 h-6 text-blue-600"}),(0,og.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"How Classes Work"})]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Class Progression"}),(0,og.jsxs)("ul",{className:"space-y-2 text-sm text-gray-600",children:[(0,og.jsx)("li",{children:"\u2022 Classes are determined by your average score across recent competitions"}),(0,og.jsx)("li",{children:"\u2022 You need to complete the required number of competitions to qualify"}),(0,og.jsx)("li",{children:"\u2022 Promotion to higher classes happens automatically when you meet the criteria"}),(0,og.jsx)("li",{children:"\u2022 Your class is updated after each competition"})]})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Competition Categories"}),(0,og.jsxs)("ul",{className:"space-y-2 text-sm text-gray-600",children:[(0,og.jsxs)("li",{children:["\u2022 ",(0,og.jsx)("strong",{children:"Indoor:"})," Controlled environment competitions"]}),(0,og.jsxs)("li",{children:["\u2022 ",(0,og.jsx)("strong",{children:"Outdoor:"})," Weather-affected competitions"]}),(0,og.jsxs)("li",{children:["\u2022 ",(0,og.jsx)("strong",{children:"Overall:"})," Combined performance across both categories"]})]})]})]})]})]})},pb=Pv("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),gb=()=>{var e,n,r,s,i,a;const[o,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(""),d=(0,De.useQueryClient)(),{data:h,isLoading:f,error:m}=(0,De.useQuery)("pending-verification",tv,{staleTime:3e4,refetchInterval:3e4}),p=(0,De.useMutation)(e=>{let{scoreId:t,status:n,notes:r}=e;return ev(t,n,r)},{onSuccess:(e,t)=>{en.success("Score ".concat(t.status," successfully")),d.invalidateQueries("pending-verification"),l(null),u("")},onError:e=>{var t,n;en.error((null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Failed to verify score")}}),g=(e,t)=>{p.mutate({scoreId:e,status:t,notes:c})},v=e=>{switch(e){case"pending":return(0,og.jsx)(Vv,{className:"w-5 h-5 text-yellow-500"});case"approved":return(0,og.jsx)(Hv,{className:"w-5 h-5 text-green-500"});case"rejected":return(0,og.jsx)(Xv,{className:"w-5 h-5 text-red-500"});case"flagged":return(0,og.jsx)(Yx,{className:"w-5 h-5 text-orange-500"});default:return(0,og.jsx)(Vv,{className:"w-5 h-5 text-gray-500"})}};if(f)return(0,og.jsx)("div",{className:"flex items-center justify-center min-h-64",children:(0,og.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(m)return(0,og.jsxs)("div",{className:"text-center py-8",children:[(0,og.jsx)("div",{className:"text-red-600 mb-4",children:"Error loading pending scores"}),(0,og.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Try Again"})]});const y=(null===h||void 0===h?void 0:h.scores)||[];return(0,og.jsxs)("div",{className:"space-y-6",children:[(0,og.jsxs)("div",{className:"text-center",children:[(0,og.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Score Verification"}),(0,og.jsx)("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Review and verify pending score submissions from competitors"})]}),(0,og.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:(0,og.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,og.jsxs)("div",{className:"flex items-center",children:[(0,og.jsx)(Vv,{className:"w-8 h-8 text-yellow-500"}),(0,og.jsxs)("div",{className:"ml-4",children:[(0,og.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),(0,og.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:y.length})]})]})})}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,og.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,og.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Pending Verifications"})}),0===y.length?(0,og.jsxs)("div",{className:"p-8 text-center",children:[(0,og.jsx)(Hv,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),(0,og.jsx)("p",{className:"text-gray-600",children:"No pending scores to verify"})]}):(0,og.jsx)("div",{className:"divide-y divide-gray-200",children:y.map(e=>{var t,n,r,s,i;return(0,og.jsxs)("div",{className:"p-6",children:[(0,og.jsxs)("div",{className:"flex items-start justify-between",children:[(0,og.jsxs)("div",{className:"flex-1",children:[(0,og.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,og.jsxs)("div",{className:"flex items-center space-x-2",children:[v(e.verificationStatus),(0,og.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[null===(t=e.competitor)||void 0===t?void 0:t.firstName," ",null===(n=e.competitor)||void 0===n?void 0:n.lastName]}),(0,og.jsxs)("span",{className:"text-sm text-gray-500",children:["(@",null===(r=e.competitor)||void 0===r?void 0:r.username,")"]})]}),(0,og.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,og.jsx)(Uv,{className:"w-4 h-4 text-gray-400"}),(0,og.jsx)("span",{className:"text-sm text-gray-600",children:null===(s=e.competition)||void 0===s?void 0:s.title})]})]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-500",children:"Score"}),(0,og.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[e.score,"/100"]})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-500",children:"Perfect Shots"}),(0,og.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:(null===(i=e.tiebreakerData)||void 0===i?void 0:i.perfectShots)||0})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-500",children:"Submitted"}),(0,og.jsx)("p",{className:"text-sm text-gray-900",children:new Date(e.createdAt).toLocaleDateString()})]})]}),e.evidence&&(0,og.jsxs)("div",{className:"mb-4",children:[(0,og.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Evidence:"}),(0,og.jsxs)("div",{className:"flex space-x-4",children:[e.evidence.photoUrl&&(0,og.jsxs)("a",{href:e.evidence.photoUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-blue-600 hover:text-blue-800",children:[(0,og.jsx)(pb,{className:"w-4 h-4"}),(0,og.jsx)("span",{children:"View Photo"})]}),e.evidence.videoUrl&&(0,og.jsxs)("a",{href:e.evidence.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-blue-600 hover:text-blue-800",children:[(0,og.jsx)(pb,{className:"w-4 h-4"}),(0,og.jsx)("span",{children:"View Video"})]})]})]}),e.notes&&(0,og.jsxs)("div",{className:"mb-4",children:[(0,og.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Notes:"}),(0,og.jsx)("p",{className:"text-sm text-gray-600",children:e.notes})]})]}),(0,og.jsx)("div",{className:"ml-6 flex flex-col space-y-2",children:(0,og.jsx)("button",{onClick:()=>l(e),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Review Details"})})]}),(0,og.jsxs)("div",{className:"flex space-x-3 mt-4",children:[(0,og.jsxs)("button",{onClick:()=>g(e.id,"approved"),disabled:p.isLoading,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:[(0,og.jsx)(Hv,{className:"w-4 h-4"}),(0,og.jsx)("span",{children:"Approve"})]}),(0,og.jsxs)("button",{onClick:()=>g(e.id,"rejected"),disabled:p.isLoading,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:[(0,og.jsx)(Xv,{className:"w-4 h-4"}),(0,og.jsx)("span",{children:"Reject"})]})]})]},e.id)})})]}),o&&(0,og.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,og.jsx)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,og.jsxs)("div",{className:"p-6",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,og.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Review Score"}),(0,og.jsx)("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-gray-600",children:(0,og.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,og.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,og.jsxs)("div",{className:"space-y-6",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Score Details"}),(0,og.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-500",children:"Competitor"}),(0,og.jsxs)("p",{className:"font-medium",children:[null===(e=o.competitor)||void 0===e?void 0:e.firstName," ",null===(n=o.competitor)||void 0===n?void 0:n.lastName]})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-500",children:"Competition"}),(0,og.jsx)("p",{className:"font-medium",children:null===(r=o.competition)||void 0===r?void 0:r.title})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-500",children:"Score"}),(0,og.jsxs)("p",{className:"text-2xl font-bold",children:[o.score,"/100"]})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-500",children:"Perfect Shots"}),(0,og.jsx)("p",{className:"font-medium",children:(null===(s=o.tiebreakerData)||void 0===s?void 0:s.perfectShots)||0})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-500",children:"X Count"}),(0,og.jsx)("p",{className:"font-medium",children:(null===(i=o.tiebreakerData)||void 0===i?void 0:i.xCount)||0})]})]})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Shot Details"}),(0,og.jsx)("div",{className:"grid grid-cols-10 gap-2",children:null===(a=o.shots)||void 0===a?void 0:a.map((e,t)=>(0,og.jsxs)("div",{className:"text-center",children:[(0,og.jsx)("div",{className:"w-8 h-8 rounded-full border-2 flex items-center justify-center text-sm font-medium ".concat(e.isX?"border-blue-500 text-blue-600":"border-gray-300"),children:e.isX?"X":e.value}),(0,og.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Shot ",t+1]})]},t))})]}),o.evidence&&(0,og.jsxs)("div",{children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Evidence"}),(0,og.jsxs)("div",{className:"space-y-4",children:[o.evidence.photoUrl&&(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Photo:"}),(0,og.jsx)("a",{href:o.evidence.photoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:"View Photo"})]}),o.evidence.videoUrl&&(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Video:"}),(0,og.jsx)("a",{href:o.evidence.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:"View Video"})]})]})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Verification Notes"}),(0,og.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),placeholder:"Add notes about your verification decision...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4})]}),(0,og.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,og.jsx)("button",{onClick:()=>l(null),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,og.jsx)("button",{onClick:()=>g(o.id,"rejected"),disabled:p.isLoading,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:"Reject"}),(0,og.jsx)("button",{onClick:()=>g(o.id,"approved"),disabled:p.isLoading,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:"Approve"})]})]})]})})})]})},vb=Pv("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),yb=Pv("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),xb=Pv("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),bb=()=>{var e,n,r;const[s,i]=(0,t.useState)(!1),[a,o]=(0,t.useState)(null),[l,c]=(0,t.useState)({username:"",email:"",password:"",firstName:"",lastName:"",rangeName:"",rangeLocation:"",phone:""}),u=(0,De.useQueryClient)(),{data:d,isLoading:h,error:f}=(0,De.useQuery)("range-admins",()=>mv(),{staleTime:3e5,refetchOnWindowFocus:!0,refetchOnMount:!0}),m=(0,De.useMutation)(e=>pv(e),{onSuccess:()=>{en.success("Range admin account created successfully"),console.log("Range admin created, invalidating queries..."),u.invalidateQueries(["range-admins"]),u.refetchQueries(["range-admins"]),console.log("Queries invalidated"),i(!1),c({username:"",email:"",password:"",firstName:"",lastName:"",rangeName:"",rangeLocation:"",phone:""})},onError:e=>{var t,n;en.error((null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Failed to create range admin account")}}),p=e=>{const{name:t,value:n}=e.target;c(e=>Ue(Ue({},e),{},{[t]:n}))};if(h)return(0,og.jsx)("div",{className:"flex items-center justify-center min-h-64",children:(0,og.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(f)return(0,og.jsxs)("div",{className:"text-center py-8",children:[(0,og.jsx)("div",{className:"text-red-600 mb-4",children:"Error loading range admins"}),(0,og.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Try Again"})]});const g=(null===d||void 0===d||null===(e=d.data)||void 0===e?void 0:e.rangeAdmins)||(null===d||void 0===d?void 0:d.rangeAdmins)||[];return console.log("Range admins data:",d),console.log("Range admins data.rangeAdmins:",null===d||void 0===d?void 0:d.rangeAdmins),console.log("Range admins data.data.rangeAdmins:",null===d||void 0===d||null===(n=d.data)||void 0===n?void 0:n.rangeAdmins),console.log("Range admins list:",g),console.log("List length:",g.length),(0,og.jsxs)("div",{className:"space-y-6",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Range Admin Management"}),(0,og.jsx)("p",{className:"text-xl text-gray-600",children:"Create and manage range admin accounts for hosting ranges"})]}),(0,og.jsxs)("button",{onClick:()=>i(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,og.jsx)(Xx,{className:"w-5 h-5"}),(0,og.jsx)("span",{children:"Create Range Admin"})]})]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,og.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,og.jsxs)("div",{className:"flex items-center",children:[(0,og.jsx)(nb,{className:"w-8 h-8 text-blue-500"}),(0,og.jsxs)("div",{className:"ml-4",children:[(0,og.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Range Admins"}),(0,og.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:g.length})]})]})}),(0,og.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,og.jsxs)("div",{className:"flex items-center",children:[(0,og.jsx)(vb,{className:"w-8 h-8 text-green-500"}),(0,og.jsxs)("div",{className:"ml-4",children:[(0,og.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active"}),(0,og.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:g.filter(e=>e.isActive).length})]})]})})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,og.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,og.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Range Admin Accounts"})}),0===g.length?(0,og.jsxs)("div",{className:"p-8 text-center",children:[(0,og.jsx)(nb,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,og.jsx)("p",{className:"text-gray-600",children:"No range admin accounts created yet"}),(0,og.jsx)("button",{onClick:()=>i(!0),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create First Range Admin"})]}):(0,og.jsx)("div",{className:"divide-y divide-gray-200",children:g.map(e=>{var t;return(0,og.jsx)("div",{className:"p-6",children:(0,og.jsxs)("div",{className:"flex items-start justify-between",children:[(0,og.jsxs)("div",{className:"flex-1",children:[(0,og.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,og.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,og.jsx)(nb,{className:"w-5 h-5 text-blue-500"}),(0,og.jsxs)("span",{className:"text-lg font-semibold text-gray-900",children:[e.firstName," ",e.lastName]}),(0,og.jsxs)("span",{className:"text-sm text-gray-500",children:["(@",e.username,")"]})]}),(0,og.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,og.jsx)(Mv,{className:"w-4 h-4 text-gray-400"}),(0,og.jsx)("span",{className:"text-sm text-gray-600",children:e.rangeName})]})]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,og.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,og.jsx)(yb,{className:"w-4 h-4 text-gray-400"}),(0,og.jsx)("span",{className:"text-sm text-gray-600",children:e.email})]}),(0,og.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,og.jsx)(Mv,{className:"w-4 h-4 text-gray-400"}),(0,og.jsx)("span",{className:"text-sm text-gray-600",children:e.rangeLocation})]}),e.phone&&(0,og.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,og.jsx)(xb,{className:"w-4 h-4 text-gray-400"}),(0,og.jsx)("span",{className:"text-sm text-gray-600",children:e.phone})]})]}),(0,og.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,og.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Active":"Inactive"}),(0,og.jsxs)("span",{className:"text-xs text-gray-500",children:["Created: ",null!==(t=e.createdAt)&&void 0!==t&&t._seconds?new Date(1e3*e.createdAt._seconds).toLocaleDateString():new Date(e.createdAt).toLocaleDateString()]})]})]}),(0,og.jsx)("div",{className:"ml-6 flex flex-col space-y-2",children:(0,og.jsx)("button",{onClick:()=>o(e),className:"px-3 py-1 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:(0,og.jsx)(pb,{className:"w-4 h-4"})})})]})},e.id)})})]}),s&&(0,og.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,og.jsx)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,og.jsxs)("div",{className:"p-6",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,og.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Create Range Admin Account"}),(0,og.jsx)("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:(0,og.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,og.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,og.jsxs)("form",{onSubmit:e=>{e.preventDefault(),m.mutate(l)},className:"space-y-6",children:[(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),(0,og.jsx)("input",{type:"text",name:"firstName",value:l.firstName,onChange:p,required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),(0,og.jsx)("input",{type:"text",name:"lastName",value:l.lastName,onChange:p,required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username *"}),(0,og.jsx)("input",{type:"text",name:"username",value:l.username,onChange:p,required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),(0,og.jsx)("input",{type:"email",name:"email",value:l.email,onChange:p,required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),(0,og.jsx)("input",{type:"password",name:"password",value:l.password,onChange:p,required:!0,minLength:6,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Range Name *"}),(0,og.jsx)("input",{type:"text",name:"rangeName",value:l.rangeName,onChange:p,required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Range Location *"}),(0,og.jsx)("input",{type:"text",name:"rangeLocation",value:l.rangeLocation,onChange:p,required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,og.jsx)("input",{type:"tel",name:"phone",value:l.phone,onChange:p,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,og.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,og.jsx)("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,og.jsx)("button",{type:"submit",disabled:m.isLoading,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:m.isLoading?"Creating...":"Create Range Admin"})]})]})]})})}),a&&(0,og.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,og.jsx)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,og.jsxs)("div",{className:"p-6",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,og.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Range Admin Details"}),(0,og.jsx)("button",{onClick:()=>o(null),className:"text-gray-400 hover:text-gray-600",children:(0,og.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,og.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,og.jsxs)("div",{className:"space-y-6",children:[(0,og.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-500",children:"Name"}),(0,og.jsxs)("p",{className:"font-medium",children:[a.firstName," ",a.lastName]})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-500",children:"Username"}),(0,og.jsxs)("p",{className:"font-medium",children:["@",a.username]})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-500",children:"Email"}),(0,og.jsx)("p",{className:"font-medium",children:a.email})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-500",children:"Phone"}),(0,og.jsx)("p",{className:"font-medium",children:a.phone||"Not provided"})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-500",children:"Range Name"}),(0,og.jsx)("p",{className:"font-medium",children:a.rangeName})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-500",children:"Range Location"}),(0,og.jsx)("p",{className:"font-medium",children:a.rangeLocation})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-500",children:"Status"}),(0,og.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(a.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:a.isActive?"Active":"Inactive"})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("p",{className:"text-sm text-gray-500",children:"Created"}),(0,og.jsx)("p",{className:"font-medium",children:null!==(r=a.createdAt)&&void 0!==r&&r._seconds?new Date(1e3*a.createdAt._seconds).toLocaleDateString():new Date(a.createdAt).toLocaleDateString()})]})]}),(0,og.jsx)("div",{className:"flex justify-end",children:(0,og.jsx)("button",{onClick:()=>o(null),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Close"})})]})]})})})]})},wb=Pv("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Nb=Pv("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),jb=()=>(0,og.jsxs)("div",{className:"space-y-6",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"System Settings"}),(0,og.jsx)("p",{className:"text-gray-600",children:"Configure platform preferences and administration tools"})]}),(0,og.jsx)(tb,{className:"w-8 h-8 text-gray-400"})]}),(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("div",{className:"flex items-center mb-4",children:[(0,og.jsx)(nb,{className:"w-5 h-5 text-blue-600 mr-2"}),(0,og.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Security"})]}),(0,og.jsx)("p",{className:"text-sm text-gray-600",children:"More controls coming soon."})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("div",{className:"flex items-center mb-4",children:[(0,og.jsx)(wb,{className:"w-5 h-5 text-green-600 mr-2"}),(0,og.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Notifications"})]}),(0,og.jsx)("p",{className:"text-sm text-gray-600",children:"Email and in-app notifications configuration."})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("div",{className:"flex items-center mb-4",children:[(0,og.jsx)(Nb,{className:"w-5 h-5 text-purple-600 mr-2"}),(0,og.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Data"})]}),(0,og.jsx)("p",{className:"text-sm text-gray-600",children:"Backups and data retention. Coming soon."})]})]})]}),Sb=()=>{const e=(0,De.useQueryClient)(),[n,r]=(0,t.useState)(""),[s,i]=(0,t.useState)(""),[a,o]=(0,t.useState)(Array(10).fill({value:"",isX:!1})),[l,c]=(0,t.useState)(""),[u,d]=(0,t.useState)(""),{data:h}=(0,De.useQuery)(["admin-enter-score-competitions"],()=>Hg().then(e=>e.data),{staleTime:3e5}),f=((null===h||void 0===h?void 0:h.competitions)||[]).filter(e=>"published"===e.status||"active"===e.status),{data:m}=(0,De.useQuery)(["competition",n],()=>n?Wg(n).then(e=>{var t;return null===(t=e.data)||void 0===t?void 0:t.competition}):null,{enabled:!!n,staleTime:12e4}),p=(0,t.useMemo)(()=>(null===m||void 0===m?void 0:m.participants)||[],[m]);(0,t.useEffect)(()=>{i("");const e=(null===m||void 0===m?void 0:m.shotsPerTarget)||10;e&&a.length!==e&&o(Array(e).fill({value:"",isX:!1}))},[n,m]);const g=(0,t.useMemo)(()=>a.reduce((e,t)=>e+(parseInt(t.value,10)||0),0),[a]),v=(0,t.useMemo)(()=>a.filter(e=>10===parseInt(e.value,10)&&e.isX).length,[a]),y=(0,De.useMutation)(e=>Jg(e),{onSuccess:()=>{en.success("Score submitted on behalf of competitor"),e.invalidateQueries(["competition-scores",n]),o(Array((null===m||void 0===m?void 0:m.shotsPerTarget)||10).fill({value:"",isX:!1})),c(""),d(""),i("")},onError:e=>{var t,n;en.error((null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Failed to submit score")}});return(0,og.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:[(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Enter Score (Admin)"}),(0,og.jsx)("p",{className:"text-gray-600",children:"Submit a score for a registered competitor. Submissions are auto-approved."})]}),(0,og.jsx)(Hv,{className:"w-8 h-8 text-green-500"})]}),(0,og.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!n)return en.error("Choose a competition");if(!s)return en.error("Choose a competitor");const t=(null===m||void 0===m?void 0:m.shotsPerTarget)||10,r=a.filter(e=>""!==e.value&&null!==e.value&&void 0!==e.value);if(r.length!==t)return en.error("This competition requires ".concat(t," shots. You entered ").concat(r.length,"."));const i=a.map(e=>{var t;return{value:parseInt(null!==(t=null===e||void 0===e?void 0:e.value)&&void 0!==t?t:"0",10)||0,isX:!0===(null===e||void 0===e?void 0:e.isX)}}).slice(0,t),o={competitionId:n,competitorId:s,score:Math.round(g),shots:i,evidence:Ue(Ue({},l?{photoUrl:l}:{}),u?{videoUrl:u}:{})};y.mutate(o)},className:"space-y-8",children:[(0,og.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6 space-y-4",children:(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Competition"}),(0,og.jsxs)("select",{value:n,onChange:e=>r(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,og.jsx)("option",{value:"",children:"Select competition..."}),f.map(e=>{var t;return(0,og.jsxs)("option",{value:e.id,children:[e.title," ",null!==(t=e.schedule)&&void 0!==t&&t.competitionDate?"\u2014 ".concat(new Date(e.schedule.competitionDate).toLocaleDateString()):""]},e.id)})]})]}),(0,og.jsxs)("div",{children:[(0,og.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,og.jsx)(Fv,{className:"w-4 h-4 mr-1"})," Competitor (registered)"]}),(0,og.jsxs)("select",{value:s,onChange:e=>i(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,disabled:!n,children:[(0,og.jsx)("option",{value:"",children:"Select competitor..."}),p.map(e=>(0,og.jsx)("option",{value:e.userId,children:e.userName||e.username||e.userId},e.userId))]}),!n&&(0,og.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Choose a competition to see registered participants."}),n&&0===p.length&&(0,og.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"No registered participants found for this competition."})]})]})}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,og.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,og.jsx)(Wv,{className:"h-5 w-5 mr-2"})," Shots \u2014 required: ",(null===m||void 0===m?void 0:m.shotsPerTarget)||10]}),(0,og.jsx)("div",{className:"grid grid-cols-5 md:grid-cols-10 gap-3 mb-4",children:a.map((e,t)=>(0,og.jsxs)("div",{className:"text-center",children:[(0,og.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Shot ",t+1]}),(0,og.jsxs)("div",{className:"flex items-center gap-2 justify-center",children:[(0,og.jsxs)("select",{value:e.value,onChange:e=>((e,t)=>{var n;const r=[...a],s=""===t?"":Math.max(0,Math.min(10,parseInt(t,10)||0));r[e]={value:s,isX:10===s&&(null===(n=r[e])||void 0===n?void 0:n.isX)||!1},o(r)})(t,e.target.value),className:"w-16 px-2 py-1 text-center border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",children:[(0,og.jsx)("option",{value:"",children:"--"}),Array.from({length:11},(e,t)=>t).map(e=>(0,og.jsx)("option",{value:e,children:e},e))]}),(0,og.jsxs)("label",{className:"flex items-center gap-1 text-xs",children:[(0,og.jsx)("input",{type:"checkbox",checked:!!e.isX,onChange:e=>((e,t)=>{const n=[...a],r=n[e]||{value:"",isX:!1};n[e]=t?{value:10,isX:!0}:{value:r.value,isX:!1},o(n)})(t,e.target.checked)}),(0,og.jsx)("span",{children:"X"})]})]})]},t))}),(0,og.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,og.jsxs)("div",{className:"flex justify-between items-center",children:[(0,og.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:"Total Score:"}),(0,og.jsxs)("span",{className:"text-2xl font-bold text-blue-600",children:[g," (",v,"X)"]})]})})]}),(0,og.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:(0,og.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Photo URL (optional)"}),(0,og.jsx)("input",{type:"url",value:l,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/target.jpg"})]}),(0,og.jsxs)("div",{children:[(0,og.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video URL (optional)"}),(0,og.jsx)("input",{type:"url",value:u,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/video.mp4"})]})]})}),(0,og.jsx)("div",{className:"flex justify-end",children:(0,og.jsx)("button",{type:"submit",disabled:y.isLoading,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center",children:y.isLoading?"Submitting...":(0,og.jsxs)(og.Fragment,{children:[(0,og.jsx)(ib,{className:"w-4 h-4 mr-2"})," Submit Score"]})})})]})]})},_b=Pv("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),kb=Pv("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Eb=Pv("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Cb=Pv("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Tb=e=>{let{role:t}=e;const n="admin"===t?"bg-purple-100 text-purple-800":"range_admin"===t?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800";return(0,og.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(n),children:null===t||void 0===t?void 0:t.replace("_"," ")})},Ib=()=>{const[e,n]=(0,t.useState)(""),[r,s]=(0,t.useState)(1),[i,a]=(0,t.useState)(""),o=(0,De.useQueryClient)(),{data:l,isLoading:c,error:u}=(0,De.useQuery)(["admin-users",r,i,e],()=>hv({page:r,limit:20,role:i||void 0,search:e||void 0})),d=(0,De.useMutation)(e=>ov(e),{onSuccess:()=>{en.success("User verified"),o.invalidateQueries("admin-users")},onError:e=>{var t,n;return en.error((null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Failed to verify")}}),h=(0,De.useMutation)(e=>lv(e),{onSuccess:()=>{en.success("User deactivated"),o.invalidateQueries("admin-users")},onError:e=>{var t,n;return en.error((null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Failed to deactivate")}}),f=(0,De.useMutation)(e=>{let{userId:t,role:n}=e;return cv(t,n)},{onSuccess:()=>{en.success("Role updated"),o.invalidateQueries("admin-users")},onError:e=>{var t,n;return en.error((null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Failed to update role")}}),m=(0,De.useMutation)(e=>uv(e),{onSuccess:()=>{en.success("User removed"),o.invalidateQueries("admin-users")},onError:e=>{var t,n;return en.error((null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)||"Failed to remove user")}}),p=(null===l||void 0===l?void 0:l.users)||[],g=null===l||void 0===l?void 0:l.pagination;return(0,og.jsxs)("div",{className:"space-y-6",children:[(0,og.jsx)("div",{className:"flex items-center justify-between",children:(0,og.jsxs)("div",{children:[(0,og.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Manage Users"}),(0,og.jsx)("p",{className:"text-gray-600",children:"Search, verify, change roles, deactivate, or remove users."})]})}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4 flex items-center gap-3",children:[(0,og.jsxs)("div",{className:"relative flex-1",children:[(0,og.jsx)(Ov,{className:"w-4 h-4 text-gray-400 absolute left-3 top-3"}),(0,og.jsx)("input",{value:e,onChange:e=>n(e.target.value),placeholder:"Search name, username, email...",className:"w-full pl-9 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,og.jsxs)("select",{value:i,onChange:e=>{a(e.target.value),s(1)},className:"px-3 py-2 border rounded-lg",children:[(0,og.jsx)("option",{value:"",children:"All Roles"}),(0,og.jsx)("option",{value:"competitor",children:"Competitor"}),(0,og.jsx)("option",{value:"range_admin",children:"Range Admin"}),(0,og.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,og.jsx)("div",{className:"px-6 py-4 border-b",children:(0,og.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Users"})}),c?(0,og.jsx)("div",{className:"p-6 text-center",children:"Loading..."}):u?(0,og.jsx)("div",{className:"p-6 text-center text-red-600",children:"Failed to load users"}):0===p.length?(0,og.jsx)("div",{className:"p-6 text-center text-gray-600",children:"No users found"}):(0,og.jsx)("div",{className:"divide-y",children:p.map(e=>{var t,n;return(0,og.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between",children:[(0,og.jsxs)("div",{className:"flex items-center gap-4",children:[(0,og.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center font-semibold text-gray-700",children:((null===(t=e.firstName)||void 0===t?void 0:t[0])||(null===(n=e.username)||void 0===n?void 0:n[0])||"U").toUpperCase()}),(0,og.jsxs)("div",{children:[(0,og.jsxs)("div",{className:"font-semibold text-gray-900",children:[e.firstName," ",e.lastName," ",(0,og.jsxs)("span",{className:"text-gray-500",children:["@",e.username]})]}),(0,og.jsx)("div",{className:"text-sm text-gray-600",children:e.email}),(0,og.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,og.jsx)(Tb,{role:e.role}),(0,og.jsx)("span",{className:"px-2 py-0.5 text-xs rounded-full ".concat(e.isVerified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.isVerified?"Verified":"Pending"}),(0,og.jsx)("span",{className:"px-2 py-0.5 text-xs rounded-full ".concat(!1===e.isActive?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),children:!1===e.isActive?"Inactive":"Active"})]})]})]}),(0,og.jsxs)("div",{className:"flex items-center gap-2",children:[!e.isVerified&&(0,og.jsxs)("button",{onClick:()=>d.mutate(e.id),className:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700 flex items-center gap-1",children:[(0,og.jsx)(_b,{className:"w-4 h-4"})," Verify"]}),!1!==e.isActive?(0,og.jsxs)("button",{onClick:()=>h.mutate(e.id),className:"px-3 py-1 text-sm bg-gray-100 text-gray-800 rounded hover:bg-gray-200 flex items-center gap-1",children:[(0,og.jsx)(kb,{className:"w-4 h-4"})," Deactivate"]}):null,(0,og.jsx)("div",{className:"relative",children:(0,og.jsxs)("select",{value:e.role,onChange:t=>f.mutate({userId:e.id,role:t.target.value}),className:"px-2 py-1 text-sm border rounded",children:[(0,og.jsx)("option",{value:"competitor",children:"Competitor"}),(0,og.jsx)("option",{value:"range_admin",children:"Range Admin"}),(0,og.jsx)("option",{value:"admin",children:"Admin"})]})}),(0,og.jsxs)("button",{onClick:()=>(e=>{window.confirm("Remove ".concat(e.username||e.email,"? This deletes their scores and registrations."))&&m.mutate(e.id)})(e),className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700 flex items-center gap-1",children:[(0,og.jsx)(Bv,{className:"w-4 h-4"})," Remove"]})]})]},e.id)})}),(0,og.jsxs)("div",{className:"px-6 py-3 border-t flex items-center justify-between text-sm text-gray-600",children:[(0,og.jsx)("div",{children:g?(0,og.jsxs)("span",{children:["Page ",g.current," of ",g.total," \u2022 ",g.totalUsers," users"]}):null}),(0,og.jsxs)("div",{className:"flex items-center gap-2",children:[(0,og.jsxs)("button",{disabled:!(null!==g&&void 0!==g&&g.hasPrev),onClick:()=>s(e=>Math.max(1,e-1)),className:"px-2 py-1 border rounded disabled:opacity-50 flex items-center gap-1",children:[(0,og.jsx)(Eb,{className:"w-4 h-4"})," Prev"]}),(0,og.jsxs)("button",{disabled:!(null!==g&&void 0!==g&&g.hasNext),onClick:()=>s(e=>e+1),className:"px-2 py-1 border rounded disabled:opacity-50 flex items-center gap-1",children:["Next ",(0,og.jsx)(Cb,{className:"w-4 h-4"})]})]})]})]})]})},Ab=[{id:"purpose",title:"1. Purpose & Scope",body:"The X\u2011Ring Classic is a precision .22LR rifle program designed to be easy to run at any range while producing nationally comparable results. This rulebook defines safety, eligibility, equipment, course of fire, scoring, classifications, and match administration. Where a local range policy is stricter than these rules, the local policy prevails."},{id:"safety",title:"2. Safety",bullets:["All local range rules and commands are mandatory.","Actions open, chamber flags inserted, and muzzle down\u2011range unless actively firing.","Eye protection is required for all persons on the line; hearing protection is strongly recommended.","Cease\u2011fire: Any person may call \u201cCease Fire\u201d. On a cease\u2011fire, make safe immediately.","Handling firearms behind the line or during a cease\u2011fire is prohibited."]},{id:"eligibility",title:"3. Eligibility & Divisions",bullets:["Open to all shooters in good standing with the host range.","Age groups (optional by match): Junior (under 18), Adult, Senior (60+).","Divisions: Indoor (25\u2011yard), Outdoor (50\u2011yard). Formats: Benchrest, Prone, Standing.","Competitors may enter multiple divisions if separate cards are fired."]},{id:"equipment",title:"4. Equipment",bullets:[".22LR rifle only. Any safe trigger and sighting system.","Supports: As allowed by the chosen format (e.g., benchrest front/rear rest; prone sling or bipod; standing no artificial support).","No muzzle brakes that direct blast laterally toward other shooters.","Ammunition must be commercially manufactured .22 Long Rifle."]},{id:"course",title:"5. Course of Fire",bullets:["Competitors fire four 25-bull target sheets (cards), one shot per bull, for 100 scoring rounds total.","Standard card: 25 scoring shots, one per bull, within the allotted time (typ. 15\u201320 minutes).","Sighters: At the match director\u2019s option; sighters are not scored.","Alibis: Malfunctions may be cleared; no refires for ammunition or equipment issues."]},{id:"targets",title:"6. Targets & Distances",body:"Indoor cards are fired at 25 yards; outdoor at 50 yards. Targets must have a clearly marked 10\u2011ring and X\u2011ring. Clubs may use equivalent commercially available targets."},{id:"scoring",title:"7. Scoring",bullets:["Per\u2011shot value 0\u201310. An X counts as 10 with X credit.","A shot that clearly touches a higher ring (line\u2011breaker) receives the higher value.","One hole per bull is scored; excessive hits use the lowest value(s) that can be attributed to the bull.","Visible cross\u2011fire on another target is recorded as a miss on the shooter\u2019s own target.","Card total: sum of 25 shots. X\u2011count is recorded for tiebreaks."]},{id:"verification",title:"8. Submission & Verification",bullets:["Competitors may self\u2011report scores in the app and attach optional photo/video evidence.","A Range Admin verifies cards. Admin\u2011entered cards are auto\u2011approved but must reflect the physical target.","Suspected errors or rule violations may be flagged for review."]},{id:"classifications",title:"9. Classifications",body:"Class tracks consistent performance and provides fair peer groups. Provisional classes apply until enough cards are recorded.",bullets:["Computation window: last 12 months.","Qualifying set: best 6 of last 10 approved cards (per 25\u2011shot card).","Provisional: if fewer than 6 cards exist, a provisional tier is issued from available cards.","Tiers (average card / X\u2011avg): Grand Master \u2265 249.0 and \u2265 15 X; Master \u2265 247.0 and \u2265 10 X; Diamond \u2265 245.0 and \u2265 8 X; Platinum \u2265 242.0 and \u2265 6 X; Gold \u2265 238.0; otherwise Bronze."]},{id:"tiebreaks",title:"10. Ties & Records",bullets:["Ties are broken by X\u2011count, then by earliest submission time, then coin toss if required.","Match records require Range Admin verification and retained target or image."]},{id:"conduct",title:"11. Conduct & Penalties",bullets:["Unsportsmanlike conduct, unsafe gun handling, or falsifying scores may result in disqualification and removal from the platform.","Match directors may impose local penalties consistent with these rules."]},{id:"md",title:"12. Match Administration",bullets:["Range Admins create competitions, publish results, and verify scores.","Protests must be filed the day of the match or within 48 hours for remote verification matches.","Rules updates are published in\u2011app; the most recent in\u2011app version governs."]}],Rb=()=>(0,og.jsxs)("div",{className:"max-w-5xl mx-auto space-y-6",children:[(0,og.jsxs)("div",{className:"text-center",children:[(0,og.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"The X-Ring Classic Rulebook"}),(0,og.jsx)("p",{className:"text-gray-600",children:"Official rules, scoring, and classifications"})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[(0,og.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Table of Contents"}),(0,og.jsx)("div",{className:"flex flex-wrap gap-x-6 gap-y-2 text-sm",children:Ab.map(e=>(0,og.jsx)("a",{href:"#".concat(e.id),className:"text-blue-600 hover:text-blue-800",children:e.title},e.id))})]}),(0,og.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 space-y-8",children:[Ab.map(e=>(0,og.jsxs)("section",{id:e.id,children:[(0,og.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:e.title}),e.body&&(0,og.jsx)("p",{className:"text-gray-700 mb-3",children:e.body}),Array.isArray(e.bullets)&&(0,og.jsx)("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:e.bullets.map((e,t)=>(0,og.jsx)("li",{children:e},t))})]},e.id)),(0,og.jsxs)("div",{className:"text-sm text-gray-500 pt-2 border-t",children:["Version 1.0 \u2022 Effective ",(new Date).toLocaleDateString()]})]}),(0,og.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:(0,og.jsxs)("div",{className:"flex items-center justify-between",children:[(0,og.jsx)("div",{className:"text-sm text-gray-600",children:"Looking for the previous PDF?"}),(0,og.jsx)("a",{href:"/The_X_Ring_Classic_Rulebook_Updated.pdf",target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1.5 bg-gray-800 text-white rounded hover:bg-gray-900 text-sm",children:"Open Previous PDF"})]})})]}),Db=e=>{let{children:t,requiredRole:n}=e;const{user:r,isAuthenticated:s,isLoading:i}=hg(),a=J();if(i)return(0,og.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,og.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-rifle-600"})});if(!s)return(0,og.jsx)(ve,{to:"/login",state:{from:a},replace:!0});if(n){if(!(Array.isArray(n)?n.includes(null===r||void 0===r?void 0:r.role):(null===r||void 0===r?void 0:r.role)===n))return(0,og.jsx)(ve,{to:"/",replace:!0})}return t};const Pb=function(){const{user:e}=hg();return(0,og.jsx)("div",{className:"App",children:(0,og.jsxs)(we,{children:[(0,og.jsx)(xe,{path:"/login",element:(0,og.jsx)(Kx,{})}),(0,og.jsx)(xe,{path:"/register",element:(0,og.jsx)(Gx,{})}),(0,og.jsxs)(xe,{path:"/",element:(0,og.jsx)(Qg,{}),children:[(0,og.jsx)(xe,{index:!0,element:(0,og.jsx)(Av,{})}),(0,og.jsx)(xe,{path:"competitions",element:(0,og.jsx)(zv,{})}),(0,og.jsx)(xe,{path:"competitions/:id",element:(0,og.jsx)($v,{})}),(0,og.jsx)(xe,{path:"competitions/:id/edit",element:(0,og.jsx)(Db,{requiredRole:["admin","range_admin"],children:(0,og.jsx)(ob,{})})}),(0,og.jsx)(xe,{path:"leaderboard",element:(0,og.jsx)(Jv,{})}),(0,og.jsx)(xe,{path:"leaderboard/:type",element:(0,og.jsx)(Jv,{})}),(0,og.jsx)(xe,{path:"shooting-classes",element:(0,og.jsx)(mb,{})}),(0,og.jsx)(xe,{path:"rulebook",element:(0,og.jsx)(Rb,{})}),(0,og.jsx)(xe,{path:"profile",element:(0,og.jsx)(Db,{children:(0,og.jsx)(Vx,{})})}),(0,og.jsx)(xe,{path:"submit-score/:competitionId",element:(0,og.jsx)(Db,{children:(0,og.jsx)(ub,{})})}),(0,og.jsx)(xe,{path:"admin",element:(0,og.jsx)(Db,{requiredRole:"admin",children:(0,og.jsx)(rb,{})})}),(0,og.jsx)(xe,{path:"admin/create-competition",element:(0,og.jsx)(Db,{requiredRole:["admin","range_admin"],children:(0,og.jsx)(ab,{})})}),(0,og.jsx)(xe,{path:"admin/score-verification",element:(0,og.jsx)(Db,{requiredRole:["admin","range_admin"],children:(0,og.jsx)(gb,{})})}),(0,og.jsx)(xe,{path:"admin/enter-score",element:(0,og.jsx)(Db,{requiredRole:["admin","range_admin"],children:(0,og.jsx)(Sb,{})})}),(0,og.jsx)(xe,{path:"admin/range-management",element:(0,og.jsx)(Db,{requiredRole:"admin",children:(0,og.jsx)(bb,{})})}),(0,og.jsx)(xe,{path:"admin/users",element:(0,og.jsx)(Db,{requiredRole:"admin",children:(0,og.jsx)(Ib,{})})}),(0,og.jsx)(xe,{path:"admin/settings",element:(0,og.jsx)(Db,{requiredRole:"admin",children:(0,og.jsx)(jb,{})})}),(0,og.jsx)(xe,{path:"test",element:(0,og.jsx)(db,{})})]})]})})},Ob=new De.QueryClient({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}});s.createRoot(document.getElementById("root")).render((0,og.jsx)(t.StrictMode,{children:(0,og.jsx)(De.QueryClientProvider,{client:Ob,children:(0,og.jsx)(Ee,{children:(0,og.jsxs)(dg,{children:[(0,og.jsx)(Pb,{}),(0,og.jsx)(Zt,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}})]})})})}))})()})();
//# sourceMappingURL=main.369fa0c1.js.map